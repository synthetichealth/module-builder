{"version":3,"sources":["reducers/library.js","templates/Templates.js","utils/stringUtils.js","reducers/analysis.js","reducers/editor.js","store.js","reducers/index.js","components/editor/Code.js","components/editor/Reaction.js","components/editor/String.js","components/editor/Goal.js","components/editor/ImagingStudyAttributes.js","components/editor/Conditional.js","components/editor/DirectTransition.js","components/editor/DistributedTransition.js","components/editor/ConditionalTransition.js","components/editor/ComplexTransition.js","components/editor/Table.js","components/editor/TableTransition.js","components/editor/Transition.js","templates/Tutorial.js","components/editor/AutoCompleteText.js","components/editor/Attributes.js","components/editor/State.js","components/editor/ModuleProperties.js","utils/graphviz.js","components/graph/ModuleGraph.js","components/menu/StyledDropZone.js","utils/localStorageHelpers.js","components/menu/LoadModule.js","components/menu/Download.js","components/editor/NavTabs.js","components/editor/cancel-button.png","transforms/Module.js","utils/keys.js","data/example_module.js","components/editor/JsonEditor.js","components/analysis/cancel-button.png","components/analysis/StateList.js","components/analysis/AttributeList.js","components/analysis/WarningList.js","components/analysis/RelatedList.js","containers/synthea-animated-logo.svg","containers/synthea-logo.png","actions/analysis.js","actions/editor.js","actions/router.js","actions/library.js","containers/Editor.js","containers/state-button.png","containers/statelist.png","containers/attribute-button.png","containers/warning-button.png","containers/related-button.png","containers/fullscreen.png","containers/Info.png","containers/code-button.png","containers/minimize-panel.png","App.js","serviceWorker.js","index.js"],"names":["initialState","modules","analysis","state","arguments","length","undefined","action","type","_objectSpread","data","location","getTemplate","path","parsedPath","split","template","shift","reducedPath","join","typeVar","TypeTemplates","AttributeTemplates","TransitionTemplates","StateTemplates","ContainedTemplates","StructureTemplates","ModuleTemplates","_","cloneDeep","get","Date","Year","Month","Day","Hour","Minute","Second","Millisecond","Code","Snomed","system","code","display","Loinc","RxNorm","Nubc","DicomDCM","DicomSOP","Cvx","Condition","Gender","condition_type","gender","Age","operator","quantity","unit","year","codes","Race","Symptom","Observation","PriorState","Attribute","And","Or","Not","Exact","ExactWithUnit","Range","low","high","RangeWithUnit","Prescription","dosage","amount","frequency","period","duration","Goal","addresses","value","Since","Within","UnnamedDistribution","NamedDistribution","attribute","default","Supply","ImagingStudy","Instance","title","sop_class","Series","body_site","modality","instances","Direct","Conditional","transition","condition","Distributed","distribution","Complex","distributions","Table","lookuptable","viewTable","lookup_table_name_ModuleBuilder","transitions","default_probability","lookup_table_name","Initial","Terminal","Simple","Guard","allow","Delay","SetAttribute","Counter","CallSubmodule","submodule","Encounter","encounter_class","reason","telemedicine_possibility","EncounterEnd","ConditionOnset","ConditionEnd","AllergyOnset","allergy_type","category","reactions","AllergyEnd","MedicationOrder","MedicationEnd","CarePlanStart","CarePlanEnd","Procedure","Vaccine","series","VitalSign","vital_sign","kind","parameters","round","MultiObservation","number_of_observations","DiagnosticReport","observations","procedure_code","symptom","cause","probability","Device","DeviceEnd","SupplyList","supplies","Death","exact","CheckYearly","conditional_transition","ActiveCondition","HasCondition","direct_transition","ConditionIncidence","RiskPerMonth","distributed_transition","AcquireCondition","GenderDifference","Male","Female","Common","ConditionVariation","VariantDistribution","Condition1","Condition2","Condition3","Join","MedicationVariation","Medication1","Medication2","Medication3","ChildrensDose","DosageDecision","AdultDose","MedicationsByYear","VariantsByYear","Medication4","ProcedureVariation","BeginEncounter","Procedure1","Observation1","Procedure2","Observation2","Procedure3","Observation3","Blank","name","remarks","states","Yearly","DeadAt40","DelayUntil40","cleanString","mapObj","Object","keys","reduce","acc","cur","libraryModuleCodes","warnings","libraryRelatedModules","relatedModules","attributes","templateCodes","map","c","forEach","concat","parseLookupTable","parsed","isNumber","toString","Papa","parse","header","complete","results","tableHasError","textOk","parseOk","stateCollisionWarnings","module","globalCodes","equivalentStates","checkCollision","libraryState","local","first","second","filter","e","stateName","collisions","push","message","moduleKey","newState","_toConsumableArray","visitedStateCheck","visitNext","_loop","nextStateKey","pop","nextState","lookup_table_transition","complex_transition","notVisitedWarnings","s","visited","v","orphanStateWarnings","o","instance","placeholderCodeWarnings","tableColumns","i","tableTransitionWarnings","gmf_version","gmfVersionWarnings","includes","telemedicineWarnings","relatedMap","related","moduleState","relatedBySubmodule","stateType","assign_to_attribute","sort","a","b","x","toLowerCase","y","selectedStateKey","selectedStateTransition","selectedModuleKey","loadModuleVisible","downloadVisible","selectedModulePanel","modulePanelVisible","history","clipboard","historyIndex","refreshCodeFlag","targetModuleKey","key","transitionIndex","targetNode","currentModuleKey","_defineProperty","stateKey","selectedState","alteredState","oldTransitionPoint","complexTransitions","rightNode","t","nodes","dist","saveHistory","structureName","libraryModule","newModule","selectStateTransition","newModules","tempModule","values","update","id","set","trim","test","parseFloat","normalizeType","splitPath","Array","isArray","parent","slice","unset","splice","newVal","fixStateReferences","transitionMapping","transitionName","transitionType","oldTransitionName","nodeName","paths","pathIndex","transitionTo","newName","newRemarks","newType","pick","targetPanel","flag","target_encounter","condition_onset","allergy_onset","medication_order","careplan","enhancers","middleware","createBrowserHistory","basename","createAppStore","routerMiddleware","thunk","composedEnhancers","compose","apply","applyMiddleware","store","createStore","combineReducers","router","connectRouter","library","editor","createRootReducer","_Component","_inherits","_super","_createSuper","_classCallCheck","_createClass","this","props","value_set","_jsxs","children","_jsx","RIEInput","className","propName","change","onChange","checkValueSetKey","Component","Codes","_Component2","_super2","_this","templates","onClick","val","Severity","level","RIESelect","text","options","RIENumber","editProps","step","min","max","format","formatAsPercentage","validate","checkInRange","num","Reaction","reaction","possible_severities","ps","renderWarning","StringEditor","label","StringsEditor","goal","renderObservation","renderText","observation","goalObservationValue","_this2","Goals","_this3","goals","InstanceList","_Component3","_super3","SeriesList","_Component4","_super4","unitOfTimeOptions","unitOfAgeOptions","ConditionalEditor","conditional","SocioeconomicStatus","ActiveAllergy","ActiveMedication","ActiveCarePlan","AtLeast","AtMost","k","renderConditionalType","renderType","month","date","yearInput","monthInput","dayInput","day","hourInput","hour","minuteInput","minute","secondInput","millisecondInput","millisecond","_Component5","_super5","_Component6","_super6","race","_Component7","_super7","_Component8","_super8","value_code","renderValueOrCodeValue","String","valueInput","_Component9","_super9","_Component10","_super10","_Component11","_super11","_Component12","_super12","_Component13","_super13","_Component14","_super14","renderSince","renderWithin","_this4","since","_this5","within","_Component15","_super15","_Component16","_super16","_this6","conditions","cond","_Component17","_super17","_this7","_Component18","_super18","_this8","minimum","_Component19","_super19","_this9","maximum","_Component20","_super20","DirectTransitionEditor","to","DistributedTransition","currentValue","renderDistribution","index","sum","remainder","remainderOption","ConditionalTransition","indexTo","indexFrom","oldEntry","clone","newEntry","swapItems","isLast","renderIf","renderUpDown","ComplexTransition","d","transitionEditor","newDistributedTransition","nextTransition","newDirectTransition","DistributedTransitionEditor","renderTransition","_ref","columnHeaders","rows","columns","item","str","replace","width","ReactDataGrid","rowGetter","rowsCount","minHeight","TableTransition","lookupTableName","buttonText","displayTable","displayTableError","fixMissingValues","doesDataHaveInputError","parseTextArea","RIETextArea","msg","checkTable","displayTableView","Transition","DirectTransition","BasicTutorial","selector","EditTutorial","AutoCompleteText","_React$Component","call","onFocusGained","target","items","suggestions","match","indexOf","regex","RegExp","setState","onSubmitted","timer","setTimeout","onBlur","clearTimeout","keyPressed","event","handleChange","bind","_assertThisInitialized","suggestionSelected","onFocus","onKeyDown","renderSuggestions","React","StateEditor","_len","args","_key","updateRemarks","el","typeOptions","renameNode","changeType","renderStateType","addTransition","otherStates","helpFunction","Distribution","Gaussian","Uniform","Exponential","mean","standardDeviation","otherToggles","RIEToggle","form","legacyGMF","renderLegacyExactOrRange","renderExactOrRange","range","toggleLabel","displayLabel","handleTextChange","handleSubmit","lastSubmitted","fixTextBox","displayAttribute","valueForm","renderLegacyValueOrRange","renderValueContainer","AttributeData","others","moduleName","read","write","displayAttributes","Attributes","_this10","save","_this11","href","window","hash","_this12","changeEncounterClass","wellness","renderWellness","renderReason","renderTelemedicinePossibility","_this13","_this14","allOptions","classNameName","renderDischargeDisposition","_this15","discharge_disposition","_this16","renderTargetEncounter","renderAssignToAttribute","_this17","initial_value","targetEncounter","_this18","_this19","referenced_by_attribute","renderConditionOnset","renderReferencedByAttribute","renderCodes","_this20","_this21","_this22","_this23","_this24","unshift","renderReactions","_this25","r","_this26","_this27","renderAllergyOnset","_this28","_this29","_this30","_Component21","_super21","_this31","toggleLabelReason","displayLabelReason","handleTextChangeReason","handleSubmitReason","valueReason","lastSubmittedReason","renderPrescription","renderChronicMed","renderCreateAdministration","_this32","checked","chronic","_this33","administration","_this34","_this35","_this36","prescription","renderRefills","renderAsNeeded","renderDosage","renderDuration","renderInstructions","_this37","refills","_this38","as_needed","_this39","instructions","_Component22","_super22","_this40","renderMedicationOrder","_this41","_this42","_this43","_Component23","_super23","_this44","renderActivities","renderGoals","_this45","_this46","_this47","activities","_this48","_Component24","_super24","_this49","renderCarePlan","_this50","_this51","_this52","_Component25","_super25","_this53","durationEditor","renderLegacyDuration","_this54","_this55","_this56","_this57","_Component26","_super26","_Component27","_super27","distroForm","_this58","_Component28","_super28","_this59","renderToggles","attachment","sampled_data","_this60","_len2","propsToClear","_key2","currentItem","_this61","console","log","toggles","clearProps","_Component29","_super29","_this62","observationCount","_Component30","_super30","_this63","_Component31","_super31","_Component32","_super32","renderProbability","renderCause","classInvalid","_this64","_Component33","_super33","_this65","supplyCount","supply","renderSupply","_Component34","_super34","_this66","renderManufacturer","renderModel","_this67","manufacturer","_this68","model","_this69","_Component35","_super35","_this70","renderDevice","_this71","device","_this72","_this73","_Component36","_super36","_this74","_this75","_this76","_this77","_this78","ModulePropertiesEditor","onRemarksChange","newval","generateDOT","relatedStates","findTransitions","assign","nodesAsDOT","transitionsAsDOT","node","escapeId","shape","style","fillcolor","fontcolor","details","stateDescription","escapeLabel","params","escapeName","escapedName","out_transitions","transitionClassName","distLabel","pct","cnd","logicDetails","nodeHighlighted","trans","distributionString","distro","p","primarySeries","primaryModality","primaryBodySite","vs","unitv","diagType","diagValue","diagUnits","supplyQuantity","supplyCode","system_val","escapeVerticalBar","code_val","display_val","valuSet_val","verb","activity","logic","obs","findReferencedType","leaveUndefinedBlank","threshold","subsOr","prior_description","plan","med","alg","obj","ret","inputStr","ModuleGraph","onPanZoom","onMouseUp","onMouseDown","bold","lastDOT","writeSVG","mount","addEventListener","nextProps","panZoomSettings","fullscreen","svgPanZoom","panBy","customPanBy","blockPanZoomEvent","zoom","pan","animationStep","intervalID","stepX","animationTime","stepY","setInterval","clearInterval","ref","height","xmlns","opacity","patternUnits","fill","stroke","strokeWidth","fireClickOnMouseUp","getPan","getZoom","setAttribute","linesShouldBold","Math","originalWidth","originalHeight","dot","innerHTML","Viz","svgDefs","ex","alert","svg","document","getElementById","stopPropagation","removeAttribute","unnecessaryGTitle","querySelector","remove","unnecessaryFill","querySelectorAll","group","originator","hitLine","cloneNode","transitionIndexClass","baseVal","find","startsWith","parseInt","appendChild","getAttribute","Number","offsetLeft","getBoundingClientRect","offsetTop","visibleWidth","visibleHeight","zoomFactor","controlIconsEnabled","minZoom","onPan","onZoom","panZoomControlsElement","zoomIn","zoomOut","pow","baseStyle","flex","flexDirection","alignItems","padding","borderWidth","borderRadius","marginBottom","borderColor","borderStyle","backgroundColor","outline","activeStyle","color","acceptStyle","cursor","rejectStyle","StyledDropzone","_useDropzone","useDropzone","accept","onDrop","getRootProps","getInputProps","isDragActive","isDragAccept","isDragReject","useMemo","LOCAL_STORAGE_KEY","getLocalStorageModules","existingModules","localStorage","getItem","JSON","LoadModule","loadModule","json","Error","tableMessage","lttWrapper","substr","selectedOption","files","file","reader","FileReader","onload","result","readAsText","onLoadJSON","onOptionClick","updateJson","renderFooter","loadButton","closeButton","welcome","onHide","renderDetails","n","colsize","Modules","Submodules","Branches","localStorageModules","moduleEntry","stringify","timestamp","setItem","removeLocalStorageModule","updateLocalStorageModules","renderWelcomeMessage","ID","list","fetch","then","response","branch","changeColor","fetchModuleList","catch","error","currentBranch","mapFolderContentsToList","aIsFile","endsWith","localeCompare","isFile","displayName","fetchFile","fetchFolder","prevProps","prevState","fetchBranchList","classDetails","visible","marginLeft","marginRight","marginTop","Download","saveToLocalStorage","shouldSave","localStorageModule","confirm","newModuleObject","toLocaleString","saveLocalStorageModule","saveSuccess","onDownload","blob","Blob","refs","codeInput","downloadCsvs","filename","FileSaver","saveAs","downloadCsv","encodeURIComponent","element","createElement","body","click","removeChild","role","disabled","prepareJSON","NavTabs","onChangeModule","onClose","onCloseModule","m","src","alt","extractStates","extractDirectTransition","extractDistributedTransition","extractConditionalTransition","extractComplexTransition","extractTableTransition","extractTransition","uuid","create","extractState","findAvailableKey","root","keys_index","next","matches","exec","createSafeKeyFromName","JsonEditor","Editor","mode","ace","StateList","search","placeholder","CancelButton","clearSearch","scope","stateFilter","AttributeList","onSelect","option","loadSelectedModule","attributeFilter","dropDown","Dropdown","WarningList","warning","RelatedList","analyze","dispatchThenAnalyze","dispatch","getState","addGMFVersion","refreshCode","selectNode","addNode","addStructure","editNode","copyNode","jsonEdit","closeModule","editModuleName","editModuleRemarks","changeStateType","undo","redo","showLoadModule","hideLoadModule","showDownload","hideDownload","changeModulePanel","openModule","loadLibrary","charAt","pasteNode","takenKeys","startTutorial","steps","joyride","reset","run","renderAddStateButton","renderUndoButton","undoEnabled","renderRedoButton","redoEnabled","renderDownloadButton","renderDeleteButton","renderCopyButton","renderPasteButton","renderStateEditor","moduleStates","leftNavClick","renderDownload","renderLoadModule","renderModulePropertiesEditor","renderModuleGraph","onPanelResize","panelWidth","deltaX","onPanelResizeDone","renderPanelContent","renderStateButton","dataTip","renderStateListButton","stateCount","renderAttributesButton","attributesCount","renderWarningButton","warningCount","renderRelatedModulesButton","relatedCount","nav","renderNav","SyntheaLogo","renderMainEditor","left","Draggable","axis","onDrag","onStop","bounds","top","right","Infinity","bottom","originalPanelWidth","LoadingLogo","stepIndex","examplitis","ReactTooltip","rebuild","effect","delayShow","Joyride","showOverlay","showSkipButton","showStepsProgress","autoStart","debug","allowClicksThruHole","keyboardNavigation","connect","bindActionCreators","dispatchLocationChange","listen","App","Provider","ConnectedRouter","Switch","Route","component","Boolean","hostname","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4a58dbe9.chunk.js","sourcesContent":["const initialState = {modules: {}, analysis: {}};\n\nexport default (state = initialState, action) => {\n  let newState = null;\n  switch (action.type) {\n    case 'LOAD_LIBRARY':\n      newState = {...state, modules: {...action.data}, location: action.location}\n      return newState\n\n    default:\n      return state;\n  }\n}\n","import _ from 'lodash';\n\n// do not allow direct access because it is easy to forget to clone these templates\nexport function getTemplate(path){\n\n  const parsedPath = path.split('.')\n  const template = parsedPath.shift();\n  const reducedPath = parsedPath.join('.')\n\n  let typeVar = null;\n  switch(template){\n    case 'Type':\n      typeVar = TypeTemplates;\n      break;\n\n    case 'Attribute':\n      typeVar = AttributeTemplates;\n      break;\n\n    case 'Transition':\n      typeVar = TransitionTemplates;\n      break;\n\n    case 'State':\n      typeVar = StateTemplates;\n      break;\n\n    case 'Contained':\n      typeVar = ContainedTemplates;\n      break;\n\n    case 'Structure':\n      typeVar = StructureTemplates;\n      break;\n\n    case 'Module':\n      typeVar = ModuleTemplates;\n      break;\n    default:\n      break;\n  }\n\n\n  if(reducedPath.length === 0){\n    return typeVar\n  }\n\n  return _.cloneDeep(_.get(typeVar, reducedPath));\n}\n\nconst TypeTemplates = {\n  Date: {\n    Year: 2000,\n    Month: 12,\n    Day: 25,\n    Hour: 0,\n    Minute: 0,\n    Second: 0,\n    Millisecond: 0\n  },\n  Code: {\n    Snomed: {\n      system: \"SNOMED-CT\",\n      code: \"1234\",\n      display: \"SNOMED Code\"\n    },\n    Loinc: {\n      system: \"LOINC\",\n      code: \"1234\",\n      display: \"LOINC Code\"\n    },\n    RxNorm: {\n      system: \"RxNorm\",\n      code: \"1234\",\n      display: \"RxNorm Code\"\n    },\n    Nubc: {\n      system: \"NUBC\",\n      code: \"1234\",\n      display: \"NUBC Code\"\n    },\n    DicomDCM: {\n      system: \"DICOM-DCM\",\n      code: \"XX\",\n      display: \"DICOM Modality Code\"\n    },\n    DicomSOP: {\n      system: \"DICOM-SOP\",\n      code: \"1.2.3.4.5.6.7.8\",\n      display: \"DICOM Subject-Object Pair Code\"\n    },\n    Cvx: {\n      system: \"CVX\",\n      code: \"123\",\n      display: \"CVX Vaccine Code\"\n    }\n  },\n\n  Condition: {\n    Gender: {\n      condition_type: 'Gender',\n      gender: 'F'\n    },\n    Age: {\n      condition_type: 'Age',\n      operator: \">\",\n      quantity: 0,\n      unit: \"years\"\n    },\n    Date: {\n      condition_type: 'Date',\n      operator: \">\",\n      year: 2000,\n    },\n    \"Active Condition\": {\n      condition_type: 'Active Condition',\n      codes: [{\n        system: \"SNOMED-CT\",\n        code: \"1234\",\n        display: \"SNOMED Code\"\n      }],\n    },\n    \"Socioeconomic Status\": {\n        \"condition_type\": \"Socioeconomic Status\",\n        \"category\": \"Middle\"\n    },\n    Race: {\n      \"condition_type\": \"Race\",\n      \"race\": \"Hispanic\"\n    },\n    Symptom: {\n      \"condition_type\": \"Symptom\",\n      \"symptom\" : \"Chest Pain\",\n      \"operator\": \">=\",\n      \"value\": 50\n    },\n    Observation: {\n      \"condition_type\": \"Observation\",\n      \"codes\": [\n        {\n          \"system\": \"LOINC\",\n          \"code\": \"72107-6\",\n          \"display\": \"Mini Mental State Examination\"\n        }\n      ],\n      \"operator\": \"==\",\n      \"value\": 0\n    },\n    \"Vital Sign\": {\n        \"condition_type\" : \"Vital Sign\",\n        \"vital_sign\" : \"Systolic Blood Pressure\",\n        \"operator\" : \">\",\n        \"value\" : 120\n    },\n    \"Active Allergy\": {\n      \"condition_type\": \"Active Allergy\",\n      \"codes\": [\n        {\n          \"system\": \"RxNorm\",\n          \"code\": \"7984\",\n          \"display\": \"Penicillin V\"\n        }\n      ]\n    },\n    \"Active Medication\": {\n      \"condition_type\": \"Active Medication\",\n      \"codes\": [\n        {\n          \"system\": \"RxNorm\",\n          \"code\": \"849727\",\n          \"display\": \"Naproxen sodium 220 MG [Aleve]\"\n        }\n      ]\n    },\n    \"Active CarePlan\": {\n      \"condition_type\": \"Active CarePlan\",\n      \"codes\": [\n        {\n          \"system\": \"SNOMED-CT\",\n          \"code\": \"698360004\",\n          \"display\": \"Diabetes self management plan\"\n        }\n      ]\n    },\n    PriorState: {\n      \"condition_type\": \"PriorState\",\n      \"name\": \"\"\n    },\n    Attribute: {\n      \"condition_type\": \"Attribute\",\n      \"attribute\": \"opiod_prescription\",\n      \"operator\": \"==\",\n      \"value\": \"Vicodin\"\n    },\n    And: {\n      \"condition_type\": \"And\",\n      \"conditions\": [\n        {\n          \"condition_type\": \"Gender\",\n          \"gender\": \"M\"\n        },\n        {\n          \"condition_type\": \"Age\",\n          \"operator\": \">=\",\n          \"quantity\": 40,\n          \"unit\": \"years\"\n        }\n      ]\n    },\n    Or: {\n      \"condition_type\": \"Or\",\n      \"conditions\": [\n        {\n          \"condition_type\": \"Gender\",\n          \"gender\": \"M\"\n        },\n        {\n          \"condition_type\": \"Age\",\n          \"operator\": \">=\",\n          \"quantity\": 40,\n          \"unit\": \"years\"\n        }\n      ]\n    },\n    \"At Least\" : {\n      \"condition_type\": \"At Least\",\n      \"minimum\": 2,\n      \"conditions\": [\n        {\n          \"condition_type\": \"Gender\",\n          \"gender\": \"M\"\n        },\n        {\n          \"condition_type\": \"Age\",\n          \"operator\": \">=\",\n          \"quantity\": 40,\n          \"unit\": \"years\"\n        },\n        {\n          \"condition_type\" : \"Active CarePlan\",\n          \"codes\": [\n            {\n              \"system\": \"SNOMED-CT\",\n              \"code\": \"698360004\",\n              \"display\": \"Diabetes self management plan\"\n            }\n          ]\n        }\n      ]\n    },\n    \"At Most\": {\n      \"condition_type\": \"At Most\",\n      \"maximum\" : 2,\n      \"conditions\": [\n        {\n          \"condition_type\": \"Gender\",\n          \"gender\": \"M\"\n        },\n        {\n          \"condition_type\": \"Age\",\n          \"operator\": \">=\",\n          \"quantity\": 40,\n          \"unit\": \"years\"\n        },\n        {\n          \"condition_type\": \"Active CarePlan\",\n          \"codes\": [\n            {\n              \"system\": \"SNOMED-CT\",\n              \"code\": \"698360004\",\n              \"display\": \"Diabetes self management plan\"\n            }\n          ]\n        }\n      ]\n    },\n    Not: {\n      \"condition_type\": \"Not\",\n      \"condition\": {\n        \"condition_type\": \"Gender\",\n        \"gender\": \"M\"\n      }\n    },\n    \"True\": {\n      condition_type: \"True\"\n    },\n    \"False\": {\n      condition_type: \"False\"\n    }\n  }\n}\n\nconst AttributeTemplates = {\n  Exact: {\n    quantity: 1\n  },\n  ExactWithUnit: {\n    quantity: 1,\n    unit: \"days\"\n  },\n  Range: {\n    low: 1,\n    high: 2,\n  },\n  RangeWithUnit: {\n    low: 1,\n    high: 2,\n    unit: \"days\"\n  },\n  Prescription: {\n    dosage: {\n      amount: 1,\n      frequency: 1,\n      period: 1,\n      unit: \"days\"\n    },\n    duration: {\n      quantity: 1,\n      unit: \"days\"\n    }\n  },\n  Goal: {\n    addresses: [\"text\"]\n  },\n  Observation: {\n    codes: [{...TypeTemplates.Code.Loinc}],\n    operator: \"==\",\n    value: 1\n  },\n  Since: \" \",\n  Within: {\n    quantity: 1,\n    unit: \"days\"\n  },\n  UnnamedDistribution: 1.0,\n  NamedDistribution: {\n    attribute: \"attribute\",\n    default: 1.0\n  },\n  Supply: {\n    quantity: 1,\n    code: {...TypeTemplates.Code.Snomed}\n  },\n\n  ImagingStudy: {\n    Instance: {\n      title: \"Title of this image\",\n      sop_class: {...TypeTemplates.Code.DicomSOP}\n    },\n    Series: {\n      body_site: {...TypeTemplates.Code.Snomed},\n      modality: {...TypeTemplates.Code.DicomDCM},\n      instances: [{\n        title: \"Title of this image\",\n        sop_class: {...TypeTemplates.Code.DicomSOP}\n      }]\n    }\n  }\n}\n\n\nconst TransitionTemplates = {\n  Direct: 'Initial',\n  Conditional: [{transition: 'Initial', condition: {...TypeTemplates.Condition.Age}}],\n  Distributed: [{transition: 'Initial', distribution: 1.0}],\n  Complex: [{condition: {...TypeTemplates.Condition.Age}, distributions: [{transition: 'Initial', distribution: 1.0}]}],\n  Table: {\n    type: 'Table',\n    lookuptable: 'age,Initial,Terminal\\n0-50,.1,.9\\n51-140,.4,.6',\n    viewTable: true,\n    lookup_table_name_ModuleBuilder: 'file.csv',\n    transitions:[{transition: 'Initial', default_probability: 1.0, lookup_table_name: 'table.csv'}]\n  }\n}\n\nconst StateTemplates = {\n  Initial: {\n    type: \"Initial\",\n  },\n\n  Terminal: {\n    type: \"Terminal\",\n  },\n\n  Simple: {\n    type: \"Simple\",\n  },\n\n  Guard: {\n    type: \"Guard\",\n    allow: {...TypeTemplates.Condition.Age}\n  },\n\n  Delay: {\n    type: \"Delay\",\n    distribution: {\"kind\": \"EXACT\",\n                   \"parameters\": {\n                     \"value\": 1\n                   }\n    },\n    \"unit\": \"years\"\n  },\n\n  SetAttribute: {\n    type: \"SetAttribute\",\n    attribute: \"\"\n  },\n\n  Counter: {\n    type: \"Counter\",\n    attribute: \"\",\n    action: \"increment\"\n  },\n\n  CallSubmodule: {\n    type: \"CallSubmodule\",\n    submodule: \"\"\n  },\n\n  Encounter: {\n    type: \"Encounter\",\n    encounter_class: \"ambulatory\",\n    reason: \"\",\n    telemedicine_possibility: \"none\",\n    codes: [{...TypeTemplates.Code.Snomed}]\n  },\n\n  EncounterEnd: {\n    type: \"EncounterEnd\"\n  },\n\n  ConditionOnset: {\n    type: \"ConditionOnset\",\n    codes: [{...TypeTemplates.Code.Snomed}]\n  },\n\n  ConditionEnd: {\n    type: \"ConditionEnd\"\n  },\n\n  AllergyOnset: {\n    allergy_type: \"allergy\",\n    category: \"food\",\n    type: \"AllergyOnset\",\n    codes: [{...TypeTemplates.Code.Snomed}],\n    reactions: []\n  },\n\n  AllergyEnd: {\n    type: \"AllergyEnd\"\n  },\n\n  MedicationOrder: {\n    type: \"MedicationOrder\",\n    codes: [{...TypeTemplates.Code.RxNorm}]\n  },\n\n  MedicationEnd: {\n    type: \"MedicationEnd\"\n  },\n\n  CarePlanStart: {\n    type: \"CarePlanStart\",\n    codes: [{...TypeTemplates.Code.Snomed}]\n  },\n\n  CarePlanEnd: {\n    type: \"CarePlanEnd\"\n  },\n\n  Procedure: {\n    type: \"Procedure\",\n    codes: [{...TypeTemplates.Code.Snomed}],\n    distribution: {\n      \"kind\": \"UNIFORM\",\n      \"parameters\": {\n        \"high\": 60,\n        \"low\": 30\n      }\n    },\n    \"unit\": \"minutes\"\n  },\n\n  Vaccine: {\n    type: \"Vaccine\",\n    series: 1,\n    codes: [{...TypeTemplates.Code.Cvx}]\n  },\n\n  VitalSign: {\n    type: \"VitalSign\",\n    vital_sign: \"\",\n    unit: \"\",\n    distribution: {kind: \"EXACT\", parameters: {value: 1}}\n  },\n\n  Observation: {\n    type: \"Observation\",\n    category: \"vital-signs\",\n    unit: \"\",\n    codes: [{...TypeTemplates.Code.Loinc}],\n    distribution: {kind: \"EXACT\", round: false, parameters: {value: 1}}\n  },\n\n  MultiObservation: {\n    type: \"MultiObservation\",\n    category: \"vital-signs\",\n    number_of_observations: 0,\n    codes: [{...TypeTemplates.Code.Loinc}]\n  },\n\n  DiagnosticReport: {\n    type: \"DiagnosticReport\",\n    codes: [{...TypeTemplates.Code.Loinc}],\n    observations: []\n  },\n\n  ImagingStudy: {\n    type: \"ImagingStudy\",\n    procedure_code: {...TypeTemplates.Code.Snomed},\n    series: [{...AttributeTemplates.ImagingStudy.Series}]\n  },\n\n  Symptom: {\n    type: \"Symptom\",\n    symptom: \"\",\n    cause: \"\",\n    probability: 1.0,\n    distribution: {kind: \"EXACT\", parameters: {value: 1}}\n  },\n\n  Device: {\n    type: \"Device\",\n    code: {...TypeTemplates.Code.Snomed}\n  },\n\n  DeviceEnd: {\n    type: \"DeviceEnd\"\n  },\n\n  SupplyList: {\n    type: \"SupplyList\",\n    supplies: [{...AttributeTemplates.Supply}]\n  },\n\n  Death: {\n    type: \"Death\",\n    exact: {...AttributeTemplates.ExactWithUnit}\n  }\n}\n\nconst ContainedTemplates = {\n  Observation: {\n    category: \"laboratory\",\n    unit: \"\",\n    codes: [{...TypeTemplates.Code.Loinc}],\n    exact: {...AttributeTemplates.Exact}\n  }\n}\n\nconst StructureTemplates = {\n  CheckYearly: {\n    CheckYearly: {...StateTemplates.Delay, exact: {...TypeTemplates.exact, quantity: 1, unit: 'years'},\n      conditional_transition: [{transition: 'HasCondition', condition: {...TypeTemplates.Condition.ActiveCondition}},{transition: 'CheckYearly'}]},\n    HasCondition: {...StateTemplates.Simple, direct_transition: 'Terminal'}\n  },\n\n  ConditionIncidence: {\n    RiskPerMonth: {...StateTemplates.Delay, exact: {...TypeTemplates.exact, quantity: 1, unit: 'months'},\n      distributed_transition: [{distribution: 0.99, transition: 'RiskPerMonth'},{distribution: 0.01, transition: 'AcquireCondition'}]},\n    AcquireCondition: {...StateTemplates.ConditionOnset, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Terminal'}\n  },\n\n  GenderDifference: {\n    GenderDifference: {...StateTemplates.Simple,\n          conditional_transition: [\n            {condition: {...TypeTemplates.Condition.Gender, gender: 'M'}, transition: 'Male'},\n            {condition: {...TypeTemplates.Condition.Gender, gender: 'F'}, transition: 'Female'}]},\n    Male: {...StateTemplates.Simple, direct_transition: 'Common'},\n    Female: {...StateTemplates.Simple, direct_transition: 'Common'},\n    Common: {...StateTemplates.Simple, direct_transition: 'Terminal'}\n  },\n\n  ConditionVariation: {\n    VariantDistribution: {...StateTemplates.Simple,\n      distributed_transition:[{distribution: 0.25, transition: 'Condition1'},{distribution: 0.35, transition: 'Condition2'},{distribution: 0.40, transition: 'Condition3'}]},\n    Condition1: {...StateTemplates.ConditionOnset, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\n    Condition2: {...StateTemplates.ConditionOnset, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\n    Condition3: {...StateTemplates.ConditionOnset, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\n  },\n\n  MedicationVariation: {\n    VariantDistribution: {...StateTemplates.Simple,\n      distributed_transition:[{distribution: 0.25, transition: 'Medication1'},{distribution: 0.35, transition: 'Medication2'},{distribution: 0.40, transition: 'Medication3'}]},\n    Medication1: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\n    Medication2: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\n    Medication3: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\n  },\n\n  ChildrensDose: {\n    DosageDecision: {...StateTemplates.Simple,\n          conditional_transition: [\n            {condition: {...TypeTemplates.Condition.Age, operator: '>=', quantity: 18, unit: 'years'}, transition: 'AdultDose'},\n            {transition: 'ChildrensDose'}]},\n    AdultDose: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\n    ChildrensDose: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\n  },\n\n  MedicationsByYear: {\n    VariantsByYear: {...StateTemplates.Simple,\n          conditional_transition: [\n            {condition: {...TypeTemplates.Condition.Date, operator: '>=', year: 2007}, transition: 'Medication1'},\n            {condition: {...TypeTemplates.Condition.Date, operator: '>=', year: 1992}, transition: 'Medication2'},\n            {condition: {...TypeTemplates.Condition.Date, operator: '>=', year: 1978}, transition: 'Medication3'},\n            {transition: 'Medication4'}]},\n    Medication1: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\n    Medication2: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\n    Medication3: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\n    Medication4: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\n  },\n\n  ProcedureVariation: {\n    BeginEncounter: {...StateTemplates.Encounter, codes:[{system: 'SNOMED-CT', code: '', display: ''}],\n      distributed_transition:[{distribution: 0.25, transition:'Procedure1'},{distribution: 0.35, transition:'Procedure2'},{distribution: 0.40, transition:'Procedure3'}]},\n    Procedure1: {...StateTemplates.Procedure, codes:[{system: 'LOINC', code: '', display: ''}], direct_transition: 'Observation1'},\n    Observation1: {...StateTemplates.Observation, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\n    Procedure2: {...StateTemplates.Procedure, codes:[{system: 'LOINC', code: '', display: ''}], direct_transition: 'Observation2'},\n    Observation2: {...StateTemplates.Observation, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\n    Procedure3: {...StateTemplates.Procedure, codes:[{system: 'LOINC', code: '', display: ''}], direct_transition: 'Observation3'},\n    Observation3: {...StateTemplates.Observation, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\n  }\n}\n\nconst ModuleTemplates = {\n  Blank: {\n    name: \"Untitled\",\n    remarks: [\"A blank module\"],\n    states: {\n      Initial: {...StateTemplates.Initial, direct_transition: 'Terminal'},\n      Terminal: {...StateTemplates.Terminal}\n    }\n  },\n\n  Yearly: {\n    name: \"Yearly Check for Condition\",\n    remarks: [\"Check yearly for patient to have a condition\"],\n    states: {\n      ...StructureTemplates.CheckYearly,\n      Initial: {...StateTemplates.Initial, direct_transition: 'CheckYearly'},\n      Terminal: {...StateTemplates.Terminal}\n    }\n  },\n\n  DeadAt40: {\n    name: \"Dead At 40\",\n    remarks: [\"This module is an example of writing a template\"],\n    states: {\n      Initial: {...StateTemplates.Initial, direct_transition: 'DelayUntil40'},\n      DelayUntil40: {...StateTemplates.Delay, exact: {...TypeTemplates.exact, quantity: 40, unit: 'years'}, direct_transition: 'Death'},\n      Death: {...StateTemplates.Death, direct_transition: 'Terminal'},\n      Terminal: {...StateTemplates.Terminal}\n    }\n  }\n}\n","// Converts strings that contain numbers or booleans into their corresponding type\n// because that is what GMF expects\n\nexport function normalizeType(value){\n  if(typeof value !== 'string'){\n    return value;\n  }\n  value = value.trim();\n  if(/^-?\\d*[\\.]?\\d+$/.test(value) && (parseFloat(value) || parseFloat(value) === 0)){\n    value = parseFloat(value);\n  }\n  if(/^(true|false)$/i.test(value)){\n    value = value.toLowerCase() === 'true';\n  }\n  return value\n}\n\nexport function cleanString(value, mapObj){\n  return Object.keys(mapObj).reduce( (acc, cur) => acc.split(cur).join(mapObj[cur]), value)\n}\n","import _ from 'lodash'\nimport { getTemplate } from '../templates/Templates'\nimport Papa from 'papaparse'\nimport { isNumber } from 'util';\nimport { stat } from 'fs';\n\nconst initialState = {\n  libraryModuleCodes: {}, // list types of nodes\n  warnings: [],\n  libraryRelatedModules: {},\n  relatedModules: [],\n  attributes: []\n};\n\nexport const CURRENT_GMF_VERSION = 2.0;\n\nconst attributes = module => {\n  const attributes = [];\n  Object.keys(module.states).forEach(stateName => {\n    let state = module.states[stateName];\n\n     if(state.type === 'SetAttribute'){\n       attributes.push({attribute: state.attribute, stateName: state.name, stateType: state.type});\n     } else if(state.assign_to_attribute){\n       attributes.push({attribute: state.assign_to_attribute, stateName: state.name, stateType: state.type});\n     }\n  });\n\n  return attributes.sort(function(a, b){\n    var x = a.attribute.toLowerCase();\n    var y = b.attribute.toLowerCase();\n    if (x < y) {return -1;}\n    if (x > y) {return 1;}\n    return 0;\n  })\n}\n\nconst templateCodes = {};\nObject.keys(getTemplate('Type').Code).map(c => getTemplate('Type').Code[c]).forEach(code => {\n  templateCodes[`${code.code}-${code.system}-${code.display}`] = true;\n});\n\nconst placeholderCodeWarnings = (module) => {\n  const warnings = [];\n  Object.keys(module.states).forEach(stateName => {\n    let state = module.states[stateName];\n    state.codes && state.codes.forEach(code => {\n      if(templateCodes[`${code.code}-${code.system}-${code.display}`]){\n        warnings.push({stateName: stateName, message: 'Code uses an invalid template code: ' + code.system + '[' + code.code + ']'});\n      }\n    });\n\n    switch(state.type){\n      case 'MultiObservation':\n      case 'DiagnosticReport':\n        if(state.observations){\n          state.observations.forEach(o => {\n          o.codes && o.codes.forEach(code => {\n            if(templateCodes[`${code.code}-${code.system}-${code.display}`]){\n              warnings.push({stateName: stateName, message: 'Code in observation uses an invalid template code: ' + code.system + '[' + code.code + ']'});\n            }\n          })\n        })}\n\n        break;\n      case 'ImagingStudy':\n        if(state.procedure_code){\n            if(templateCodes[`${state.procedure_code.code}-${state.procedure_code.system}-${state.procedure_code.display}`]){\n              warnings.push({stateName: stateName, message: 'Code in procedure code uses an invalid template code: ' + state.procedure_code.system + '[' + state.procedure_code.code + ']'});\n            }\n        }\n        if(state.series ){\n          state.series.forEach(series => {\n            if(series.body_site){\n              if(templateCodes[`${series.body_site.code}-${series.body_site.system}-${series.body_site.display}`]){\n                warnings.push({stateName: stateName, message: 'Code in imaging series uses an invalid template code: ' + series.body_site.system + '[' + series.body_site.code + ']'});\n              }\n            }\n            if(series.modality){\n              if(templateCodes[`${series.modality.code}-${series.modality.system}-${series.modality.display}`]){\n                warnings.push({stateName: stateName, message: 'Code in imaging series uses an invalid template code: ' + series.modality.system + '[' + series.modality.code + ']'});\n              }\n            }\n            if(series.instances){\n              series.instances.forEach(instance => {\n                if(instance.sop_class){\n                  if(templateCodes[`${instance.sop_class.code}-${instance.sop_class.system}-${instance.sop_class.display}`]){\n                    warnings.push({stateName: stateName, message: 'Code in imaging series uses an invalid template code: ' + instance.sop_class.system + '[' + instance.sop_class.code + ']'});\n                  }\n                }\n              })\n            }\n\n          })\n\n        }\n        break;\n      default:\n        break;\n\n\n    }\n  })\n  return warnings;\n\n}\n\nconst tableTransitionWarnings = (module) => {\n\n  const warnings = [];\n\n  Object.keys(module.states).forEach(stateName => {\n    let state = module.states[stateName];\n\n    // find table transitions and check table data\n    if (state.lookup_table_transition !== undefined){\n      let message = '';\n      if(state.lookup_table_transition.lookup_table_name_ModuleBuilder === \"\"){\n        message = 'Invalid filename ';\n      }\n      if (state.lookup_table_transition.lookuptable === \"Enter table\" || tableHasError(state.lookup_table_transition.lookuptable) ) {\n        if (message === ''){\n          message = 'Invalid data ';\n        } else {\n          message += 'and invalid data '\n        }\n      }\n      // check the last X columns vs X transitions\n      if (!tableHasError(state.lookup_table_transition.lookuptable)){\n        let tableColumns = [];\n        let data = parseLookupTable(state.lookup_table_transition.lookuptable);\n        if (data.length > 0){\n          tableColumns = Object.keys(data[0]);\n        }\n\n        for (let i = 0; i < state.lookup_table_transition.transitions.length; i++)\n        {\n          let transition = state.lookup_table_transition.transitions[state.lookup_table_transition.transitions.length - i - 1].transition;\n          let column = tableColumns[tableColumns.length-i -1];\n          if (transition != column)\n          {\n            if (message === '')\n            {\n              message += 'Invalid columns (table data and transitions to state don\\'t match) '\n            } else {\n              message += ' and invalid columns (table data and transitions to states don\\'t match) '\n            }\n            break;\n          }\n        }\n      }\n\n      if (message !== ''){\n        message += 'for table in ';\n        warnings.push({stateName, message: message + stateName + '. '});\n      }\n    }\n  });\n\n  return warnings;\n}\n\nconst parseLookupTable = (data) => {\n  let parsed;\n  if (isNumber(data))\n  {\n    data  = data.toString();\n  }\n  Papa.parse(data, {\n  header: true,\n  complete: function(results) {\n    parsed=results;\n  }\n  });\n\n  return parsed.data;\n}\n\nconst tableHasError = (lookuptable) =>{\n  let data = parseLookupTable(lookuptable);\n  let textOk = !(lookuptable == 'Enter table' || lookuptable == '')\n  let parseOk = (data.length > 0 && Object.keys(data[0]).length > 0)\n if (textOk && parseOk ){\n    return false;\n  } else {\n    return true;\n  }\n}\n\nconst gmfVersionWarnings = (module) => {\n  if(module.gmf_version === undefined || module.gmf_version < CURRENT_GMF_VERSION) {\n    return [{stateName: 'None', message: 'Module is using an older or undeclared version of GMF'}];\n  } else {\n    return [];\n  }\n}\n\nconst telemedicineWarnings = (module) => {\n  const warnings = [];\n\n  Object.keys(module.states).forEach(stateName => {\n    let state = module.states[stateName];\n    if (state.type == 'Encounter') {\n      if ((state.telemedicine_possibility == 'possible' || state.telemedicine_possibility == 'always') &&\n         (! ['virtual', 'ambulatory'].includes(state.encounter_class))) {\n        warnings.push({stateName, message: 'Encounter class implies in-person services required, but telemedicine possibility is not \"none\"'});\n      }\n      if (state.encounter_class == 'virtual' && state.telemedicine_possibility != 'always') {\n        warnings.push({stateName, message: 'Encounter class is for telehealth, but telemedicine possibility is not \"always\"'});\n      }\n    }\n  });\n\n  return warnings;\n}\n\nconst stateCollisionWarnings = (module, globalCodes) => {\n  const equivalentStates = [\n   ['MedicationOrder', 'MedicationEnd'],\n   ['ConditionOnset', 'ConditionEnd'],\n   ['CarePlanStart', 'CarePlanEnd'],\n   ['AllergyOnset', 'AllergyEnd'],\n  ];\n\n  const isEquivalentStates = (first, second) => {\n    return (first === second || equivalentStates.filter(e => (e[0] === first && e[1] === second) || (e[0] === second && e[1] === first)).length > 0)\n  }\n\n  const checkCollision = libraryState =>  (local => !isEquivalentStates(local.state.type, libraryState.type) && local.state.type !== 'Death' && libraryState.type !== 'Death');\n\n  const warnings = [];\n  Object.keys(module.states).forEach(stateName => {\n    let state = module.states[stateName];\n    state.codes && state.codes.forEach(code => {\n\n      if(globalCodes[code.code]){\n        let collisions = globalCodes[code.code].filter(checkCollision(state));\n        if(collisions.length > 0){\n          warnings.push({stateName, message: 'Code collision with state ' + collisions[0].stateName + ' in module ' + collisions[0].moduleKey + '. '});\n        }\n      }\n    });\n  });\n\n  return warnings;\n\n}\n\nconst orphanStateWarnings = (module) => {\n  const warnings = [];\n\n  const visitedStateCheck = Object.keys(module.states).reduce( (acc, value) => {acc[value] = false; return acc}, {})\n\n  const visitNext = [];\n\n  if(module.states['Initial']){\n    visitNext.push('Initial');\n  };\n\n  while(visitNext.length > 0){\n    let nextStateKey = visitNext.pop();\n    let nextState = module.states[nextStateKey];\n    visitedStateCheck[nextStateKey] = true;\n\n    if(nextState.direct_transition){\n      if(!module.states[nextState.direct_transition]){\n        warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + nextState.direct_transition});\n      } else {\n        if(!visitedStateCheck[nextState.direct_transition]){\n          visitNext.push(nextState.direct_transition);\n        }\n      }\n    } else if(nextState.distributed_transition){\n      nextState.distributed_transition.forEach(transition => {\n        if(!module.states[transition.transition]){\n          warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + transition.transition});\n        } else {\n          if(!visitedStateCheck[transition.transition]){\n            visitNext.push(transition.transition);\n          }\n        }\n      });\n    } else if(nextState.lookup_table_transition){\n      nextState.lookup_table_transition.transitions.forEach(transition => {\n        if(!module.states[transition.transition]){\n          warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + transition.transition});\n        } else {\n          if(!visitedStateCheck[transition.transition]){\n            visitNext.push(transition.transition);\n          }\n        }\n      });\n    }\n    else if(nextState.conditional_transition){\n      nextState.conditional_transition.forEach(transition => {\n        if(!module.states[transition.transition]){\n          warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + transition.transition});\n        } else {\n          if(!visitedStateCheck[transition.transition]){\n            visitNext.push(transition.transition);\n          }\n        }\n      });\n    } else if (nextState.complex_transition){\n      nextState.complex_transition.forEach( transition => {\n        if(transition.transition){\n          if(!module.states[transition.transition]){\n            warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + transition.transition});\n          } else {\n            if(!visitedStateCheck[transition.transition]){\n              visitNext.push(transition.transition);\n            }\n          }\n        }\n        if(transition.distributions){\n          transition.distributions.forEach( distribution => {\n            if(!module.states[distribution.transition]){\n              warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + distribution.transition});\n            } else {\n              if(!visitedStateCheck[distribution.transition]){\n                visitNext.push(distribution.transition);\n              }\n            }\n          })\n        }\n      })\n    }\n  }\n\n  let notVisitedWarnings = Object.keys(visitedStateCheck).map(s => {return {state: s, visited: visitedStateCheck[s]}}).filter(v => !v.visited).map(v => {\n    return {\n      stateName: v.state,\n      message: 'State cannot be reached.'\n    };\n  });\n\n  return [...warnings, ...notVisitedWarnings];\n\n}\n\nconst libraryModuleCodes = (modules) => {\n    const libraryModuleCodes = {};\n\n    Object.keys(modules).forEach(moduleKey => {\n      const module = modules[moduleKey];\n      Object.keys(module.states).forEach(stateName => {\n        const moduleState = module.states[stateName];\n        moduleState.codes && moduleState.codes.forEach(code => {\n          if(!libraryModuleCodes[code.code]){\n            libraryModuleCodes[code.code] = []\n          }\n          libraryModuleCodes[code.code].push({...code, moduleKey, stateName, state: moduleState});\n        });\n      });\n    });\n    return libraryModuleCodes;\n}\n\nconst libraryRelatedModules = (modules) => {\n  const libraryRelatedModules = {};\n\n  Object.keys(modules).forEach(moduleKey => {\n    const module = modules[moduleKey];\n    Object.keys(module.states).forEach(stateName => {\n      const moduleState = module.states[stateName];\n      if(moduleState.type === 'CallSubmodule'){\n        libraryRelatedModules[moduleKey] = libraryRelatedModules[stateName] || []\n        libraryRelatedModules[moduleKey].push({type: 'submodule', moduleKey: moduleState.submodule, stateName})\n\n        libraryRelatedModules[moduleState.submodule] = libraryRelatedModules[moduleState.submodule] || []\n        libraryRelatedModules[moduleState.submodule].push({type: 'submodule', moduleKey, stateName})\n      }\n    });\n  });\n  return libraryRelatedModules;\n\n}\n\nconst relatedBySubmodule = (moduleKey, module, relatedMap) => {\n  let related = [];\n\n  if(relatedMap[moduleKey]){\n    related = _.cloneDeep(relatedMap[moduleKey]);\n  }\n\n  Object.keys(module.states).forEach(stateName => {\n    const moduleState = module.states[stateName];\n     if(moduleState.type === 'CallSubmodule'){\n       related.push({type: 'submodule', module: moduleState.submodule, stateName});\n     }\n  });\n\n  return related;\n}\n\nexport default (state = initialState, action) => {\n  let newState = {...state};\n  switch (action.type) {\n    case 'ANALYZE':\n\n      newState.warnings = [...stateCollisionWarnings(action.data.module, newState.libraryModuleCodes),\n                           ...orphanStateWarnings(action.data.module),\n                           ...placeholderCodeWarnings(action.data.module),\n                           ...tableTransitionWarnings(action.data.module),\n                           ...gmfVersionWarnings(action.data.module),\n                           ...telemedicineWarnings(action.data.module)\n                          ];\n\n      newState.relatedModules = [...relatedBySubmodule(action.data.moduleKey, action.data.module, newState.libraryRelatedModules)];\n\n      newState.attributes = attributes(action.data.module);\n\n      return newState;\n\n    case 'LOAD_LIBRARY':\n\n      newState.libraryModuleCodes = libraryModuleCodes(action.data);\n      newState.libraryRelatedModules = libraryRelatedModules(action.data);\n\n      return newState\n\n    default:\n      return state;\n  }\n}\n","import _ from 'lodash';\nimport { getTemplate } from '../templates/Templates';\nimport { normalizeType, cleanString } from '../utils/stringUtils';\nimport { CURRENT_GMF_VERSION } from './analysis'\n\nconst initialState = {\n    selectedStateKey: null,\n    selectedStateTransition: null,\n    selectedModuleKey: null,\n    loadModuleVisible: false,\n    downloadVisible: false,\n    selectedModulePanel: 'info',\n    modulePanelVisible: true,\n    modules: {},\n    history: [],\n    clipboard: null,\n    historyIndex: -1,\n    refreshCodeFlag: false\n};\n\nexport default (state = initialState, action) => {\n\n  let newState = {...state}\n\n  switch (action.type) {\n    case 'ADD_GMF_VERSION':\n      newState.modules[action.data.targetModuleKey]['gmf_version'] = CURRENT_GMF_VERSION;\n      return newState;\n    case 'SELECT_NODE':\n      let selectedModulePanel = state.selectedModulePanel;\n      if(action.data.key){\n        if(selectedModulePanel === 'info' || state.selectedStateKey === action.data.key){ // if on info or a 'double click'\n          selectedModulePanel = 'state';\n        }\n      } else {\n        if(selectedModulePanel === 'state'){\n          selectedModulePanel = 'info';\n        }\n      }\n\n      newState = { ...newState, selectedModulePanel, selectedStateKey: action.data.key, selectedStateTransition: action.data.transitionIndex};\n\n      // special case where we just want to reflect the selection change in the current history\n      newState.history = [...newState.history]\n      newState.history[0] = {...newState.history[0], selectedStateKey: action.data.key, selectedStateTransition: action.data.transitionIndex};\n\n      return newState;\n\n    case 'COPY_NODE':\n      // let newStateName = action.data.newName;\n      // let newModuleState = _.cloneDeep(newModuleCopy.states[action.data.targetNode.name]);\n      // newModuleState.name = newStateName;\n\n      // /* fix loopback transition case */\n      // renameLoopbackTransition(newModuleState, newStateName, action.data.targetNode.name);\n\n      // newModuleCopy.states[newStateName] = newModuleState;\n      // newState.modules[action.data.targetModuleKey] = newModuleCopy\n      // newState.selectedStateKey = action.data.newName;\n      // newState.selectedStateTransition = null;\n\n      newState.clipboard = _.cloneDeep(state.modules[action.data.targetModuleKey].states[action.data.targetNode.name])\n\n      // saveHistory(newState);\n\n      return newState\n\n    case 'ADD_NODE':\n\n      newState.modules = {...newState.modules}\n\n      newState.modules[action.data.currentModuleKey].states = {...newState.modules[action.data.currentModuleKey].states, [action.data.stateKey]:action.data.state};\n\n      if(action.data.selectedState && typeof action.data.selectedStateTransition === 'number'){\n        // We have been instructed to insert into the middle of an existing transition\n\n        let alteredState = _.cloneDeep(newState.modules[action.data.currentModuleKey].states[action.data.selectedState]);\n\n        if(alteredState.direct_transition && action.data.selectedStateTransition === 0 ){\n          let oldTransitionPoint = alteredState.direct_transition;\n          alteredState.direct_transition = action.data.stateKey;\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\n        } else if(alteredState.distributed_transition){\n          let oldTransitionPoint = alteredState.distributed_transition[action.data.selectedStateTransition].transition;\n          alteredState.distributed_transition = [...alteredState.distributed_transition]\n          alteredState.distributed_transition[action.data.selectedStateTransition] = {...alteredState.distributed_transition[action.data.selectedStateTransition], transition: action.data.stateKey}\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\n        } else if(alteredState.lookup_table_transition){\n          let oldTransitionPoint = alteredState.lookup_table_transition[action.data.selectedStateTransition].transition;\n          alteredState.lookup_table_transition = [...alteredState.lookup_table_transition]\n          alteredState.lookup_table_transition[action.data.selectedStateTransition] = {...alteredState.lookup_table_transition[action.data.selectedStateTransition], transition: action.data.stateKey}\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\n        } else if(alteredState.conditional_transition){\n          let oldTransitionPoint = alteredState.conditional_transition[action.data.selectedStateTransition].transition;\n          alteredState.conditional_transition = [...alteredState.conditional_transition]\n          alteredState.conditional_transition[action.data.selectedStateTransition] = {...alteredState.conditional_transition[action.data.selectedStateTransition], transition: action.data.stateKey}\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\n\n        } else if(alteredState.complex_transition){\n          alteredState = {...alteredState, complex_transition: _.cloneDeep(alteredState.complex_transition)};\n          let complexTransitions = {}\n          let transitionIndex = 0;\n          let rightNode = null;\n          alteredState.complex_transition.forEach( (t, i) => {\n\n            if(t.transition !== undefined){\n              let nodes = t.transition;\n              if(complexTransitions[nodes] === undefined){\n                complexTransitions[nodes] = true;\n                if(transitionIndex === action.data.selectedStateTransition || nodes === rightNode){\n                  rightNode = nodes;\n                  let oldTransitionPoint = t.transition;\n                  t.transition = action.data.stateKey;\n                  newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\n                }\n                transitionIndex++;\n              } else if(nodes === rightNode){\n                let oldTransitionPoint = t.transition;\n                t.transition = action.data.stateKey;\n                newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\n              }\n            } else {\n              t.distributions.forEach( dist => {\n                let nodes = dist.transition;\n                if(complexTransitions[nodes] === undefined){\n                  complexTransitions[nodes] = true;\n                  if(transitionIndex === action.data.selectedStateTransition){\n                    rightNode = nodes;\n                    let oldTransitionPoint = dist.transition;\n                    dist.transition = action.data.stateKey;\n                    newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\n                  }\n                  transitionIndex++;\n                } else if(nodes == rightNode){\n                  let oldTransitionPoint = dist.transition;\n                  dist.transition = action.data.stateKey;\n                  newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\n                }\n              })\n            }\n          })\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\n        }\n        newState.selectedStateTransition = 0;\n      } else if(action.data.selectedState){\n        // we have selected a state, so we will add it AFTER\n        let alteredState = _.cloneDeep(newState.modules[action.data.currentModuleKey].states[action.data.selectedState]);\n\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['direct_transition']\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['conditional_transition']\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['distributed_transition']\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['complex_transition']\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['lookup_table_transition']\n\n\n        if(alteredState.direct_transition){\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = alteredState.direct_transition;\n        } else if(alteredState.distributed_transition){\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].distributed_transition = _.cloneDeep(alteredState.distributed_transition);\n          delete alteredState['distributed_transition']\n        } else if(alteredState.lookup_table_transition){\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].lookup_table_transition = _.cloneDeep(alteredState.lookup_table_transition);\n          delete alteredState['lookup_table_transition']\n        } else if(alteredState.conditional_transition){\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].conditional_transition = _.cloneDeep(alteredState.conditional_transition);\n          delete alteredState['conditional_transition']\n        } else if(alteredState.complex_transition){\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].complex_transition = _.cloneDeep(alteredState.complex_transition);\n          delete alteredState['complex_transition']\n        }\n        alteredState.direct_transition = action.data.stateKey;\n        newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\n\n      }\n\n      newState.selectedStateKey = action.data.stateKey;\n      newState.selectedModulePanel= 'state';\n      newState.selectedStateTransition = null;\n\n\n      saveHistory(newState);\n\n      return newState;\n\n    case 'INSERT_NODE':\n\n      newState.modules = {...newState.modules}\n\n      newState.modules[action.data.currentModuleKey].states = {...newState.modules[action.data.currentModuleKey].states, [action.data.stateKey]:action.data.state};\n      newState.selectedStateKey = action.data.stateKey;\n      newState.selectedModulePanel= 'state';\n      newState.selectedStateTransition = null;\n\n      saveHistory(newState);\n\n      return {...newState};\n\n    case 'ADD_STRUCTURE':\n      newState.modules[action.data.currentModuleKey].states = {...newState.modules[action.data.currentModuleKey].states, ...getTemplate(`Structure.${action.data.structureName}`)};\n      newState.selectedStateTransition = null;\n\n      saveHistory(newState);\n\n      return {...newState}\n\n    case 'OPEN_MODULE':\n      let selectedModuleKey = state.selectedModuleKey;\n\n      selectedModuleKey = action.data.key\n      if(action.data.libraryModule){\n        delete newState.modules[action.data.key];\n        let newModule = {}\n        newModule[action.data.key] = _.cloneDeep(action.data.libraryModule);\n        newState.modules = {...newModule, ...newState.modules}\n      }\n\n      if(!newState.modules[action.data.key]){\n        selectedModuleKey = null;\n      }\n\n      newState.selectedModuleKey = selectedModuleKey;\n      newState.selectedStateKey = null;\n      newState.selectStateTransition = null;\n      newState.loadModuleVisible = false;\n      newState.history = [];\n      newState.historyIndex = 0;\n      newState.selectedModulePanel = 'info';\n\n      saveHistory(newState);\n\n      return { ...newState };\n\n    case 'NEW_MODULE':\n      let newModules = {...state.modules}\n      delete newModules[action.data.key]\n\n      let tempModule = {}; // put in the right order in the object for the tabs\n      tempModule[action.data.key] = action.data.module;\n\n\n      newState.history = [];\n      newState.historyIndex = 0;\n      saveHistory(newState);\n\n      return {...newState, modules: {...tempModule, ...newModules}, selectedStateKey: null, selectedStateTransition: null, selectedModuleKey: action.data.key}\n\n    case 'JSON_EDIT':\n      newState.modules = {...newState.modules}\n      newState.modules[state.selectedModuleKey] = _.cloneDeep(action.data.module);\n      saveHistory(newState);\n      return {...newState};\n\n    case 'EDIT_NODE':\n      let path = action.data.path.join('.');\n      let value = Object.values(action.data.update)[0]\n      if(typeof value === 'object') {\n        value = value.id;\n      }\n      if(value !== null && value !== undefined) {\n        _.set(newState.modules, path, normalizeType(value));\n\n        // FIX DEPENDENT THINGS\n        let splitPath = []\n        if(Array.isArray(path)){\n          splitPath = path.join('.').split('.')\n        } else {\n          splitPath = path.split('.')\n        }\n\n        // If change operator on attribute, clean up value if needed\n        if(splitPath[splitPath.length-1] === 'operator'){\n          const parent = _.get(newState.modules, splitPath.slice(0,-1).join('.'));\n          if((parent.operator === 'is nil' || parent.operator === 'is not nil')){\n            _.unset(newState.modules, splitPath.slice(0,-1).join('.') + '.value')\n          } else {\n            if(parent.operator.value === undefined){\n              _.set(newState.modules, splitPath.slice(0,-1).join('.') + '.value', 0)\n            }\n          }\n        }\n      }\n      else{\n        _.unset(newState.modules, path);\n        let parent = [...action.data.path].splice(0, action.data.path.length -1).join(\".\");\n        if (action.data.path[2] == 'lookup_table_transition'){\n         parent  += '.transitions'\n        }\n        let newVal = _.get(newState.modules, parent);\n        if(Array.isArray(newVal)) {\n          _.set(newState.modules, parent, newVal.filter(x => x));\n        }\n\n        // check to see if it is a node deletion, in which case we need to references\n        let splitPath = []\n        if(Array.isArray(path)){\n          splitPath = path.join('.').split('.')\n        } else {\n          splitPath = path.split('.')\n        }\n\n        if(splitPath.length === 3 && splitPath[1] === 'states'){\n          let stateName = splitPath[2]\n          fixStateReferences(newState.modules[splitPath[0]], stateName, null)\n\n          if(splitPath[2] == newState.selectedStateKey){\n            newState.selectedStateKey = null; // deleselect\n          }\n        }\n\n      }\n\n      saveHistory(newState);\n\n      return newState\n\n    case 'ADD_TRANSITION':\n\n      let transitionMapping = {\n        Conditional: 'conditional_transition',\n        Distributed: 'distributed_transition',\n        Direct: 'direct_transition',\n        Complex: 'complex_transition',\n        Table: 'lookup_table_transition',\n      };\n\n      let transitionName = transitionMapping[action.data.transitionType];\n      let oldTransitionName = null;\n      if (action.data.nodeName.transition != null) {\n        oldTransitionName = transitionMapping[action.data.nodeName.transition.type];\n      }\n\n      let paths = Object.values(transitionMapping);\n      for (var pathIndex in paths) {\n        delete newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][paths[pathIndex]];\n      }\n      newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName] = getTemplate(`Transition.${action.data.transitionType}`);\n\n      // Get first of previous transition locations if available\n      let transitionTo = null;\n      switch(oldTransitionName) {\n        case 'direct_transition':\n          transitionTo = _.get(action, 'data.nodeName.transition.to', null);\n          break;\n        case 'distributed_transition':\n        case 'conditional_transition':\n          transitionTo = _.get(action, 'data.nodeName.transition.transition[0].to', null);\n          break;\n        case 'complex_transition':\n          transitionTo = _.get(action, 'data.nodeName.transition.transition[0].distributions[0].to', null);\n          break;\n        case 'lookup_table_transition':\n          transitionTo = _.get(action, 'data.nodeName.transition.transitions.transition[0].to', null);\n          break;\n      }\n\n      // Provide previous transition location to new if available\n      if (transitionTo !== null) {\n        switch(transitionName) {\n          case 'direct_transition':\n            newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName] = transitionTo;\n            break;\n          case 'distributed_transition':\n          case 'conditional_transition':\n            newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName][0].transition = transitionTo;\n            break;\n          case 'complex_transition':\n            newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName][0].distributions[0].transition = transitionTo;\n            break;\n          case 'lookup_table_transition':\n            newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName].transitions[0].transition = transitionTo;\n            break;\n        }\n      }\n\n      saveHistory(newState);\n\n      return newState\n\n    case 'RENAME_NODE':\n\n      let stateName = action.data.targetNode.name;\n      let newName = action.data.newName.name;\n      let newModule = _.cloneDeep(state.modules[action.data.targetModuleKey])\n      let moduleState = newModule.states[stateName]\n\n\n      if(moduleState === undefined){\n        // if we can't find it, then it might be a blank state (Unnamed state)\n        // Check in the blank key\n        moduleState = newModule.states[\"\"]\n        stateName = \"\"\n      }\n\n      if(moduleState === undefined){\n        // If we still can't find the state, let's just hop out of here.\n        return newState;\n      }\n\n      delete newModule.states[stateName];\n\n      moduleState.name = newName\n      newModule.states[newName] = moduleState\n\n      fixStateReferences(newModule, stateName, newName);\n      newState.modules[action.data.targetModuleKey] = newModule;\n      newState.selectedStateKey = action.data.newName.name;\n\n      saveHistory(newState);\n\n      return newState\n\n    case 'EDIT_MODULE_NAME':\n      newState.modules[action.data.targetModuleKey].name = action.data.newName;\n\n      saveHistory(newState);\n\n      return newState;\n\n    case 'EDIT_MODULE_REMARKS':\n\n      newState.modules[action.data.targetModuleKey].remarks = action.data.newRemarks ? action.data.newRemarks.split(\"\\n\") : null;\n      if(newState.modules[action.data.targetModuleKey].remarks === null){\n        delete newState.modules[action.data.targetModuleKey].remarks;\n      }\n      saveHistory(newState);\n\n      return newState;\n\n    case 'CHANGE_STATE_TYPE':\n      let newType = action.data.newType.type.id;\n      // This line is weird because we need to add the new fields, overwrite any shared fields, then overwrite the type fields\n      // TODO figure out how to remove unused fields\n      newState.modules[action.data.targetModuleKey].states[action.data.targetNode.name] =\n        { ...getTemplate(`State.${newType}`),\n          ..._.pick(newState.modules[action.data.targetModuleKey].states[action.data.targetNode.name], ['direct_transition', 'conditional_transition', 'distributed_transition', 'complex_transition', 'lookup_table_transition', 'remarks']),\n          type: getTemplate(`State.${newType}`).type\n        };\n\n      saveHistory(newState);\n\n      return newState\n\n    case 'LOAD_JSON':\n\n      newState.history = []\n      newState.historyIndex = 0;\n      saveHistory(newState);\n\n      return { ...newState, selectedModuleKey: action.data.selectedModuleKey, selectedStateKey: null, selectedStateTransition: null};\n\n    case 'CLOSE_MODULE':\n\n      delete newState.modules[action.data.selectedModuleKey];\n\n      newState.history = []\n      newState.historyIndex = 0;\n      saveHistory(newState);\n\n      return { ...newState};\n\n    case 'SHOW_LOAD_MODULE':\n      return { ...newState, loadModuleVisible: true};\n\n    case 'HIDE_LOAD_MODULE':\n      return { ...newState, loadModuleVisible: false};\n\n    case 'SHOW_DOWNLOAD':\n      return { ...newState, downloadVisible: true};\n\n    case 'HIDE_DOWNLOAD':\n      return { ...newState, downloadVisible: false};\n\n    case 'CHANGE_MODULE_PANEL':\n      return { ...newState, selectedModulePanel: action.data.targetPanel, modulePanelVisible: action.data.targetPanel !== 'hide'};\n\n    case 'REFRESH_CODE_FLAG':\n      return {...newState, refreshCodeFlag: action.data.flag}\n\n    case 'UNDO':\n      if(newState.history.length > newState.historyIndex + 1){\n        newState.historyIndex++;\n        newState.modules = {...newState.modules}\n        newState.modules[newState.selectedModuleKey] = _.cloneDeep(newState.history[newState.historyIndex].module);\n        newState.selectedStateKey = newState.history[newState.historyIndex].selectedStateKey;\n        newState.selectedStateTransition = newState.history[newState.historyIndex].selectedStateTransition;\n      }\n      return {...newState}\n\n    case 'REDO':\n      if(newState.historyIndex > 0){\n        newState.historyIndex--;\n        newState.modules = {...newState.modules}\n        newState.modules[newState.selectedModuleKey] = _.cloneDeep(newState.history[newState.historyIndex].module);\n        newState.selectedStateKey = newState.history[newState.historyIndex].selectedStateKey;\n        newState.selectedStateTransition = newState.history[newState.historyIndex].selectedStateTransition;\n      }\n      return {...newState}\n\n    default:\n      return newState;\n\n  }\n}\n\n// updates the module in-place with fixed state refences\n// if newName is null, then delete all references instead\nconst fixStateReferences = (module, stateName, newName) => {\n\n  Object.keys(module.states).map(s => module.states[s]).forEach( state => {\n\n    if(state.direct_transition === stateName){\n      if(newName === null){\n        delete state.direct_transition\n      } else {\n        state.direct_transition = newName\n      }\n\n    } else if (state.distributed_transition){\n      state.distributed_transition.forEach( transition => {\n        if(transition.transition === stateName){\n          if(newName === null){\n            delete transition.transition\n          } else {\n            transition.transition = newName\n          }\n        }\n      })\n    } else if (state.lookup_table_transition){\n      state.lookup_table_transition.transitions.forEach( transition => {\n        if(transition.transition === stateName){\n          if(newName === null){\n            delete transition.transition\n          } else {\n            transition.transition = newName\n          }\n        }\n      })\n    }  else if (state.conditional_transition){\n      state.conditional_transition.forEach( transition => {\n        if(transition.transition === stateName){\n          if(newName === null){\n            delete transition.transition\n          } else {\n            transition.transition = newName\n          }\n        }\n        if(transition.condition){\n          if(transition.condition.condition_type === 'PriorState' && transition.condition.name === stateName){\n            if(newName === null){\n              delete transition.condition.name\n            } else {\n              transition.condition.name = newName\n            }\n          }\n        }\n      })\n    } else if (state.complex_transition){\n      state.complex_transition.forEach( transition => {\n        if(transition.transition === stateName){\n          if(newName === null){\n            delete transition.transition\n          } else {\n            transition.transition = newName\n          }\n        }\n        if(transition.condition){\n          if(transition.condition.condition_type === 'PriorState' && transition.condition.name === stateName){\n            if(newName === null) {\n              delete transition.condition.name\n            } else {\n              transition.condition.name = newName\n            }\n          }\n        }\n        if(transition.distributions){\n          transition.distributions.forEach( distribution => {\n            if(distribution.transition === stateName){\n              if(newName === null){\n                delete distribution.transition\n              } else {\n                distribution.transition = newName\n              }\n            }\n          })\n        }\n      })\n    }\n    if(state.reason === stateName){\n      if(newName === null){\n        delete state.reason\n      } else {\n        state.reason = newName;\n      }\n    }\n    if(state.target_encounter === stateName){\n      if(newName === null){\n        delete state.target_encounter\n      } else {\n        state.target_encounter = newName;\n      }\n    }\n    if(state.condition_onset === stateName){\n      if(newName === null){\n        delete state.condition_onset\n      } else {\n        state.condition_onset = newName;\n      }\n    }\n    if(state.allergy_onset === stateName){\n      if(newName === null){\n        delete state.allergy_onset\n      } else {\n        state.allergy_onset = newName;\n      }\n    }\n    if(state.medication_order === stateName){\n      if(newName === null){\n        delete state.medication_order\n      } else {\n        state.medication_order = newName;\n      }\n    }\n    if(state.careplan === stateName){\n      if(newName === null){\n        delete state.careplan;\n      } else {\n        state.careplan = newName;\n      }\n    }\n    if(state.allow && state.allow.condition_type === 'PriorState' && state.allow.name === stateName){\n      if(newName === null){\n        delete state.allow.name\n      } else {\n        state.allow.name = newName;\n      }\n    }\n  });\n}\n\nconst saveHistory = (state) => {\n  let selectedStateKey = state.selectedStateKey;\n  let selectedStateTransition = state.selectedStateTransition;\n\n  if(state.historyIndex > 0){\n    while(state.historyIndex > 0 && state.history.length > 0){\n      state.historyIndex--;\n      state.history.shift()\n    }\n\n    state.historyIndex = 0; // should always be 0 anyhow\n\n  }\n\n  state.history = [{selectedStateKey, selectedStateTransition, module: _.cloneDeep(state.modules[state.selectedModuleKey])}].concat(state.history);\n\n  state.history.splice(20) // only save the last 20 changes\n}\n\n// When nodes are cloned, loopback transitions point to node being cloned, instead of new copy\nconst renameLoopbackTransition = (state, newStateName, oldStateName) => {\n  if(state.direct_transition === oldStateName){\n    state.direct_transition = newStateName;\n  } else if (state.distributed_transition){\n    state.distributed_transition.forEach( transition => {\n      if(transition.transition === oldStateName){\n        transition.transition = newStateName\n      }\n    })\n  } else if (state.lookup_table_transition){\n    state.lookup_table_transition.forEach( transition => {\n      if(transition.transition === oldStateName){\n        transition.transition = newStateName\n      }\n    })\n  } else if (state.conditional_transition){\n    state.conditional_transition.forEach( transition => {\n      if(transition.transition === oldStateName){\n        transition.transition = newStateName\n      }\n    })\n  } else if (state.complex_transition){\n    state.complex_transition.forEach( transition => {\n      if(transition.transition === oldStateName){\n        transition.transition = newStateName\n      }\n      if(transition.distributions){\n        transition.distributions.forEach( distribution => {\n          if(distribution.transition === oldStateName){\n            distribution.transition = newStateName\n          }\n        })\n      }\n    })\n  }\n}\n\n","import { createBrowserHistory } from 'history';\nimport { applyMiddleware, compose, createStore } from 'redux';\nimport { routerMiddleware } from 'connected-react-router';\nimport thunk from 'redux-thunk';\n\nimport createRootReducer from './reducers';\n\nconst initialState = {}\nconst enhancers = [];\nconst middleware = [];\n\nif (process.env.NODE_ENV === 'development') {\n  const devToolsExtension = window.devToolsExtension\n\n  if (typeof devToolsExtension === 'function') {\n    enhancers.push(devToolsExtension())\n  }\n}\n\nexport const history = createBrowserHistory({basename: '/module-builder'})\n\nconst createAppStore = (history) => {\n  middleware.push(routerMiddleware(history))\n  middleware.push(thunk)\n  const composedEnhancers = compose(\n    applyMiddleware(...middleware),\n    ...enhancers\n  )\n\n  const store = createStore(\n    createRootReducer(history), // root reducer with router state\n    initialState,\n    composedEnhancers\n  )\n  return store;\n}\n\nexport default createAppStore;\n","import { combineReducers } from 'redux';\nimport { connectRouter } from 'connected-react-router'\n\nimport library from './library';\nimport editor from './editor';\nimport analysis from './analysis';\n\nexport default (history) => combineReducers({\n  router : connectRouter(history),\n  library,\n  editor,\n  analysis\n});\n","// @flow\n\nimport React, { Component } from 'react';\nimport { RIEInput } from 'riek';\nimport _ from 'lodash';\n\nimport type { Code as CodeType } from '../../types/Code';\nimport { getTemplate } from '../../templates/Templates';\n\ntype Props = {\n  code: CodeType,\n  system: string,\n  onChange: any,\n  value_set?: string\n}\n\nexport class Code extends Component<Props> {\n  checkValueSetKey() {\n    if(this.props.code.value_set) {\n      return (\n        <div>\n        Value Set (Optional): <RIEInput className='editable-text' value={this.props.code.value_set} propName=\"value_set\" change={this.props.onChange('value_set')} />\n        </div>\n      );\n    }else {\n      return (\n        <div>\n        Value Set (Optional): <RIEInput className='editable-text' value=\"\" propName=\"value_set\" change={this.props.onChange('value_set')} />\n        </div>\n      );\n    }\n  }\n\n  render() {\n    let code = this.props.code;\n    let system = this.props.system;\n    return (\n      <div>\n        System: { system ? system : code.system}\n        <br />\n        Code: <RIEInput className='editable-text' value={code.code} propName=\"code\" change={this.props.onChange('code')} />\n        <br />\n        Display: <RIEInput className='editable-text' value={code.display} propName=\"display\" change={this.props.onChange('display')} />\n        {this.checkValueSetKey()}\n      </div>\n    );\n  }\n}\n\ntype CodesProps = {\n  codes: CodeType[],\n  system: string,\n  onChange: any\n}\nexport class Codes extends Component<CodesProps> {\n  render() {\n\n    if(!this.props.codes){\n      return null;\n    }\n    let system = this.props.system;\n    let templates = {\n      \"SNOMED-CT\": getTemplate('Type.Code.Snomed'),\n      \"LOINC\": getTemplate('Type.Code.Loinc'),\n      \"RxNorm\": getTemplate('Type.Code.RxNorm'),\n      \"NUBC\": getTemplate('Type.Code.Nubc'),\n      \"DICOM-DCM\": getTemplate('Type.Code.DicomDCM'),\n      \"DICOM-SOP\": getTemplate('Type.Code.DicomSOP')\n    };\n    return (\n      <div>\n        {this.props.codes.map((code, i) => {\n          return (\n            <div className='section' key={i}>\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\n              <Code onChange={this.props.onChange(i)} code={code} system={system}/>\n            </div>\n          )\n        })}\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.codes.length}]`)({val: {id: _.cloneDeep(templates[system])}})}>+</a>\n      </div>\n    );\n  }\n}\n","// @flow\n\nimport React, { Component } from 'react';\nimport { RIENumber, RIESelect } from 'riek';\nimport _ from 'lodash';\n\nimport type { Code as CodeType } from '../../types/Code';\nimport type { Reaction as ReactionType, Severity as SeverityType } from '../../types/State';\nimport { getTemplate } from '../../templates/Templates';\nimport { Code }  from './Code';\n\ntype SeverityComponent = SeverityType & {\n  onChange: any\n}\n\nexport class Severity extends Component<SeverityComponent> {\n  render() {\n    let level = this.props.level;\n    let value = this.props.value;\n    return (\n      <div>\n        Level: <RIESelect className='editable-text'\n                          value={{id: level, text: level}} propName=\"level\"\n                          change={this.props.onChange('level')}\n                          options={[{id:'severe', text: 'Severe'},\n                                    {id:'moderate', text: 'Moderate'},\n                                    {id:'mild', text: 'Mild'},\n                                    {id:'none', text: 'None'}]}/>\n        <br />\n        Probability: <RIENumber className='editable-text'\n                                value={value} propName=\"value\"\n                                change={this.props.onChange('value')}\n                                editProps={{step: .01, min: 0, max: 1}}\n                                format={this.formatAsPercentage} validate={this.checkInRange}/>\n      </div>\n    );\n  }\n\n  formatAsPercentage(num: number) {\n    return (num * 100) + \"%\";\n  }\n\n  checkInRange(num: number) {\n    return ((num >= 0) && (num <= 1));\n  }\n}\n\ntype ReactionComponent = ReactionType & {\n  onChange: any\n}\n\nexport class Reaction extends Component<ReactionComponent> {\n  render() {\n    return (\n      <div>\n        <Code onChange={this.props.onChange('reaction')}\n              code={this.props.reaction.reaction} system={\"SNOMED-CT\"}/>\n        Severity Probabilities:\n        {this.props.reaction.possible_severities.map((ps, i) => {\n            return (\n              <div className='section' key={i}>\n                <a className='editable-text delete-button' onClick={() => this.props.onChange(`possible_severities[${i}]`)({val: {id: null}})}>remove</a>\n                <Severity onChange={this.props.onChange(`possible_severities[${i}]`)} level={ps.level} value={ps.value}/>\n              </div>\n            )\n        })}\n        {this.renderWarning()}\n        <a className='editable-text' onClick={() => this.props.onChange(`possible_severities[${this.props.reaction.possible_severities.length}]`)({val: {id: {level: \"none\", value: 0}}})}>+</a>\n      </div>\n    );\n  }\n\n  renderWarning() {\n    if(this.props.reaction.possible_severities.length == 0) {\n      return null;\n    }\n    let warn = (this.props.reaction.possible_severities.reduce((acc, val) => acc + val.value, 0) !== 1);\n    if (warn) {\n      return (\n        <label className='warning'>Probabilities do not add up to 100%.</label>\n      );\n    }\n  }\n}\n","// @flow\nimport React, { Component } from 'react';\nimport { RIEInput } from 'riek';\n\ntype Props = {\n  label: string,\n  value: string,\n  onChange: any\n};\n\nexport class StringEditor extends Component<Props> {\n  render() {\n    let value = this.props.value;\n    return (\n      <div>\n        {this.props.label}: <RIEInput className='editable-text' value={value} propName=\"value\" change={this.props.onChange} />\n        <br />\n      </div>\n    );\n  }\n}\n\ntype StringsProps = {\n  label: string,\n  values: string[],\n  onChange: any\n};\nexport class StringsEditor extends Component<StringsProps> {\n  render() {\n    if(!this.props.values){\n      return null;\n    }\n    return (\n      <div>\n        {this.props.values.map((value, i) => {\n          return (\n            <div className='section' key={i}>\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\n              <StringEditor onChange={this.props.onChange(i)} value={value} label={this.props.label} />\n            </div>\n          )\n        })}\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.values.length}]`)({val: {id: \"text\"}})}>+</a>\n      </div>\n    );\n  }\n}\n","// @flow\n\nimport React, { Component } from 'react';\nimport { RIESelect, RIEInput, RIENumber } from 'riek';\nimport _ from 'lodash';\n\nimport type { Goal as GoalType } from '../../types/Attributes';\nimport { Codes } from './Code';\nimport { StringsEditor } from './String';\nimport { getTemplate } from '../../templates/Templates';\n\ntype Props = {\n  goal: GoalType,\n  onChange: any\n}\n\nexport class Goal extends Component<Props> {\n\n  render() {\n    let goal = this.props.goal;\n    return (\n      <div>\n        {this.renderObservation()}\n        {this.renderText()}\n        <div className='section'>\n          Addresses\n          <br />\n          <StringsEditor values={goal.addresses} label={\"Address\"} onChange={this.props.onChange('addresses')} />\n          <br />\n        </div>\n      </div>\n    );\n  }\n\n  renderObservation() {\n    let goal = this.props.goal;\n    let options = [\n      {id: '==' , text: '==' },\n      {id: '!=' , text: '!=' },\n      {id: \"<\" , text: \"<\" },\n      {id: \"<=\" , text: \"<=\" },\n      {id: \">\" , text: \">\" },\n      {id: \">=\", text: \">=\"},\n      {id: \"is nil\", text: \"is nil\"},\n      {id: \"is not nil\", text: \"is not nil\"}\n    ];\n    if (!goal.observation) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('observation')({val: {id: getTemplate('Attribute.Observation')}})}>Add Observation</a>\n          <br />\n        </div>\n      );\n    } else {\n      let goalObservationValue = (\n        <div>\n          Goal Observation Value: <RIENumber className='editable-text' value={goal.observation.value} propName={'value'} change={this.props.onChange('observation.value')} />\n        </div>\n      );\n\n      if(goal.observation.operator === 'is nil' || goal.observation.operator === 'is not nil'){\n        goalObservationValue = <div/>\n      }\n      \n      return (\n        <div className='section'>\n          Observation\n          <br />\n          <div className='section'>\n            Codes\n            <br />\n            <Codes codes={goal.observation.codes} system={\"LOINC\"} onChange={this.props.onChange('observation.codes')} />\n            <br />\n          </div>\n          Goal Observation Operator: <RIESelect className='editable-text' value={{id: goal.observation.operator, text: goal.observation.operator}} propName={'operator'} change={this.props.onChange('observation.operator')} options={options} />\n          {goalObservationValue}\n          <br/>\n          <a className='editable-text' onClick={() => this.props.onChange('observation')({val: {id: null}})}>Remove Observation</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  renderText() {\n    let goal = this.props.goal;\n    if (!goal.text) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('text')({val: {id: \"text\"}})}>Add Text</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Goal Text: <RIEInput className='editable-text' value={goal.text} propName={'text'}  change={this.props.onChange('text')} />\n          <a className='editable-text' onClick={() => this.props.onChange('text')({val: {id: null}})}>(remove)</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n}\n\ntype GoalsProps = {\n  goals: GoalType[],\n  onChange: any\n}\nexport class Goals extends Component<GoalsProps> {\n  render() {\n\n    if(!this.props.goals){\n      return null;\n    }\n    return (\n      <div>\n        {this.props.goals.map((goal, i) => {\n          return (\n            <div className='section' key={i}>\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\n              <Goal onChange={this.props.onChange(i)} goal={goal} />\n            </div>\n          )\n        })}\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.goals.length}]`)({val: {id: getTemplate('Attribute.Goal')}})}>+</a>\n      </div>\n    );\n  }\n}\n","// @flow\n\nimport React, { Component } from 'react';\nimport { RIEInput } from 'riek';\nimport _ from 'lodash';\n\nimport type { Instance as InstanceType, Series as SeriesType } from '../../types/Attributes';\n\nimport { Code } from './Code';\nimport { getTemplate } from '../../templates/Templates';\n\ntype InstanceProps = {\n  title: string,\n  sop_class: CodeType,\n  onChange: any\n}\n\nexport class Instance extends Component<InstanceProps> {\n\n  render() {\n    let title = this.props.title;\n    let sop_class = this.props.sop_class;\n    return (\n      <div>\n        Title: <RIEInput className='editable-text' value={title} propName=\"title\" change={this.props.onChange('title')} />\n        <br />\n        <br />\n        <b>SOP Class:</b>\n        <br />\n        <Code code={sop_class} system={\"DICOM-SOP\"} onChange={this.props.onChange('sop_class')} />\n      </div>\n    );\n  }\n\n}\n\ntype InstanceListProps = {\n  instances: InstanceType[],\n  onChange: any\n}\n\nexport class InstanceList extends Component<InstanceListProps> {\n\n  render() {\n    if (!this.props.instances) {\n      return null;\n    }\n    return (\n      <div>\n        {this.props.instances.map((instance, i) => {\n          return (\n            <div className='section' key={i}>\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\n              <Instance onChange={this.props.onChange(i)} title={instance.title} sop_class={instance.sop_class}/>\n            </div>\n          )\n        })}\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.instances.length}]`)({val: {id: getTemplate('Attribute.ImagingStudy.Instance')}})}>+</a>\n      </div>\n    );\n  }\n\n}\n\ntype SeriesProps = {\n  body_site: CodeType,\n  modality: CodeType,\n  instances: InstanceType[],\n  onChange: any\n}\n\nexport class Series extends Component<SeriesProps> {\n\n  render() {\n    let body_site = this.props.body_site;\n    let modality = this.props.modality;\n    let instances = this.props.instances;\n    return (\n      <div className='section'>\n        <b>Body Site:</b>\n        <br />\n        <Code code={body_site} system={\"SNOMED-CT\"} onChange={this.props.onChange('body_site')} />\n        <br/>\n        <b>Modality:</b>\n        <br />\n        <Code code={modality} system={\"DICOM-DCM\"} onChange={this.props.onChange('modality')} />\n        <br />\n        <b>Instances:</b>\n        <InstanceList instances={instances} onChange={this.props.onChange('instances')} />\n      </div>\n    )\n  }\n\n}\n\n\ntype SeriesListProps = {\n  series: SeriesType[],\n  onChange: any\n}\n\nexport class SeriesList extends Component<SeriesListProps> {\n\n  render() {\n    if (!this.props.series) {\n      return null;\n    }\n    return (\n      <div>\n        {this.props.series.map((series, i) => {\n          return (\n            <div className='section' key={i}>\n                <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\n                <br />\n                <Series onChange={this.props.onChange(i)} body_site={series.body_site} modality={series.modality} instances={series.instances} />\n            </div>\n          )\n        })}\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.series.length}]`)({val: {id: getTemplate('Attribute.ImagingStudy.Series')}})}>+</a>\n      </div>\n    );\n  }\n\n}\n","// @flow\nimport React, { Component } from 'react';\nimport { RIESelect, RIEInput, RIENumber } from 'riek';\nimport _ from 'lodash';\nimport type { Conditional, GenderConditional , AgeConditional , DateConditional , SocioeconomicStatusConditional , RaceConditional , SymptomConditional , ObservationConditional , VitalSignConditional , ActiveAllergyConditional , ActiveConditionConditional , ActiveMedicationConditional , ActiveCarePlanConditional , PriorStateConditional , AttributeConditional , AndConditional , OrConditional , AtLeastConditional , AtMostConditional , NotConditional } from '../../types/Conditional';\nimport type { State } from '../../types/State';\nimport { Codes } from './Code';\nimport { Code } from './Code';\nimport { getTemplate } from '../../templates/Templates';\n\ntype Props = {\n  conditional: Conditional,\n  options: State[],\n  onChange: any\n}\n\nconst unitOfTimeOptions = [\n  {id: 'years', text: 'years'},\n  {id: 'months', text: 'months'},\n  {id: 'weeks', text: 'weeks'},\n  {id: 'days', text: 'days'},\n  {id: 'hours', text: 'hours'},\n  {id: 'minutes', text: 'minutes'},\n  {id: 'seconds', text: 'seconds'}\n];\n\nconst unitOfAgeOptions = [\n  {id: 'years', text: 'years'},\n  {id: 'months', text: 'months'},\n  {id: 'weeks', text: 'weeks'},\n  {id: 'days', text: 'days'},\n  {id: 'hours', text: 'hours'},\n  {id: 'minutes', text: 'minutes'},\n  {id: 'seconds', text: 'seconds'}\n];\n\nclass ConditionalEditor extends Component<Props> {\n\n  renderConditionalType() {\n    switch (this.props.conditional.condition_type) {\n      case \"Gender\":\n        return <Gender {...this.props} />\n      case \"Age\":\n        return <Age {...this.props} />\n      case \"Date\":\n        return <Date {...this.props} />\n      case \"Socioeconomic Status\":\n        return <SocioeconomicStatus {...this.props} />\n      case \"Race\":\n        return <Race {...this.props} />\n      case \"Symptom\":\n        return <Symptom {...this.props} />\n      case \"Observation\":\n        return <Observation {...this.props} />\n      case \"Vital Sign\":\n        return <VitalSign {...this.props} />\n      case \"Active Allergy\":\n        return <ActiveAllergy {...this.props} />\n      case \"Active Condition\":\n        return <ActiveCondition {...this.props} />\n      case \"Active Medication\":\n        return <ActiveMedication {...this.props} />\n      case \"Active CarePlan\":\n        return <ActiveCarePlan {...this.props} />\n      case \"PriorState\":\n        return <PriorState {...this.props} />\n      case \"Attribute\":\n        return <Attribute {...this.props} />\n      case \"And\":\n        return <And {...this.props} />\n      case \"Or\":\n        return <Or {...this.props} />\n      case \"At Least\":\n        return <AtLeast {...this.props} />\n      case \"At Most\":\n        return <AtMost {...this.props} />\n      case \"Not\":\n        return <Not {...this.props} />\n      default:\n        return this.props.conditional.condition_type\n\n    }\n  }\n\n  render() {\n    if (!this.props.conditional) {\n      return null;\n    }\n    let template = getTemplate('Type.Condition');\n    let options = Object.keys(template).sort().map((k) => {return {id: k, text: k}});\n    return (\n      <div>\n        Condition Type: <RIESelect className='editable-text' propName='condition' value={{id: this.props.conditional.condition_type, text: this.props.conditional.condition_type}} change={(val) => this.props.onChange({condition:{id: template[val.condition.id]}})} options={options} />\n        <br/>\n        {this.renderConditionalType()}\n      </div>\n    );\n  }\n}\n\nclass Gender extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): GenderConditional);\n    return (\n      <label> Gender:\n        <RIESelect className='editable-text'\n          propName='gender'\n          value={{id: conditional.gender, text: conditional.gender}}\n          change={this.props.onChange('gender')}\n          options={[{id:'M', text: 'M'}, {id:'F', text: 'F'}]}\n        />\n      </label>\n    );\n  }\n\n}\n\nclass Age extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): AgeConditional);\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}];\n    return (\n      <label> Age:\n      <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\n      <RIENumber className='editable-text' value={conditional.quantity} propName='quantity' change={this.props.onChange('quantity')} />\n      <RIESelect className='editable-text' value={{id: conditional.unit, text: conditional.unit}} propName=\"unit\" change={this.props.onChange('unit')} options={unitOfAgeOptions} />\n      </label>\n    );\n  }\n\n}\n\nclass Date extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): DateConditional);\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}];\n    return (\n      <label>\n      <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\n      {this.renderType()}\n      {this.renderWarning()}\n      </label>\n    );\n  }\n\n  renderType() {\n    let conditional = ((this.props.conditional: any): DateConditional);\n\n    if(conditional.month) {\n      let month = <RIENumber className='editable-text' value={conditional.month} propName='month' change={this.props.onChange('month')} />\n      return (\n        <div>\n          Month:\n          {month}\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('year')({val: {id: getTemplate('Type.Date.Year')}}); this.props.onChange('month')({val: {id: null}}); this.props.onChange('date')({val: {id: null}})}}>Change to Year</a>\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('date.year')({val: {id: getTemplate('Type.Date.Year')}}); this.props.onChange('date.month')({val: {id: getTemplate('Type.Date.Month')}}); this.props.onChange('date.day')({val: {id: getTemplate('Type.Date.Day')}}); this.props.onChange('date.hour')({val: {id: getTemplate('Type.Date.Hour')}}); this.props.onChange('date.minute')({val: {id: getTemplate('Type.Date.Minute')}}); this.props.onChange('date.second')({val: {id: getTemplate('Type.Date.Second')}}); this.props.onChange('date.millisecond')({val: {id: getTemplate('Type.Date.Millisecond')}}); this.props.onChange('month')({val: {id: null}}); this.props.onChange('year')({val: {id: null}})}}>Change to Date</a>\n        </div>\n      );\n    } else if (conditional.date) {\n      let yearInput = <RIENumber className='editable-text' value={conditional.date.year} propName='date.year' change={this.props.onChange('date.year')} />\n      let monthInput = <RIENumber className='editable-text' value={conditional.date.month} propName='date.month' change={this.props.onChange('date.month')} />\n      let dayInput = <RIENumber className='editable-text' value={conditional.date.day} propName='date.day' change={this.props.onChange('date.day')} />\n      let hourInput = <RIENumber className='editable-text' value={conditional.date.hour} propName='date.hour' change={this.props.onChange('date.hour')} />\n      let minuteInput = <RIENumber className='editable-text' value={conditional.date.minute} propName='date.minute' change={this.props.onChange('date.minute')} />\n      let secondInput = <RIENumber className='editable-text' value={conditional.date.second} propName='date.second' change={this.props.onChange('date.second')} />\n      let millisecondInput = <RIENumber className='editable-text' value={conditional.date.millisecond} propName='date.millisecond' change={this.props.onChange('date.millisecond')} />\n\n      return (\n        <div>\n          Date:\n          <br />\n          {yearInput}/{monthInput}/{dayInput} {hourInput}:{minuteInput}:{secondInput}.{millisecondInput}\n          <br />\n          (yyyy/MM/dd HH:mm:ss.SSS)\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('year')({val: {id: getTemplate('Type.Date.Year')}}); this.props.onChange('month')({val: {id: null}}); this.props.onChange('date')({val: {id: null}})}}>Change to Year</a>\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('month')({val: {id: getTemplate('Type.Date.Month')}}); this.props.onChange('date')({val: {id: null}}); this.props.onChange('year')({val: {id: null}})}}>Change to Month</a>\n        </div>\n      );\n\n    } else { //year\n      let year = <RIENumber className='editable-text' value={conditional.year} propName='year' change={this.props.onChange('year')} />\n      return (\n        <div>\n          Year:\n          {year}\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('month')({val: {id: getTemplate('Type.Date.Month')}}); this.props.onChange('year')({val: {id: null}}); this.props.onChange('date')({val: {id: null}})}}>Change to Month</a>\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('date.year')({val: {id: getTemplate('Type.Date.Year')}}); this.props.onChange('date.month')({val: {id: getTemplate('Type.Date.Month')}}); this.props.onChange('date.day')({val: {id: getTemplate('Type.Date.Day')}}); this.props.onChange('date.hour')({val: {id: getTemplate('Type.Date.Hour')}}); this.props.onChange('date.minute')({val: {id: getTemplate('Type.Date.Minute')}}); this.props.onChange('date.second')({val: {id: getTemplate('Type.Date.Second')}}); this.props.onChange('date.millisecond')({val: {id: getTemplate('Type.Date.Millisecond')}}); this.props.onChange('year')({val: {id: null}}); this.props.onChange('month')({val: {id: null}})}}>Change to Date</a>\n        </div>\n      );\n    }\n  }\n\n  renderWarning(){\n    if (this.props.conditional.year < 1) {\n      return (\n        <label className='warning'>Invalid Year.</label>\n      );\n    } else if (this.props.conditional.month < 1 || this.props.conditional.month > 12) {\n      return (\n        <label className='warning'>Invalid Month. Must be between 1 and 12.</label>\n      );\n    } else if (this.props.conditional.date) {\n      if (this.props.conditional.date.year < 1) {\n        return (\n          <label className='warning'>Invalid Year</label>\n        );\n      } else if (this.props.conditional.date.month < 1 || this.props.conditional.date.month > 12) {\n        return (\n          <label className='warning'>Invalid Month. Must be between 1 and 12.</label>\n        );\n      } else if (this.props.conditional.date.day < 1 || this.props.conditional.date.day > 31) {\n        return (\n          <label className='warning'>Invalid Day. Must at least 1 and never greater than 31.</label>\n        );\n      } else if (this.props.conditional.date.hour < 0 || this.props.conditional.date.hour > 24) {\n        return (\n          <label className='warning'>Invalid Hour. Must be between 0 and 24.</label>\n        );\n      } else if (this.props.conditional.date.minute < 0 || this.props.conditional.date.minute > 60) {\n        return (\n          <label className='warning'>Invalid Minute. Must be between 0 and 60.</label>\n        );\n      } else if (this.props.conditional.date.second < 0 || this.props.conditional.date.second > 60) {\n        return (\n          <label className='warning'>Invalid Second. Must be between 0 and 60.</label>\n        );\n      } else if (this.props.conditional.date.millisecond < 0 || this.props.conditional.date.millisecond > 999) {\n        return (\n          <label className='warning'>Invalid Millisecond. Must be between 0 and 999.</label>\n        );\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n}\n\nclass SocioeconomicStatus extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): SocioeconomicStatusConditional);\n    let options = [\n      {id: 'Low', text: 'Low'},\n      {id: 'Middle', text: 'Middle'},\n      {id: 'High', text: 'High'}\n    ];\n    return (\n      <label> Socioeconomic Status:\n        <RIESelect className='editable-text' value={{id: conditional.category, text: conditional.category}} propName=\"category\" change={this.props.onChange('category')} options={options} />\n      </label>\n    )\n  }\n\n}\n\nclass Race extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): RaceConditional);\n    let options = [\n      {id: \"White\", text: \"White\"},\n      {id: \"Native\", text: \"Native\"},\n      {id: \"Hispanic\", text: \"Hispanic\"},\n      {id: \"Black\", text: \"Black\"},\n      {id: \"Asian\", text: \"Asian\"},\n      {id: \"Hawaiian\", text: \"Hawaiian\"},\n      {id: \"Other\", text: \"Other\"}\n    ];\n    return (\n      <label> Race:\n        <RIESelect className='editable-text' value={{id: conditional.race, text: conditional.race}} propName=\"race\" change={this.props.onChange('race')} options={options} />\n      </label>\n    );\n  }\n\n}\n\nclass Symptom extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): SymptomConditional);\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}];\n\n    return (\n      <label> Symptom:\n      <RIEInput className='editable-text' value={conditional.symptom} propName=\"symptom\" change={this.props.onChange('symptom')} />\n      <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\n      <RIENumber className='editable-text' value={conditional.value} propName='value' change={this.props.onChange('value')} />\n\n      </label>\n    );\n  }\n\n}\n\nclass Observation extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): ObservationConditional);\n    let options = [];\n    if (conditional.value_code) {\n      options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"is nil\", text: \"is nil\"}, {id: \"is not nil\", text: \"is not nil\"}];\n    } else {\n      options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}, {id: \"is nil\", text: \"is nil\"}, {id: \"is not nil\", text: \"is not nil\"}];\n    }\n\n    return (\n      <label> Observation:\n        <Codes system={getTemplate('Type.Code.Loinc.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\n        <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\n        {this.renderValueOrCodeValue()}\n      </label>\n    );\n  }\n\n  renderValueOrCodeValue() { // renders numerical or code value\n    let conditional = ((this.props.conditional: any): ObservationConditional);\n    let value_code = <Code className='editable-text' system={getTemplate('Type.Code.Snomed.display')} code={conditional.value_code} onChange={this.props.onChange('value_code')} />\n    let value = conditional.value;\n    if(typeof value === 'boolean'){\n      value = String(value);\n    }\n    let valueInput = <RIEInput className='editable-text' value={value} propName='value' change={this.props.onChange('value')} />\n    if (conditional.operator !== 'is nil' && conditional.operator !== 'is not nil' && conditional.operator.id !== 'is nil' && conditional.operator.id !== 'is not nil'){\n      if (conditional.value_code) {\n        return (\n          <div>\n            Value Code:\n            <div className='section'>\n            {value_code}\n            </div>\n            <a className='editable-text' onClick={() => {this.props.onChange('value')({val: {id: \"0\"}}); this.props.onChange('value_code')({val: {id: null}})}}>Change to Numeric Value</a>\n          </div>\n        );\n      } else {\n        return (\n          <div>\n            Value:\n            {valueInput}\n            <br />\n            <a className='editable-text' onClick={() => {this.props.onChange('value_code')({val: {id: getTemplate('Type.Code.Snomed')}}); this.props.onChange('value')({val: {id: null}})}}>Change to Value Code</a>\n            <br />\n          </div>\n        );\n      }\n    } else {\n      return (\n        <div>\n          No value needed for '{conditional.operator}'\n        </div>\n      )\n    }\n  }\n}\n\nclass VitalSign extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): VitalSignConditional);\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}];\n\n    return (\n      <label> Vital Sign:\n      <RIEInput className='editable-text' value={conditional.vital_sign} propName=\"vital_sign\" change={this.props.onChange('vital_sign')} />\n      <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\n      <RIENumber className='editable-text' value={conditional.value} propName='value' change={this.props.onChange('value')} />\n\n      </label>\n    );\n  }\n\n}\n\nclass ActiveCondition extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): ActiveConditionConditional);\n\n    return (\n      <label> Active Condition:\n        <Codes system={getTemplate('Type.Code.Snomed.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\n      </label>\n    );\n  }\n\n}\n\nclass ActiveAllergy extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): ActiveAllergyConditional);\n\n    return (\n      <label> Active Allergy:\n        <Codes system={getTemplate('Type.Code.Snomed.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\n      </label>\n    );\n  }\n\n}\n\nclass ActiveMedication extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): ActiveMedicationConditional);\n    return (\n      <label> ActiveMedication:\n      <Codes system={getTemplate('Type.Code.RxNorm.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\n      </label>\n    );\n  }\n\n}\n\nclass ActiveCarePlan extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): ActiveCarePlanConditional);\n    return (\n      <label> ActiveCarePlan:\n      <Codes system={getTemplate('Type.Code.Snomed.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\n      </label>\n    );\n  }\n\n}\n\nclass PriorState extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): PriorStateConditional);\n    let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\n    let name = conditional.name;\n    return (\n      <label>\n        Prior State Name: <RIESelect className='editable-text' value={{id: name, text: name}} propName=\"name\" change={this.props.onChange('name')} options={options} />\n        <br />\n        {this.renderSince()}\n        <br />\n        {this.renderWithin()}\n      </label>\n    );\n  }\n\n  renderSince() {\n    let conditional = ((this.props.conditional: any): PriorStateConditional);\n    if (conditional.since == null) {\n      return (\n        <label>\n          <a className='editable-text' onClick={() => this.props.onChange('since')({val: {id: getTemplate('Attribute.Since')}})}>Add Since</a>\n        </label>\n      );\n    } else {\n      let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\n      let since = conditional.since;\n      return (\n        <label>\n          Prior State Since: <RIESelect className='editable-text' value={{id: since, text: since}} propName=\"since\" change={this.props.onChange('since')} options={options} />\n          <a className='editable-text' onClick={() => this.props.onChange('since')({val: {id: null}})}> (remove)</a>\n        </label>\n      );\n    }\n  }\n\n  renderWithin() {\n    let conditional = ((this.props.conditional: any): PriorStateConditional);\n    if (conditional.within == null) {\n      return (\n        <label>\n          <a className='editable-text' onClick={() => this.props.onChange('within')({val: {id: getTemplate('Attribute.Within')}})}>Add Within</a>\n          <br />\n        </label>\n      );\n    } else {\n      return (\n        <label>\n          Prior State Within Quantity: <RIENumber className='editable-text' value={conditional.within.quantity} propName=\"quantity\" change={this.props.onChange('within.quantity')} />\n          <br />\n          Prior State Within Unit: <RIESelect className='editable-text' value={{id: conditional.within.unit, text: conditional.within.unit}} propName=\"unit\" change={this.props.onChange('within.unit')} options={unitOfTimeOptions} />\n          <br />\n          <a className='editable-text' onClick={() => this.props.onChange('within')({val: {id: null}})}>Remove Within</a>\n        </label>\n      );\n    }\n  }\n\n}\n\nclass Attribute extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): AttributeConditional);\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}, {id: \"is nil\", text: \"is nil\"}, {id: \"is not nil\", text: \"is not nil\"}];\n\n    let val = conditional.value;\n    if(typeof val === 'boolean'){\n      val = String(val);\n    }\n\n    let valueInput = <div/>\n\n    // It appears that conditional is inconsistent, sometimes values are in ids\n    // This should be tracked down\n    if(conditional.operator !== 'is nil' && conditional.operator !== 'is not nil' && conditional.operator.id !== 'is nil' && conditional.operator.id !== 'is not nil'){\n      valueInput = <RIEInput className='editable-text' value={val||0} propName='value' change={this.props.onChange('value')} />\n    }\n\n    return (\n      <label>\n        <RIEInput className='editable-text' value={conditional.attribute} propName=\"attribute\" change={this.props.onChange('attribute')} />\n        <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\n        {valueInput}\n      </label>\n    );\n  }\n\n}\n\nclass And extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): AndConditional);\n    return (\n      <label> And:\n        {conditional.conditions.map((cond, i) => {\n          return (\n            <div className=\"section\"  key={i}>\n              <ConditionalEditor {...this.props} conditional={cond} onChange={this.props.onChange(`conditions.${i}`)} />\n            </div>\n          )\n        })}\n      </label>\n    );\n  }\n\n}\n\nclass Or extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): OrConditional);\n    return (\n      <label> Or:\n        {conditional.conditions.map((cond, i) => {\n          return (\n              <div className=\"section\" key={i}>\n                <ConditionalEditor {...this.props} conditional={cond} onChange={this.props.onChange(`conditions.${i}`)} />\n              </div>\n          )\n        })}\n      </label>\n    );\n  }\n\n}\n\nclass AtLeast extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): AtLeastConditional);\n    return (\n      <label> At Least\n        <RIENumber className='editable-text' value={conditional.minimum||0} propName='minimum' change={this.props.onChange('minimum')} />:\n        {conditional.conditions.map((cond, i) => {\n          return (\n            <div className=\"section\" key={i}>\n              <ConditionalEditor {...this.props} conditional={cond} onChange={this.props.onChange(`conditions.${i}`)} />\n            </div>\n          )\n        })}\n      </label>\n    );\n  }\n\n}\n\nclass AtMost extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): AtMostConditional);\n    return (\n      <label> At Most\n        <RIENumber className='editable-text' value={conditional.maximum||0} propName='maximum' change={this.props.onChange('maximum')} />:\n\n        {conditional.conditions.map((cond, i) => {\n          return (\n            <div className=\"section\" key={i}>\n              <ConditionalEditor {...this.props} conditional={cond} onChange={this.props.onChange(`conditions.${i}`)} />\n            </div>\n          )\n        })}\n      </label>\n    );\n  }\n\n}\n\nclass Not extends Component<Props> {\n\n  render() {\n    let conditional = ((this.props.conditional: any): NotConditional);\n    return (\n      <label> Not:\n        <div className=\"section\">\n          <ConditionalEditor {...this.props} conditional={conditional.condition} onChange={this.props.onChange('condition')} />\n        </div>\n      </label>\n    );\n  }\n\n}\n\nexport default ConditionalEditor;\n","// @flow\nimport React, { Component } from 'react';\nimport { RIESelect } from 'riek';\n\nimport type { DirectTransition } from '../../types/Transition';\nimport type { State } from '../../types/State';\n\ntype Props = {\n  options: State[],\n  transition?: DirectTransition,\n  onChange: any\n}\n\nclass DirectTransitionEditor extends Component<Props> {\n  render() {\n    let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\n\n    return (\n      <label>\n        Transition To:\n        <RIESelect className='editable-text' propName='to' value={{id:this.props.transition.to, text:this.props.transition.to}} change={this.props.onChange} options={options} />\n      </label>\n    );\n  }\n}\n\nexport default DirectTransitionEditor;\n","// @flow\nimport React, { Component } from 'react';\nimport { RIESelect, RIEInput, RIENumber } from 'riek';\nimport _ from 'lodash';\n\n\nimport type { DistributedTransition as DistributedTransitionType } from '../../types/Transition';\nimport { getTemplate } from '../../templates/Templates';\nimport type { State } from '../../types/State';\nimport './Transition.css';\n\n\ntype Props = {\n  options: State[],\n  transition?: DistributedTransitionType,\n  onChange: any\n}\n\nclass DistributedTransition extends Component<Props> {\n  render() {\n    let currentValue = [];\n    if (this.props.transition) {\n      currentValue = this.props.transition.transition;\n    }\n    if(!this.props.transition) {\n      return null;\n    }\n    let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\n\n    return (\n      <label>\n        Distributed Transition:\n        {currentValue.map((t, i) => {\n          return <div key={i} className=\"transition-option\">\n            <label>To:\n              <RIESelect className='editable-text' propName='transition' value={{id:t.to, text:t.to}} change={this.props.onChange(`[${i}].transition`)} options={options} />\n            </label>\n            <br/>\n            {this.renderDistribution(t.distribution, i)}\n            <br/>\n            <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\n          </div>\n        })}\n        <a className='editable-text add-button' onClick={() => this.props.onChange(`[${currentValue.length}]`)({val: {id: getTemplate('Transition.Distributed[0]')}})}>+</a>\n        <br/>\n        {this.renderWarning()}\n      </label>\n    );\n  }\n\n  renderDistribution(distribution: mixed, index: number) {\n    let sum = this.props.transition.transition.reduce( (acc, val) => acc + (typeof val.distribution === 'object' ? val.distribution.default : val.distribution),0);\n    let remainder = 0;\n    if(typeof distribution === 'object') {\n      remainder = 1 - (sum - distribution.default);\n      let remainderOption = null\n      if (sum != 1) {\n        remainderOption = <a className='editable-text' onClick={() => this.props.onChange(`[${index}].distribution.default`)({val: remainder})}>(Change to Remainder)</a>\n      }\n      return (\n        <label>\n          Attribute: <RIEInput className='editable-text' value={distribution.attribute} propName='attribute' change={this.props.onChange(`[${index}].distribution.attribute`)} />\n          <br />\n          Default Weight: <RIENumber className='editable-text' value={distribution.default} propName='default' editProps={{step: .01, min: 0, max: 1}} format={this.formatAsPercentage} validate={this.checkInRange} change={this.props.onChange(`[${index}].distribution.default`)} />\n          {remainderOption}\n          <br />\n          <a className='editable-text' onClick={() => this.props.onChange(`[${index}].distribution`)({val: {id: getTemplate('Attribute.UnnamedDistribution')}})}>Change to Unnamed Distribution</a>\n        </label>\n      );\n    } else {\n      remainder = 1 - (sum - distribution);\n      let remainderOption = null\n      if (sum != 1) {\n        remainderOption = <a className='editable-text' onClick={() => this.props.onChange(`[${index}].distribution`)({val: remainder})}>(Change to Remainder)</a>\n      }\n      return (\n        <label> Weight:\n          <RIENumber className='editable-text' value={distribution} propName='distribution' editProps={{step: .01, min: 0, max: 1}} format={this.formatAsPercentage} validate={this.checkInRange} change={this.props.onChange(`[${index}].distribution`)} />\n          {remainderOption}\n          <br />\n          <a className='editable-text' onClick={() => this.props.onChange(`[${index}].distribution`)({val: {id: getTemplate('Attribute.NamedDistribution')}})}>Change to Named Distribution</a>\n        </label>\n      );\n    }\n  }\n\n  renderWarning() {\n    if(!this.props.transition) {\n      return null;\n    }\n    let warn = (this.props.transition.transition.reduce((acc, val) => acc + (typeof val.distribution === 'object' ? val.distribution.default : val.distribution), 0) !== 1);\n    if (warn) {\n      return (\n        <label className='warning'>Weights do not add up to 100%.</label>\n      );\n    }\n  }\n\n  formatAsPercentage(num: number) {\n    return (num * 100) + \"%\";\n  }\n\n  checkInRange(num: number) {\n    return ((num >= 0) && (num <= 1));\n  }\n}\n\nexport default DistributedTransition;\n","// @flow\nimport React, { Component } from 'react';\nimport { RIESelect } from 'riek';\nimport _ from 'lodash';\n\nimport type { ConditionalTransition as ConditionalTransitionType } from '../../types/Transition';\nimport { getTemplate } from '../../templates/Templates';\nimport ConditionalEditor from './Conditional';\nimport type { State } from '../../types/State';\nimport './Transition.css';\n\n\n\ntype Props = {\n  options: State[],\n  transition?: ConditionalTransitionType,\n  onChange: any\n}\n\nclass ConditionalTransition extends Component<Props> {\n\n  swapItems(indexTo,indexFrom) {\n    if(indexTo >= 0 && indexTo < this.props.transition.transition.length){\n\n      let oldEntry = {\n        transition: this.props.transition.transition[indexTo].to,\n        condition: _.clone(this.props.transition.transition[indexTo].condition)\n      };\n\n      let newEntry = {\n        transition: this.props.transition.transition[indexFrom].to,\n        condition: _.clone(this.props.transition.transition[indexFrom].condition)\n      }\n          \n      return () => {\n        this.props.onChange(indexTo)({val: {id: newEntry}});\n        this.props.onChange(indexFrom)({val: {id: oldEntry}});\n      }\n    }\n\n    return () => {};\n  }\n\n  renderUpDown(index: number) {\n  \n    if(this.props.transition && this.props.transition.transition){\n      if(index < this.props.transition.transition.length - 1 && index > 0){\n        return <span>\n            <a className=\"editable-text delete-button\" onClick={this.swapItems(index-1, index)}>move up</a> | \n            <a className=\"editable-text delete-button\" onClick={this.swapItems(index, index+1)}>move down</a>\n          </span>\n      } else if(index < this.props.transition.transition.length - 1){\n        return <a className=\"editable-text delete-button\" onClick={this.swapItems(index, index+1)}>move down</a>\n      } else if(index > 0){\n        return <a className=\"editable-text delete-button\" onClick={this.swapItems(index-1, index)}>move up</a>\n      }\n    }\n  }\n  renderIf(index, isLast){\n    if(!this.props.transition.transition[index].condition && isLast && index !== 0){\n      return <span>\n                Else: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\n                        (add condition)\n                      </a>\n            </span>\n    } else if(!this.props.transition.transition[index].condition){\n      return <span>\n                <a className=\"editable-text delete-button editable-error\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\n                        Add Condition\n                      </a>\n            </span>\n    } else if(index === 0 && !this.props.transition.transition[index].condition){\n      return <span>\n                If: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\n                        (add condition)\n                      </a>\n            </span>\n\n    } else if(index === 0){\n      return <span>If:</span>\n\n    } else if(!isLast){\n      return <span>\n              Else If:\n            </span>\n\n    }else{\n      return <span>\n            Else If: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: null}})}}>\n                (remove condition)\n              </a>\n            </span>\n    }\n  }\n\n  render() {\n    let currentValue = [];\n    if (this.props.transition) {\n      currentValue = this.props.transition.transition;\n    }\n    if(!this.props.transition) {\n      return null;\n    }\n\n    return (\n      <label>\n        Conditional Transition To:\n        {currentValue.map((t, i) => {\n          let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\n          return <div key={i} className='transition-option'>\n            <label>\n              {this.renderIf(i, i === currentValue.length-1)} \n              <ConditionalEditor {...this.props} conditional={t.condition} onChange={this.props.onChange(`${i}.condition`)}/>\n            </label>\n            <br/>\n            <label>\n              Transition To: <RIESelect className='editable-text' propName='to' value={{id:t.to, text:t.to}} change={this.props.onChange(`${i}.transition`)} options={options} />\n            </label>\n            <br/>\n            {this.renderUpDown(i)}\n            <br/>\n            <a className=\"editable-text delete-button\" onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\n\n          </div>\n        })}\n        <a className='editable-text add-button' onClick={() => this.props.onChange(`[${currentValue.length}]`)({val: {id: getTemplate('Transition.Conditional[0]')}})}>+</a>\n\n      </label>\n    );\n  }\n}\n\nexport default ConditionalTransition;\n","// @flow\nimport React, { Component } from 'react';\nimport { RIESelect } from 'riek';\nimport _ from 'lodash';\n\nimport type { ConditionalTransition as ConditionalTransitionType } from '../../types/Transition';\nimport { getTemplate } from '../../templates/Templates';\nimport ConditionalEditor from './Conditional';\nimport DistributedTransitionEditor from './DistributedTransition';\nimport DirectTransitionEditor from './DirectTransition';\nimport type { State } from '../../types/State';\n\nimport './Transition.css';\n\n\n\ntype Props = {\n  options: State[],\n  transition?: ConditionalTransitionType,\n  onChange: any\n}\n\nclass ComplexTransition extends Component<Props> {\n\n  swapItems(indexTo,indexFrom) {\n    if(indexTo >= 0 && indexTo < this.props.transition.transition.length){\n      let oldEntry = {};\n      let newEntry = {};\n\n      if(this.props.transition.transition[indexTo].condition){\n        oldEntry.condition = _.clone(this.props.transition.transition[indexTo].condition)\n      }\n      if(this.props.transition.transition[indexTo].distributions){\n        oldEntry.distributions = _.clone(this.props.transition.transition[indexTo].distributions.map((d) => ({distribution: d.distribution, transition: d.to})))\n      }\n      if(this.props.transition.transition[indexTo].transition.to){\n        oldEntry.transition = this.props.transition.transition[indexTo].transition.to\n      }\n\n      if(this.props.transition.transition[indexFrom].condition){\n        newEntry.condition = _.clone(this.props.transition.transition[indexFrom].condition)\n      }\n      if(this.props.transition.transition[indexFrom].distributions){\n        newEntry.distributions = _.clone(this.props.transition.transition[indexFrom].distributions.map((d) => ({distribution: d.distribution, transition: d.to})))\n      }\n      if(this.props.transition.transition[indexFrom].transition.to){\n        newEntry.transition = this.props.transition.transition[indexFrom].transition.to\n      }\n\n      return () => {\n        this.props.onChange(indexTo)({val: {id: newEntry}});\n        this.props.onChange(indexFrom)({val: {id: oldEntry}});\n      }\n    }\n\n    return () => {};\n  }\n\n  renderUpDown(index: number) {\n  \n    if(this.props.transition && this.props.transition.transition){\n      if(index < this.props.transition.transition.length - 1 && index > 0){\n        return <span>\n            <a className=\"editable-text delete-button\" onClick={this.swapItems(index-1, index)}>move up</a> | \n            <a className=\"editable-text delete-button\" onClick={this.swapItems(index, index+1)}>move down</a>\n          </span>\n      } else if(index < this.props.transition.transition.length - 1){\n        return <a className=\"editable-text delete-button\" onClick={this.swapItems(index, index+1)}>move down</a>\n      } else if(index > 0){\n        return <a className=\"editable-text delete-button\" onClick={this.swapItems(index-1, index)}>move up</a>\n      }\n    }\n  }\n\n  renderIf(index, isLast){\n    if(!this.props.transition.transition[index].condition && isLast && index !==0){\n      return <span>\n                Else: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\n                        (add condition)\n                      </a>\n            </span>\n    } else if(!this.props.transition.transition[index].condition){\n      return <span>\n                <a className=\"editable-text delete-button editable-error\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\n                        Add Condition\n                      </a>\n            </span>\n    } else if(index === 0 && !this.props.transition.transition[index].condition){\n      return <span>\n                If: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\n                        (add condition)\n                      </a>\n            </span>\n\n    } else if(index === 0){\n      return <span>If:</span>\n\n    } else if(!isLast){\n      return <span>\n              Else If:\n            </span>\n\n    }else{\n      return <span>\n            Else If: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: null}})}}>\n                (remove condition)\n              </a>\n            </span>\n    }\n  }\n\n  renderTransition(t, i, isLast){\n\n    let transitionEditor = null;\n\n    if(t.transition.to !== undefined){\n      const newDistributedTransition = {...t, distributions: [{distribution: 1, transition: t.transition.to}]};\n      delete newDistributedTransition.transition;\n      transitionEditor = <div>\n                           <DirectTransitionEditor \n                             transition={t.transition}\n                             options={this.props.options} \n                             onChange={this.props.onChange(`[${i}].transition`)} />\n                           <br/>\n                           <a className=\"editable-text delete-button\" \n                              onClick={()=>{this.props.onChange(`[${i}]`)({val: {id: newDistributedTransition}})}}>Change to Distributed Transition</a>\n                          </div>\n    } else {\n      let nextTransition = 'Initial';\n      if(t.distributions.length > 0){\n        nextTransition = t.distributions[0].to\n      }\n\n      const newDirectTransition = {...t, distributions: [], transition: nextTransition};\n\n      transitionEditor = <div>\n                          <DistributedTransitionEditor \n                             transition={{transition: t.distributions}} \n                             options={this.props.options} \n                             onChange={this.props.onChange(`[${i}].distributions`)} />\n                           <br/>\n                           <a className=\"editable-text delete-button\" \n                              onClick={()=>{this.props.onChange(`[${i}]`)({val: {id: newDirectTransition}})}}>Change to Direct Transition</a>\n                          </div>\n    }\n\n    return <div className='transition-option' key={i}>\n            <label>\n            {this.renderIf(i, isLast)} <ConditionalEditor {...this.props} conditional={t.condition} onChange={this.props.onChange(`${i}.condition`)}/>\n            </label>\n            <br/>\n            <label>\n            {transitionEditor}\n            </label>\n            <br/>\n            {this.renderUpDown(i)}\n            <br/>\n            <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\n          </div>\n  }\n\n  render() {\n    let currentValue = [];\n    if (this.props.transition) {\n      currentValue = this.props.transition.transition;\n    }\n    if(!this.props.transition) {\n      return null;\n    }\n    const states = this.props.options;\n    const options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\n\n    return (\n      <label>\n        Complex Transition:\n\n        {currentValue.map((t, i) => {\n          return this.renderTransition(t, i, i === currentValue.length-1);\n        })}\n\n        <a className='editable-text add-button' onClick={() => this.props.onChange(`[${currentValue.length}]`)({val: {id: getTemplate('Transition.Complex[0]')}})}>+</a>\n\n      </label>\n    );\n  }\n}\n\nexport default ComplexTransition;\n","import React from \"react\";\nimport ReactDataGrid from \"react-data-grid\";\n    \n    function Table({columnHeaders, rows }) {\n        const columns = [];\n        \n        columnHeaders.forEach(function(item){\n            let str = item.replace(/\\s/g, '')\n            let a = {                    \n                key: str,\n                name: str,\n                width: 180,\n            }\n            columns.push(a);\n        })   \n        \n        return (\n        <ReactDataGrid \n            columns={columns}\n            rowGetter={i => rows[i]}\n            rowsCount={rows.length}\n            minHeight={300}\n            />\n        );\n    }\n\nexport default Table;","// @flow\nimport React, { Component } from 'react';\nimport { RIESelect, RIEInput, RIENumber, RIETextArea } from 'riek';\nimport Papa from 'papaparse'\n\nimport { getTemplate } from '../../templates/Templates';\nimport './Transition.css';\nimport Table from './Table'\nimport './TableTransition.css';\nimport { isNumber } from 'util';\n\n\ntype Props = {\n  options: State[],\n  transition?: TableTransitionType,\n  onChange: any\n}\n\nclass TableTransition extends Component<Props> {\n\n  render() {\n    let currentValue = [];\n    let lookupTableName;\n    if (this.props.transition) {\n      this.fixMissingValues();\n      currentValue = this.props.transition.transition;\n      lookupTableName = this.props.transition.lookup_table_name_ModuleBuilder;\n    } else {\n      return null;\n    }\n\n    let buttonText;\n    let displayTable;\n    let displayTableError;\n    \n    if (this.props.transition.viewTable && !this.doesDataHaveInputError()){\n      buttonText = 'Display Editable Text Area';\n      let data = this.parseTextArea(this.props.transition.lookuptable);\n      displayTable = \n        <div className=\"TableTransition-table\">\n          <Table columnHeaders={Object.keys(data[0])} rows={data} />\n        </div>\n    }else{\n      buttonText = 'Display Read Only Table';\n      if (this.props.transition.lookuptable === ''){\n        this.props.onChange(`lookuptable`)({val: 'Enter table'});\n      }else if (isNumber(this.props.transition.lookuptable)){\n        this.props.transition.lookuptable = this.props.transition.lookuptable.toString();\n      }\n      displayTable = \n        <div className='TableTransition-remarks'>\n          <RIETextArea value={this.props.transition.lookuptable} propName='lookuptable' change={this.props.onChange(`lookuptable`)}/>\n        </div>\n    }\n    if (this.doesDataHaveInputError()){\n      displayTableError= <label className='warning'>Invalid table data. The table must have a header row and be separated by commas.</label>\n    }else {\n      let msg = this.checkTable();\n      displayTableError = <label className='warning'>{msg}</label>\n    }\n\n    let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\n    return (\n      <div>\n      <label>\n        Table Transition:\n        {\n          currentValue.map((t, i) => {\n          return <div key={i} className=\"transition-option\">\n            <label>To:\n              <RIESelect className='editable-text' propName='transition' value={{id:t.transition, text:t.transition}} change={this.props.onChange(`transitions[${i}].transition`)} options={options} />\n            </label>\n            <br/>\n            {this.renderDistribution(t.default_probability, i)}\n            <br />\n            <a className='editable-text delete-button' onClick={() => this.props.onChange(`transitions.[${i}]`)({val: {id: null}})}>remove</a>\n          </div>\n        })}\n        <a className='editable-text add-button' onClick={() => this.props.onChange(`transitions[${currentValue.length}]`)({val: {id: getTemplate('Transition.Table.transitions[0]')}})}>+</a>\n        <br/>\n        {this.renderWarning()}\n        <br/>\n        </label>\n        <div>\n          <label>Lookup Table: \n            <RIEInput className='editable-text' value={lookupTableName} propName='lookup_table_name_ModuleBuilder' change={this.props.onChange(`lookup_table_name_ModuleBuilder`)} />\n          </label>\n          <br/>\n          {displayTableError}\n          <br/>\n         <button onClick={() => this.displayTableView()}>{buttonText}</button>\n        <br/> \n        {displayTable}\n      </div>\n      </div>\n    );\n  }\n\n  renderDistribution(distribution: mixed, index: number) {    \n    let sum = this.props.transition.transition.reduce( (acc, val) => acc + val.default_probability, 0);\n    let remainder = 1 - (sum - distribution);\n    let remainderOption = null\n    if (sum !== 1) {\n      remainderOption = <a className='editable-text' onClick={() => this.props.onChange(`transitions[${index}].default_probability`)({val: remainder})}>(Change to Remainder)</a>\n    }\n    return (\n      <label> Default Weight:\n        <RIENumber className='editable-text' value={distribution} propName='default_probability' editProps={{step: .01, min: 0, max: 1}} format={this.formatAsPercentage} validate={this.checkInRange} change={this.props.onChange(`transitions[${index}].default_probability`)} />\n        {remainderOption}\n        </label>\n    );\n  }\n\n  renderWarning() {\n    if(!this.props.transition) {\n      return null;\n    }\n    let warn = (this.props.transition.transition.reduce((acc, val) => acc + (typeof val.default_probability === 'object' ? val.default_probability.default : val.default_probability), 0) !== 1);\n    if (warn) {\n      return (\n        <label className='warning'>Weights do not add up to 100%.</label>\n      );\n    }\n  }\n\n  formatAsPercentage(num: number) {\n    return (num * 100) + \"%\";\n  }\n\n  checkInRange(num: number) {\n    return ((num >= 0) && (num <= 1));\n  }\n\n  parseTextArea(data) {\n    let parsed;\n    if (isNumber(data))\n    {\n      data  = data.toString();\n    }\n    Papa.parse(data, {\n    header: true,\n    complete: function(results) {\n      parsed=results;\n    }\n    });\n\n    return parsed.data;\n  }    \n\n  displayTableView() {        \n    // need to check if the table is correct and that it will be ok being displayed as a table before changing this to true\n    // otherwise the undo take an extra click\n    if (!this.doesDataHaveInputError())\n    {\n      this.props.onChange('viewTable')({val: !this.props.transition.viewTable})\n    }\n  }\n\n  fixMissingValues(){\n    if (this.props.transition.lookuptable === undefined)\n    {\n      this.props.transition.lookuptable = '';\n    }\n    if (this.props.transition.viewTable === undefined)\n    {\n      this.props.transition.viewTable = false;\n    }\n    if (this.props.transition.lookup_table_name_ModuleBuilder === undefined)\n    {\n      if (this.props.transition.transition[0].lookup_table_name !== ''){\n        this.props.transition.lookup_table_name_ModuleBuilder = this.props.transition.transition[0].lookup_table_name;\n      }else{\n        this.props.transition.lookup_table_name_ModuleBuilder = '';\n      }\n    }\n  }\n\n  doesDataHaveInputError(){    \n    let data = this.parseTextArea(this.props.transition.lookuptable);\n    let textOk = !(this.props.transition.lookuptable === 'Enter table' || this.props.transition.lookuptable === '')\n    let parseOk = (data.length > 0 && Object.keys(data[0]).length > 0)\n    if (textOk && parseOk ){\n        return false;\n      } else {\n        return true;\n      } \n  }\n\n  checkTable(){\n    let message = ''\n    // check the last X columns vs X transitions\n    if (this.doesDataHaveInputError()){\n      return message;\n    }\n    let tableColumns = [];\n    let data = this.parseTextArea(this.props.transition.lookuptable);\n    if (data.length > 0){ \n      tableColumns = Object.keys(data[0]);\n    }\n\n    for (let i = 0; i < this.props.transition.transition.length; i++)\n    {\n      let transition = this.props.transition.transition[this.props.transition.transition.length - i - 1].transition;\n      let column = tableColumns[tableColumns.length-i -1];\n      if (transition !== column)\n      {\n        message += 'Invalid columns (table data and transitions to state don\\'t match) '\n        break;\n      }\n    }\n\n    return message;    \n  }\n}\n\nexport default TableTransition;\n","// @flow\nimport React, { Component } from 'react';\nimport type { Transition as TransitionType } from '../../types/Transition';\nimport type { State } from '../../types/State';\nimport DirectTransition from './DirectTransition';\nimport DistributedTransition from './DistributedTransition';\nimport ConditionalTransition from './ConditionalTransition';\nimport ComplexTransition from './ComplexTransition';\nimport TableTransition from './TableTransition';\n\ntype Props = {\n  options: State[],\n  transition?: Transition,\n  onChange: any\n}\n\nclass Transition extends Component<Props> {\n  render() {\n    if(this.props.transition){\n      switch (this.props.transition.type) {\n        case \"Direct\":\n          return <DirectTransition {...this.props} onChange={this.props.onChange('direct_transition')} />\n        case \"Distributed\":\n          return <DistributedTransition {...this.props} onChange={this.props.onChange('distributed_transition')} />\n        case \"Conditional\":\n          return <ConditionalTransition {...this.props} onChange={this.props.onChange('conditional_transition')} />\n        case \"Complex\":\n          return <ComplexTransition {...this.props} onChange={this.props.onChange('complex_transition')} />\n        case \"Table\":\n          return <TableTransition {...this.props} onChange={this.props.onChange('lookup_table_transition')} />\n        case \"None\":\n          return <div> No transition </div>\n        default:\n          return <div> {this.props.transition.type} Transition is not supported at this time </div>\n      }\n    }\n    return <div> No Transition </div>\n  }\n}\n\nexport default Transition;\n","export const BasicTutorial = [\n  {title: \"Create Module\", selector: \".Editor-top-open :nth-child(1)\", text: \"Create a new module\"},\n  {title: \"Open Module\", selector: \".Editor-top-open :nth-child(2)\", text: \"Open a module by selecting Open Module\"},\n  {title: \"Download Module\", selector: \".Editor-top-open :nth-child(3)\", text: \"Download module by selecting Download\"},\n  {title: \"Edit Node\", selector: \"#node_Initial\", text: \"To edit a node you can click on it in the graph\"},\n  {title: \"Module Remarks\", selector: \".ModuleProperties-remarks\", text: \"This is a place to put any remarks or citations for this module.\"},\n  {title: \"Adding a State\", selector: \".navbar-nav :nth-child(4)\", text: \"This will add a new state to the module, it can then be edited like any other state.\"},\n  {title: \"Adding a Structure\", selector: \".navbar-nav :nth-child(5)\", text: \"We have a few commonly used structures, this will allow you to add them to your module. This feature is not yet available.\"},\n]\n\nexport const EditTutorial = [\n  {title: \"Change State Name\", selector: \".State h3\", text: \"This text is editable, you can change the name of this state here.\"},\n  {title: \"Change State Type\", selector: \".State :nth-child(2)\", text: \"You can change the type of this state here, you can find a listing of state types at <a href='https://github.com/synthetichealth/synthea/wiki/Generic-Module-Framework%3A-States' target='_blank'> the wiki </a>.\"},\n  {title: \"State Editor\", selector: \".State-Editor\", text: \"Here is a context aware editor, depending on what your state has it will list the various attributes.\"},\n  {title: \"Delete State\", selector: \"div.State > a.delete-button\", text: \"This will remove the currently selected state from the editor.\"},\n  {title: \"Transition Type\", selector: \".Transition-Type\", text: \"You can change the type of the transition the module has here, <a href='https://github.com/synthetichealth/synthea/wiki/Generic-Module-Framework%3A-Transitions' target='_blank'> here </a> is a list of transition types.\"},\n\n\n]\n","import React from 'react'\nimport './AutoCompleteText.css'\n\nexport default class AutoCompleteText extends React.Component {\n    constructor (props) {\n        super(props);\n        this.handleChange = this.handleChange.bind(this);\n        this.state = {\n            suggestions: [],\n            text: this.props.text\n        }\n    }\n\n    suggestionSelected (value) {\n        this.props.onChange(value); \n        this.setState(() => ({\n            suggestions: [],\n        }));\n    }\n\n    renderSuggestions () {\n        const { suggestions } = this.state;\n        return (\n            <ul>\n                {suggestions.map((item, i) => <li key={i} onClick={() => this.suggestionSelected(item)}>{item}</li>)}\n            </ul>)\n    }\n\n    onFocusGained = (e) => {\n        let value =  e.target.value;\n        const { items } = this.props;\n        let suggestions = []\n        if (!value.match(/^[a-z0-9'-_() ]*$/i) || value.indexOf('\\\\') !== -1 || value.indexOf('*') === 0)\n        {\n            suggestions = ['Invalid Input'];\n        }\n        else \n        {\n            const regex = new RegExp (`^${value}`, 'i');\n            suggestions = items.sort().filter(v => regex.test(v));\n        }\n        \n        this.setState (() => ({suggestions, text: value}));    \n    }\n\n    onSubmitted = (props) => {\n        const timer = setTimeout(() => {\n            let suggestions = [];\n            this.setState (() => ({suggestions}))\n            this.props.onBlur(props); \n          }, 250);\n          return () => clearTimeout(timer);\n        \n    }\n\n    handleChange(event) {\n        const text = event.target.value;\n        this.props.onChange(text); \n        const { items } = this.props;\n        let suggestions = [];\n\n            if (text.match(/^[a-z0-9'-_() ]*$/i) && text.indexOf('\\\\') === -1 && text.indexOf('*') !== 0)\n            {\n                const regex = new RegExp (`^${text.toString()}`, 'i');\n                suggestions = items.sort().filter(v => regex.test(v));\n            }\n            else\n            {\n                suggestions = ['Invalid Input'];\n            }\n            \n            this.setState (() => ({suggestions, text: text}));\n      }\n\n      keyPressed = (event) => {\n        if (event.key === \"Enter\" ) {\n            this.onSubmitted(true);\n        }\n        if (event.key === \"Escape\") {\n            this.onSubmitted(false);\n        }\n      } \n\n    render () {\n        return (\n            <div className=\"AutoCompleteText\" onBlur={this.onSubmitted} >\n                <input value={this.props.text} onChange={this.handleChange} onFocus={this.onFocusGained} onKeyDown={this.keyPressed}  type=\"text\" />\n                {this.renderSuggestions()}\n            </div>\n        )\n    }\n}","export default `3decho\nAGE\nAGE_MONTHS\nAlzheimer\\'s Medication\nBMI\nBreast Cancer\nCF_Complication\nCystic_Fibrosis\nDALY\nER_PR_medication\nER_medication\nEarly menopause due to treatment\nG155D Mutation\nGlucose\nHER2_medication\nLung Cancer\nLung Cancer Condition\nLung Cancer Type\nMDD care plan\nMemory Loss\nMucus\nOTC_Bronchitis_Med\nQALY\nQOLS\nRH_NEG\nSSRI\nSinusitis Condition\nSore Throat Antibiotic\nSore Throat Condition\nSuspected Lung Cancer\nSystolic Blood Pressure\nTriglycerides\nType of Alzheimer\\'s\nUnusual Vaginal Bleeding\nactive_emergency_encounter\nactive_urgent_care_encounter\nactive_wellness_encounter\naddress\nadhd_medication\nadherence\nadherence probability\nadv_drug\nalcoholic\nalcoholism\nallergic_rhinitis\nanemia\nanemia_medication\nanemia_pregnancy\nantibiotic_prescription\narthritis_careplan\nassessment_done\nasthma_careplan\nasthma_condition\nasthma_type\natopic\natrial_fibrillation\natrial_fibrillation_risk\nbirth_city\nbirth_country\nbirth_state\nbirth_type\nbirthdate\nbirthplace\nblindness\nblood_pressure_controlled\nbmi_percentile\nbreast_cancer_ER\nbreast_cancer_HER2\nbreast_cancer_Location\nbreast_cancer_M\nbreast_cancer_N\nbreast_cancer_PR\nbreast_cancer_T\nbreast_cancer_aromatase_inhibitors\nbreast_cancer_chemoCount\nbreast_cancer_condition\nbreast_cancer_init_followup_counter\nbreast_cancer_neoCount\nbreast_cancer_neoMed\nbreast_cancer_survival\nbreast_cancer_tamoxifen\nbreast_cancer_treat_count\nbreast_cancer_triple_negative\nbreast_cancer_years_after_treatment\nbroken_bone\nbronchitis_careplan\nburn_injury\ncardio_risk\ncardiovascular_disease_med_changes\ncardiovascular_procedures\ncause_of_death\nchemoMed\nchemotherapy1\nchemotherapy2\nchf\nckd\ncolorectal_adenoma\ncolorectal_cancer\ncolorectal_cancer_stage\nconcussion_injury\ncontraceptive\ncontraceptive_type\ncopd_variant\ncoronary_heart_disease\ncr_chemo_count\ncurrent_weight_length_percentile\ndermatitis\ndiabetes\ndiabetes_amputation_necessary\ndiabetes_severity\ndiabetes_stage\ndiabetic_eye_damage\ndiabetic_nerve_damage\ndialysis_reason\neducation_level\nend_stage_renal_disease\nethnicity\nfatal_pregnancy_complication\nfibromyalgia_careplan\nfibromyalgia_prescription\nfirst_language\nfirst_name\nfood_allergy\nfood_allergy_careplan\ngender\ngout_careplan\ngout_nsaid\ngunshot_wound\nhomeless\nhomelessness_category\nhyperglycemia\nhyperlipidemia\nhypertension\nhypertension_dx\nhypertension_medication\nhypertension_medication_2\nhypertension_medication_3\nhypertriglyceridemia\nhypothyroidism\nid\nidentifier_drivers\nidentifier_passport\nidentifier_ssn\nimmunizations\nimmunotherapy_counter\nimmunotherapy_status\nincome\ninfertile\ninjury_careplan\ninpatient-count\ninpatient-los\ninstances_of_homelessness\njoint_replacement\nknee_injury\nlaceration_injury\nlast_name\nlast_visit_symptom_total\nleft_ventricular_hypertrophy\nlung_cancer\nlung_cancer_nondiagnosis_counter\nlung_transplant\nlupus_careplan\nlupus_corticosteroid\nmTBI\nmacular_edema\nmaiden_name\nmarital_status\nmdd\nmdd_psych\nmetabolic_syndrome\nmicroalbuminuria\nmiscarriage\nmost-recent-daly\nmost-recent-qaly\nmultiple_birth_status\nname\nname_father\nname_mother\nname_prefix\nname_suffix\nnephropathy\nneuropathy\nnon_low_risk_pregnancy\nnonproliferative_retinopathy\nnumber_of_children\nobesity\noccupation_level\nopioid_addiction\nopioid_addiction_careplan\nopioid_prescription\nosteoarthritis\nosteoporosis\notc_antihistamine\notc_pain_reliever\noutgrew_food_allergies\nprediabetes\npregnancy_birth_sex\npregnancy_careplan\npregnancy_complication\npregnant\nprobability_of_fall_injury\nprobability_of_lung_cancer\nprobability_of_suicide\nproliferative_retinopathy\nprostate_cancer\nproteinuria\nptsd\nptsd_careplan\nquit alcoholism age\nquit alcoholism probability\nquit smoking age\nquit smoking probability\nra_careplan\nrace\nrecurrent_colorectal_adenoma\nretinopathy\nseizure\nseizure_meds\nsexual_orientation\nsexually_active\nsmoker\nsmoking\nsmoking_medication\nsocioeconomic_category\nspinal_injury\nsprain_injury\nssri\nstatin_initial\nstatin_renewal\nstroke_history\nstroke_points\nstroke_risk\nsuicide\nsuicide_attempt\nsuicide_careplan\nsuicide_risk\ntelecom\ntext\nuti\nveteran\nveteran_population_override\nvisit_allergist\nwatchful_waiting\nzip`.split('\\n');","// @flow\nimport React, { Component } from 'react';\nimport { RIESelect, RIEInput, RIENumber, RIEToggle, RIETextArea } from 'riek';\nimport _ from 'lodash';\n\nimport type {\n  State, InitialState, TerminalState, SimpleState,\n  GuardState, DelayState, SetAttributeState, CounterState,\n  CallSubmoduleState, EncounterState, EncounterEndState,\n  ConditionOnsetState, ConditionEndState, AllergyOnsetState,\n  AllergyEndState, MedicationOrderState, MedicationEndState,\n  CarePlanStartState, CarePlanEndState, ProcedureState,\n  VitalSignState, ObservationState, MultiObservationState,\n  DiagnosticReportState, ImagingStudyState, SymptomState,\n  SupplyListState, DeviceState, DeviceEndState, DeathState,\n  VaccineState\n} from '../../types/State';\n\nimport { Code, Codes } from './Code';\nimport { Reaction } from './Reaction';\nimport { Goals } from './Goal';\nimport { SeriesList } from './ImagingStudyAttributes';\nimport ConditionalEditor from './Conditional';\nimport Transition from './Transition';\nimport { getTemplate } from '../../templates/Templates';\nimport { BasicTutorial, EditTutorial } from '../../templates/Tutorial';\nimport AutoCompleteText from './AutoCompleteText';\nimport Attributes from './Attributes.js';\nimport AttributeData from '../analysis/AttributeData.json';\nimport './State.css';\n\ntype Props = {\n  moduleName: string,\n  state: State,\n  otherStates: State[],\n  onChange: any,\n  renameNode: any,\n  copyNode: any,\n  changeType: any,\n  addTransition: any,\n  helpFunction: any,\n  displayAttributes: any\n}\n\ntype Distro = {\n  kind: string,\n  parameters: any,\n  otherToggles: Component\n}\n\nconst unitOfTimeOptions = [\n  {id: 'years', text: 'years'},\n  {id: 'months', text: 'months'},\n  {id: 'weeks', text: 'weeks'},\n  {id: 'days', text: 'days'},\n  {id: 'hours', text: 'hours'},\n  {id: 'minutes', text: 'minutes'},\n  {id: 'seconds', text: 'seconds'}\n];\n\nclass StateEditor extends Component<Props> {\n\n  renderStateType() {\n    let props = {...this.props};\n    props.state.name = props.state.name || 'Unnamed_State';\n    props.onChange = this.props.onChange(`states.${props.state.name}`);\n    switch (this.props.state.type) {\n      case \"Initial\":\n        return <Initial {...props} />\n      case \"Terminal\":\n        return <Terminal {...props} />\n      case \"Simple\":\n        return <Simple {...props} />\n      case \"Guard\":\n        return <Guard {...props} />\n      case \"Delay\":\n        return <Delay {...props} />\n      case \"SetAttribute\":\n        return <SetAttribute {...props} />\n      case \"Counter\":\n        return <Counter {...props} />\n      case \"CallSubmodule\":\n        return <CallSubmodule {...props} />\n      case \"Encounter\":\n        return <Encounter {...props} />\n      case \"EncounterEnd\":\n        return <EncounterEnd {...props} />\n      case \"ConditionOnset\":\n        return <ConditionOnset {...props} />\n      case \"ConditionEnd\":\n        return <ConditionEnd {...props} />\n      case \"AllergyOnset\":\n        return <AllergyOnset {...props} />\n      case \"AllergyEnd\":\n        return <AllergyEnd {...props} />\n      case \"MedicationOrder\":\n        return <MedicationOrder {...props} />\n      case \"MedicationEnd\":\n        return <MedicationEnd {...props} />\n      case \"CarePlanStart\":\n        return <CarePlanStart {...props} />\n      case \"CarePlanEnd\":\n        return <CarePlanEnd {...props} />\n      case \"Procedure\":\n        return <Procedure {...props} />\n      case \"VitalSign\":\n        return <VitalSign {...props} />\n      case \"Observation\":\n        return <Observation {...props} />\n      case \"MultiObservation\":\n        return <MultiObservation {...props} />\n      case \"DiagnosticReport\":\n        return <DiagnosticReport {...props} />\n      case \"ImagingStudy\":\n        return <ImagingStudy {...props} />\n      case \"Symptom\":\n        return <Symptom {...props} />\n      case \"Device\":\n        return <Device {...props} />\n      case \"DeviceEnd\":\n        return <DeviceEnd {...props} />\n      case \"SupplyList\":\n        return <SupplyList {...props} />\n      case \"Death\":\n        return <Death {...props} />\n      case \"Vaccine\":\n        return  <Vaccine {...props} />\n      default:\n        return this.props.state.type\n    }\n  }\n\n  updateRemarks = (el:any) => {\n    const remarks = el.remarks? el.remarks.split(\"\\n\") : null;\n    this.props.onChange(`states.${this.props.state.name}.remarks`)({remarks:{id:remarks}});\n  }\n\n  render() {\n    if(!this.props.state) {\n      return null;\n    }\n\n    let typeOptions = Object.keys(getTemplate('State')).sort().map((k) => {return {id: k, text: k}});\n    const transitionOptions = [\n      {id:\"None\" ,text:\"None\"},\n      {id:\"Direct\" ,text:\"Direct\"},\n      {id:\"Distributed\" ,text:\"Distributed\"},\n      {id:\"Conditional\" ,text:\"Conditional\"},\n      {id:\"Complex\" ,text:\"Complex\"},\n      {id:\"Table\" ,text:\"Table\"}\n    ]\n\n    let remarks = this.props.state.remarks ||\"\";\n    remarks = Array.isArray(remarks)? remarks.join(\"\\n\"): remarks;\n\n    const transitionType = (this.props.state.transition||{}).type;\n    return (\n        <div className=\"State\">\n          <div className='Editor-panel-title'>\n            State Editor\n          </div>\n          <h3><RIEInput className='editable-text' propName={'name'} value={this.props.state.name} change={this.props.renameNode} /></h3>\n          State Type: <RIESelect className='editable-text' value={{id: this.props.state.type, text: this.props.state.type}} propName='type'change={this.props.changeType} options={typeOptions}/>\n          <hr/>\n          <RIETextArea className='editable-text' value={remarks} propName=\"remarks\" change={this.updateRemarks} />\n          <br/>\n          <hr/>\n          <div className=\"State-Editor\">\n            {this.renderStateType()}\n          </div>\n          <br />\n          <hr />\n          <div>\n            <div className=\"Transition-Type\">Transition Type:\n              <RIESelect className='editable-text' value={{id: transitionType, text: transitionType}} propName='transition' change={(e) => this.props.addTransition(e.transition.id)} options={transitionOptions}/>\n            </div>\n          </div>\n          <div className=\"Transition\">\n            <Transition\n              options={this.props.otherStates.sort((a,b) => a.name > b.name? 1 : -1)}\n              transition={this.props.state.transition}\n              onChange={this.props.onChange(`states.${this.props.state.name}`)} />\n          </div>\n          <br/>\n          <a onClick={this.props.helpFunction(EditTutorial)}>Help</a>\n        </div>\n    )\n  }\n\n}\n\nclass Initial extends Component<Props> {\n\n  render() {\n    let state = ((this.props.state: any): InitialState);\n    return (\n      null\n    );\n  }\n\n}\n\nclass Terminal extends Component<Props> {\n\n  render() {\n    let state = ((this.props.state: any): TerminalState);\n    return (\n      null\n    );\n  }\n\n}\n\nclass Simple extends Component<Props> {\n\n  render() {\n    let state = ((this.props.state: any): SimpleState);\n    return (\n      null\n    );\n  }\n\n}\n\nclass Guard extends Component<Props> {\n\n  render() {\n    let state = ((this.props.state: any): GuardState);\n    return (\n      <div>\n        <ConditionalEditor {...this.props} conditional={state.allow} options={this.props.otherStates} onChange={this.props.onChange('allow')} />\n      </div>\n    );\n  }\n\n}\n\nclass Distribution extends Component<Distro> {\n  render() {\n    switch (this.props.kind) {\n      case \"EXACT\":\n        return <Exact {...this.props} onChange={this.props.onChange} />\n      case \"GAUSSIAN\":\n        return <Gaussian {...this.props} onChange={this.props.onChange} />\n      case \"UNIFORM\":\n        return <Uniform {...this.props} onChange={this.props.onChange} />\n      case \"EXPONENTIAL\":\n        return <Exponential {...this.props} onChange={this.props.onChange} />\n    }\n  }\n}\n\nclass Exact extends Component<Distro> {\n  render() {\n    return (\n      <div>\n        Exact Quantity: <RIENumber className='editable-text' value={this.props.parameters.value} propName='value' change={this.props.onChange('parameters.value')} />\n        <br />\n        <a className='editable-text' onClick={() => {this.props.onChange('kind')({val: {id: 'UNIFORM'}}); this.props.onChange('parameters')({val: {id: {high: 20, low: 10}}})}}>Change to Range</a>\n        <br />\n        <a className='editable-text' onClick={() => {this.props.onChange('kind')({val: {id: 'GAUSSIAN'}}); this.props.onChange('parameters')({val: {id: {mean: 10, standardDeviation: 1}}})}}>Change to Gaussian</a>\n        <br />\n        <a className='editable-text' onClick={() => {this.props.onChange('kind')({val: {id: 'EXPONENTIAL'}}); this.props.onChange('parameters')({val: {id: {mean: 10}}})}}>Change to Exponential</a>\n        <br />\n        {this.props.otherToggles}\n      </div>\n    );\n  }\n}\n\nclass Uniform extends Component<Distro> {\n  render() {\n    return (\n      <div>\n        Range Low: <RIENumber className='editable-text' value={this.props.parameters.low} propName='low' change={this.props.onChange('parameters.low')} />\n        <br />\n        Range High: <RIENumber className='editable-text' value={this.props.parameters.high} propName='high' change={this.props.onChange('parameters.high')} />\n        <br />\n        {this.props.round!=null &&\n        <div>Round Result: <RIEToggle value={this.props.round} propName='round' change={this.props.onChange('round')} />\n        <br /></div> }\n        <a className='editable-text' onClick={() => {this.props.onChange('kind')({val: {id: 'EXACT'}}); this.props.onChange('parameters')({val: {id: {value: 10}}})}}>Change to Exact</a>\n        <br />\n        <a className='editable-text' onClick={() => {this.props.onChange('kind')({val: {id: 'GAUSSIAN'}}); this.props.onChange('parameters')({val: {id: {mean: 10, standardDeviation: 1}}})}}>Change to Gaussian</a>\n        <br />\n        <a className='editable-text' onClick={() => {this.props.onChange('kind')({val: {id: 'EXPONENTIAL'}}); this.props.onChange('parameters')({val: {id: {mean: 10}}})}}>Change to Exponential</a>\n        <br />\n        {this.props.otherToggles}\n      </div>\n    );\n  }\n}\n\nclass Gaussian extends Component<Distro> {\n  render() {\n    return (\n      <div>\n        Mean: <RIENumber className='editable-text' value={this.props.parameters.mean} propName='mean' change={this.props.onChange('parameters.mean')} />\n        <br />\n        Standard Deviation: <RIENumber className='editable-text' value={this.props.parameters.standardDeviation} propName='standardDeviation' change={this.props.onChange('parameters.standardDeviation')} />\n        <br />\n        {this.props.round!=null &&\n        <div>Round Result: <RIEToggle value={this.props.round} propName='round' change={this.props.onChange('round')} />\n        <br /></div> }\n        <a className='editable-text' onClick={() => {this.props.onChange('kind')({val: {id: 'EXACT'}}); this.props.onChange('parameters')({val: {id: {value: 10}}})}}>Change to Exact</a>\n        <br />\n        <a className='editable-text' onClick={() => {this.props.onChange('kind')({val: {id: 'UNIFORM'}}); this.props.onChange('parameters')({val: {id: {high: 20, low: 10}}})}}>Change to Range</a>\n        <br />\n        <a className='editable-text' onClick={() => {this.props.onChange('kind')({val: {id: 'EXPONENTIAL'}}); this.props.onChange('parameters')({val: {id: {mean: 10}}})}}>Change to Exponential</a>\n        <br />\n        {this.props.otherToggles}\n      </div>\n    );\n  }\n}\n\nclass Exponential extends Component<Distro> {\n  render() {\n    return (\n      <div>\n        Mean: <RIENumber className='editable-text' value={this.props.parameters.mean} propName='mean' change={this.props.onChange('parameters.mean')} />\n        <br />\n        {this.props.round!=null &&\n        <div>Round Result: <RIEToggle value={this.props.round} propName='round' change={this.props.onChange('round')} />\n        <br /></div> }\n        <a className='editable-text' onClick={() => {this.props.onChange('kind')({val: {id: 'EXACT'}}); this.props.onChange('parameters')({val: {id: {value: 10}}})}}>Change to Exact</a>\n        <br />\n        <a className='editable-text' onClick={() => {this.props.onChange('kind')({val: {id: 'UNIFORM'}}); this.props.onChange('parameters')({val: {id: {high: 20, low: 10}}})}}>Change to Range</a>\n        <br />\n        <a className='editable-text' onClick={() => {this.props.onChange('kind')({val: {id: 'GAUSSIAN'}}); this.props.onChange('parameters')({val: {id: {mean: 10, standardDeviation: 1}}})}}>Change to Gaussian</a>\n        <br />\n        {this.props.otherToggles}\n      </div>\n    );\n  }\n}\n\nclass Delay extends Component<Props> {\n\n  render() {\n    let state = ((this.props.state: any): DelayState);\n    let form;\n    if (this.legacyGMF()) {\n      form = this.renderLegacyExactOrRange();\n    } else {\n      form = this.renderExactOrRange();\n    }\n    return (\n      <div>\n        {form}\n      </div>\n    );\n  }\n\n  renderExactOrRange() {\n    let state = ((this.props.state: any): DelayState);\n    return (\n      <div>\n        <Distribution kind={state.distribution.kind}\n                      parameters={state.distribution.parameters}\n                      onChange={this.props.onChange('distribution')} />\n        Unit: <RIESelect className='editable-text'\n                         value={{id: state.unit, text: state.unit}}\n                         propName=\"unit\"\n                         change={this.props.onChange('unit')}\n                         options={unitOfTimeOptions} />\n        <br />\n      </div>\n    );\n  }\n\n  renderLegacyExactOrRange() {\n    let state = ((this.props.state: any): DelayState);\n    if (state.exact) {\n      return (\n        <div>\n          Exact Quantity: <RIENumber className='editable-text' value={state.exact.quantity} propName='quantity' change={this.props.onChange('exact.quantity')} />\n          <br />\n          Exact Unit: <RIESelect className='editable-text' value={{id: state.exact.unit, text: state.exact.unit}} propName=\"unit\" change={this.props.onChange('exact.unit')} options={unitOfTimeOptions} />\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.RangeWithUnit')}}); this.props.onChange('exact')({val: {id: null}})}}>Change to Range</a>\n          <br />\n        </div>\n      );\n    }\n    else {\n      return (\n        <div>\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\n          <br />\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\n          <br />\n          Range Unit: <RIESelect className='editable-text' value={{id: state.range.unit, text: state.range.unit}} propName=\"unit\" change={this.props.onChange('range.unit')} options={unitOfTimeOptions} />\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.ExactWithUnit')}}); this.props.onChange('range')({val: {id: null}})}}>Change to Exact</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  legacyGMF() {\n    let state = ((this.props.state: any): DelayState);\n    if (state.exact || state.range) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nclass SetAttribute extends Component<Props> {\n  constructor (props) {\n    super(props)\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.state = {\n      value : this.props.state.attribute,\n      lastSubmitted : this.props.state.attribute,\n      displayLabel : true,\n      value_code : this.props.state.value_code\n    }\n  }\n\n  render() {\n    // check for undo/redo\n    if (this.props.state.attribute != this.state.value && this.state.value == this.state.lastSubmitted)\n    {\n      this.fixTextBox();\n    }\n    let state = ((this.props.state: any): SetAttributeState);\n    let displayAttribute;\n    let valueForm;\n    if (this.legacyGMF()) {\n      valueForm = this.renderLegacyValueOrRange();\n    } else {\n      valueForm = this.renderValueContainer()\n    }\n    if (this.state.displayLabel)\n    {\n        const data = AttributeData;\n        let others = [this.props.moduleName];\n        if (data[state.attribute]!= undefined)\n        {\n          Object.keys(data[state.attribute].read).forEach(i => {others.push(i)})\n          Object.keys(data[state.attribute].write).forEach(i => {others.push(i)})\n        }\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\n        others.splice(others.indexOf[this.props.moduleName], 1);\n\n        if (state.attribute === '')\n        {\n          state.attribute = 'text';\n        }\n        if (others.length > 0)\n        {\n          displayAttribute = <span><label className=\"editable-text\" onClick={this.toggleLabel}>{state.attribute}</label>\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\n          </span>\n        }\n        else{\n          displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabel}>{state.attribute}</label>\n        }\n\n    }\n    else\n    {\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\n    }\n    return (\n      <div>\n        Attribute: {displayAttribute}\n        <br/>\n        {valueForm}\n      </div>\n    );\n  }\n\n  legacyGMF() {\n    let state = ((this.props.state: any): SetAttributeState);\n    if (state.range) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  renderValueContainer() {\n    let state = ((this.props.state: any): SetAttributeState);\n    if (state.distribution) {\n      return (\n        <div>\n          <Distribution kind={state.distribution.kind}\n                        round={state.distribution.round}\n                        parameters={state.distribution.parameters}\n                        onChange={this.props.onChange('distribution')} />\n          <br />\n          <a className='editable-text' onClick={() => this.props.onChange('distribution')({val: {id: null}})}>(remove)</a>\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('value')({val: {id: \"text\"}}); this.props.onChange('distribution')({val: {id: null}})}}>Change to Value</a>\n        </div>\n      );\n    } else if (state.value) {\n      let val = state.value;\n      if(typeof val === 'boolean'){\n        val = String(val);\n      }\n      return (\n        <div>\n          Value: <RIEInput className='editable-text' value={val} propName={'value'} change={this.props.onChange('value')} />\n          <br />\n          <a className='editable-text' onClick={() => this.props.onChange('value')({val: {id: null}})}>(remove)</a>\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('distribution')({val: {id: {kind: \"EXACT\", round: false, parameters: {value: 1}}}}); this.props.onChange('value')({val: {id: null}})}}>Change to Distribution</a>\n        </div>\n      );\n    } else if (state.value_code) {\n      return (\n        <div className='section'>\n          <Code code={state.value_code} system={\"LOINC\"} onChange={this.props.onChange('value_code')} />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('value')({val: {id: \"text\"}})}>Add Value</a><br />\n          <a className='editable-text' onClick={() => this.props.onChange('distribution')({val: {id: {kind: \"EXACT\", round: false, parameters: {value: 1}}}})}>Add Distribution</a><br />\n          <a className='editable-text' onClick={() => {this.props.onChange('value_code')({val: {id:  getTemplate('Type.Code.Loinc')}});}}>Add Code</a>\n          <br />\n        </div>\n      );\n    }\n\n  }\n\n  renderLegacyValueOrRange() {\n    let state = ((this.props.state: any): SetAttributeState);\n\n    if (state.value == null && state.range == null) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('value')({val: {id: \"text\"}})}>Add Value</a><br />\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.Range')}})}}>Add Range</a>\n          <br />\n        </div>\n      );\n    } else if (state.value != null) {\n      let val = state.value;\n      if(typeof val === 'boolean'){\n        val = String(val);\n      }\n      return (\n        <div>\n          Value: <RIEInput className='editable-text' value={val} propName={'value'} change={this.props.onChange('value')} />\n          <a className='editable-text' onClick={() => this.props.onChange('value')({val: {id: null}})}>(remove)</a>\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.Range')}}); this.props.onChange('value')({val: {id: null}})}}>Change to Range</a>\n        </div>\n      );\n    } else if (state.range != null) {\n      return (\n        <div className='section'>\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\n          <br />\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\n          <br />\n          <a className='editable-text' onClick={() => this.props.onChange('range')({val: {id: null}})}>(Remove Range)</a>\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('value')({val: {id: 1}}); this.props.onChange('range')({val: {id: null}})}}>Change to Value</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  handleTextChange(value) {\n    this.setState({value: value});\n\n  }\n\n  handleSubmit(save) {\n    if (save && this.props.state.attribute != this.state.value)\n    {\n      this.props.onChange('attribute')({val: this.state.value})\n      this.setState({lastSubmitted: this.state.value})\n    }\n    else {\n      this.setState({value: this.state.lastSubmitted})\n    }\n    this.toggleLabel();\n  }\n\n  fixTextBox() {\n    this.setState({value: this.props.state.attribute});\n    this.setState({lastSubmitted: this.props.state.attribute})\n  }\n\n  toggleLabel = () =>  {\n    this.setState({displayLabel: !this.state.displayLabel});\n  }\n\n}\n\nclass Counter extends Component<Props> {\n  constructor (props) {\n    super(props)\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.state = {\n      value : this.props.state.attribute,//'',\n      lastSubmitted : this.props.state.attribute,\n      displayLabel : true,\n    }\n  }\n\n  render() {\n    // check for undo/redo\n    if (this.props.state.attribute != this.state.value && this.state.value == this.state.lastSubmitted)\n    {\n      this.fixTextBox();\n    }\n    let state = ((this.props.state: any): CounterState);\n    let options = [\n      {id: 'increment', text: 'increment'},\n      {id: 'decrement', text: 'decrement'}\n    ];\n\n    let displayAttribute;\n    if (this.state.displayLabel)\n    {\n        const data = AttributeData;\n        let others = [this.props.moduleName];\n        if (data[state.attribute]!= undefined)\n        {\n          Object.keys(data[state.attribute].read).forEach(i => {others.push(i)})\n          Object.keys(data[state.attribute].write).forEach(i => {others.push(i)})\n        }\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\n        others.splice(others.indexOf[this.props.moduleName], 1);\n\n        if (state.attribute === '')\n        {\n          state.attribute = 'text';\n        }\n        if (others.length > 0)\n        {\n          displayAttribute = <span><label className=\"editable-text\" onClick={this.toggleLabel}>{state.attribute}</label>\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\n          </span>\n        }\n        else{\n          displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabel}>{state.attribute}</label>\n        }\n\n    }\n    else\n    {\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\n    }\n    return (\n      <div>\n        Attribute: {displayAttribute}\n        <br/>\n        Action: <RIESelect className='editable-text' value={{id: state.action, text: state.action}} propName=\"action\" change={this.props.onChange('action')} options={options} />\n        <br/>\n        Amount: <RIENumber className='editable-text' value={state.amount || 1} propName='amount' change={this.props.onChange('amount')} />\n      </div>\n    );\n  }\n  handleTextChange(value) {\n    this.setState({value: value});\n\n  }\n\n  handleSubmit(save) {\n    if (save && this.props.state.attribute != this.state.value)\n    {\n      this.props.onChange('attribute')({val: this.state.value})\n      this.setState({lastSubmitted: this.state.value})\n    }\n    else {\n      this.setState({value: this.state.lastSubmitted})\n    }\n    this.toggleLabel();\n  }\n\n  fixTextBox() {\n    this.setState({value: this.props.state.attribute});\n    this.setState({lastSubmitted: this.props.state.attribute})\n  }\n\n  toggleLabel = () =>  {\n    this.setState({displayLabel: !this.state.displayLabel});\n  }\n\n}\n\nclass CallSubmodule extends Component<Props> {\n\n  render() {\n    let state = ((this.props.state: any): CallSubmoduleState);\n    return (\n      <div>\n        Submodule: <RIEInput className='editable-text' value={state.submodule} propName={'submodule'} change={this.props.onChange('submodule')} />\n        <br/>\n        <a href={`${window.location.href.replace(window.location.hash,\"\")}#${state.submodule}`} target=\"_blank\">View Submodule</a>\n\n      </div>\n    );\n  }\n\n}\n\nclass Encounter extends Component<Props> {\n\n  constructor (props) {\n    super(props)\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.changeEncounterClass = this.changeEncounterClass.bind(this);\n    this.state = {\n      value : this.props.state.reason,\n      lastSubmitted : this.props.state.reason,\n      displayLabel : true,\n    }\n  }\n\n  render() {\n    // check for undo/redo\n    if (this.props.state.reason != this.state.value && this.state.value == this.state.lastSubmitted)\n    {\n      this.fixTextBox();\n    }\n    let state = ((this.props.state: any): EncounterState);\n    let options = [\n      {id: 'emergency', text: 'emergency'},\n      {id: 'inpatient', text: 'inpatient'},\n      {id: 'ambulatory', text: 'ambulatory'},\n      {id: 'urgentcare', text: 'urgentcare'},\n      {id: 'hospice', text: 'hospice'},\n      {id: 'home', text: 'home'},\n      {id: 'snf', text: 'snf'},\n      {id: 'virtual', text: 'virtual'}\n    ];\n    if (state.wellness == null) {\n      return (\n        <div>\n          {this.renderWellness()}\n          Encounter Class: <RIESelect className='editable-text' value={{id: state.encounter_class, text: state.encounter_class}} propName=\"encounter_class\" change={this.changeEncounterClass} options={options} />\n          <br />\n          {this.renderReason()}\n          <div className='section'>\n            Codes\n            <br />\n            <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\n          </div>\n          {this.renderTelemedicinePossibility()}\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          {this.renderWellness()}\n          {this.renderReason()}\n          {this.renderTelemedicinePossibility()}\n        </div>\n      );\n    }\n\n  }\n\n  renderWellness() {\n    let state = ((this.props.state: any): EncounterState);\n    if (state.wellness == null) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => {this.props.onChange('wellness')({val: {id: true}}); this.props.onChange('codes')({val: {id: null}}); this.props.onChange('encounter_class')({val: {id: null}})}}>Add Wellness</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Wellness\n          <a className='editable-text' onClick={() => {this.props.onChange('wellness')({val: {id: null}}); this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}}>(remove)</a>\n          <br />\n        </div>\n      );\n    }\n\n  }\n\n  changeEncounterClass(value) {\n    this.props.onChange('encounter_class')(value);\n    if (value.encounter_class.text == 'virtual' &&\n        this.props.state.telemedicine_possibility != 'always') {\n      this.props.onChange('telemedicine_possibility')({telemedicine_possibility: 'always'});\n    }\n  }\n\n  renderTelemedicinePossibility() {\n    let state = ((this.props.state: any): EncounterState);\n    let options = [\n      {id: 'none', text: 'none'},\n      {id: 'possible', text: 'possible'},\n      {id: 'always', text: 'always'}\n    ];\n    return (\n      <div>\n        Telemedicine Possibility: <RIESelect className='editable-text' value={{id: state.telemedicine_possibility, text: state.telemedicine_possibility}} propName=\"telemedicine_possibility\" change={this.props.onChange('telemedicine_possibility')} options={options} />\n      </div>\n    )\n  }\n\n  renderReason() {\n    let state = ((this.props.state: any): EncounterState);\n    if (!state.reason) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: \"Select Condition/Enter Attribute\"}})}>Add Reason</a>\n          <br />\n        </div>\n      );\n    } else {\n      let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\n      let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\n      let inputAttribute = [{id: \"*Input Attribute*\", text: \"*Input Attribute*\"}];\n      let allOptions = options.concat(inputAttribute);\n      let reason = <RIESelect className='editable-text' value={{id: state.reason, text: state.reason}} propName={'reason'}  change={this.props.onChange('reason')} options={allOptions} />\n      if (state.reason === \"*Input Attribute*\") {\n        let displayAttribute;\n        if (this.state.displayLabel)\n        {\n            const data = AttributeData;\n            let others = [this.props.moduleName];\n            if (data[state.reason]!= undefined)\n            {\n              Object.keys(data[state.reason].read).forEach(i => {others.push(i)})\n              Object.keys(data[state.reason].write).forEach(i => {others.push(i)})\n            }\n            others = others.filter((x, i, a) => a.indexOf(x) == i)\n            others.splice(others.indexOf[this.props.moduleName], 1);\n\n            if (state.reason === '')\n            {\n              state.reason = 'text';\n            }\n            if (others.length > 0)\n            {\n              displayAttribute = <span><label className=\"editable-text\" onClick={this.toggleLabel}>{state.reason}</label>\n              <button classNameName=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\n              </span>\n            }\n            else{\n              displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabel}>{state.reason}</label>\n            }\n\n        }\n        else\n        {\n         displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\n        }\n        return (\n          <div>\n            Reason: {reason}\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\n            <br/>\n            Attribute: {displayAttribute}\n            <br/>\n          </div>\n        );\n      } else {\n        return (\n          <div>\n            Reason: {reason}\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\n            <br/>\n          </div>\n        );\n      }\n    }\n  }\n  handleTextChange(value) {\n    this.setState({value: value});\n\n  }\n\n  handleSubmit(save) {\n    if (save && this.props.state.reason != this.state.value)\n    {\n      this.props.onChange('reason')({val: this.state.value})\n      this.setState({lastSubmitted: this.state.value})\n    }\n    else {\n      this.setState({value: this.state.lastSubmitted})\n    }\n    this.toggleLabel();\n  }\n\n  fixTextBox() {\n    this.setState({value: this.props.state.reason});\n    this.setState({lastSubmitted: this.props.state.reason})\n  }\n\n  toggleLabel = () =>  {\n    this.setState({displayLabel: !this.state.displayLabel});\n  }\n\n\n}\n\nclass EncounterEnd extends Component<Props> {\n\n  render() {\n    let state = ((this.props.state: any): EncounterEndState);\n    return (\n      <div>\n        {this.renderDischargeDisposition()}\n      </div>\n    );\n  }\n\n  renderDischargeDisposition() {\n    let state = ((this.props.state: any): EncounterEndState);\n    if (!state.discharge_disposition) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('discharge_disposition')({val: {id: getTemplate('Type.Code.Nubc')}})}>Add Discharge Disposition</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <Code code={state.discharge_disposition} system={\"NUBC\"} onChange={this.props.onChange('discharge_disposition')} />\n          <a className='editable-text' onClick={() => this.props.onChange('discharge_disposition')({val: {id: null}})}>Remove Discharge Disposition</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n}\n\nclass ConditionOnset extends Component<Props> {\n  constructor (props) {\n    super(props)\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.state = {\n      value : this.props.state.assign_to_attribute,//'',\n      lastSubmitted : this.props.state.assign_to_attribute,\n      displayLabel : true,\n    }\n  }\n\n  render() {\n    // check for undo/redo\n    if (this.props.state.assign_to_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\n    {\n      this.fixTextBox();\n    }\n\n    let state = ((this.props.state: any): ConditionOnsetState);\n    return (\n      <div>\n        {this.renderTargetEncounter()}\n        {this.renderAssignToAttribute()}\n        <div className='section'>\n          Codes\n          <br />\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\n        </div>\n      </div>\n    );\n  }\n\n  renderTargetEncounter() {\n    let state = ((this.props.state: any): ConditionOnsetState);\n    let encounters = this.props.otherStates.filter((s) => {return s.type === \"Encounter\"});\n    let options = encounters.map((e) => {return {id: e.name, text: e.name}});\n    let initial_value = (state.target_encounter ? {id: state.target_encounter, text: state.target_encounter} : options[0]);\n    let targetEncounter = <RIESelect className='editable-text' value={initial_value} propName={'target_encounter'}  change={this.props.onChange('target_encounter')} options={options} />\n    if (state.target_encounter) {\n      return (\n        <div>\n          Target Encounter: {targetEncounter}\n          <br/>\n          <a className='editable-text' onClick={() => this.props.onChange('target_encounter')({val: {id: null}})}>(remove to diagnose immediately)</a>\n          <br/>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('target_encounter')({val: initial_value})}>Add Target Encounter</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  renderAssignToAttribute() {\n    let state = ((this.props.state: any): ConditionOnsetState);\n    let displayAttribute;\n    if (this.state.displayLabel)\n    {\n        const data = AttributeData;\n        let others = [this.props.moduleName];\n        if (data[state.assign_to_attribute]!= undefined)\n        {\n          Object.keys(data[state.assign_to_attribute].read).forEach(i => {others.push(i)})\n          Object.keys(data[state.assign_to_attribute].write).forEach(i => {others.push(i)})\n        }\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\n        others.splice(others.indexOf[this.props.moduleName], 1);\n\n        if (others.length > 0)\n        {\n          displayAttribute = <span><label className=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\n          </span>\n        }\n        else{\n          displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\n        }\n\n    }\n    else\n    {\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\n    }\n    if (!state.assign_to_attribute) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Assign to Attribute: {displayAttribute}\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  handleTextChange(value) {\n    this.setState({value: value});\n\n  }\n\n  handleSubmit(save) {\n    if (save && this.props.state.assign_to_attribute != this.state.value)\n    {\n      this.props.onChange('assign_to_attribute')({val: this.state.value})\n      this.setState({lastSubmitted: this.state.value})\n    }\n    else {\n      this.setState({value: this.state.lastSubmitted})\n    }\n    this.toggleLabel();\n  }\n\n  fixTextBox() {\n    this.setState({value: this.props.state.assign_to_attribute});\n    this.setState({lastSubmitted: this.props.state.assign_to_attribute})\n  }\n  toggleLabel = () =>  {\n    this.setState({displayLabel: !this.state.displayLabel});\n  }\n\n}\n\n\nclass ConditionEnd extends Component<Props> {\n  constructor (props) {\n    super(props)\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.state = {\n      value : this.props.state.referenced_by_attribute,\n      lastSubmitted : this.props.state.referenced_by_attribute,\n      displayLabel : true,\n    }\n  }\n\n  render() {\n    // check for undo/redo\n    if (this.props.state.referenced_by_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\n    {\n      this.fixTextBox();\n    }\n    let state = ((this.props.state: any): ConditionEndState);\n    return (\n      <div>\n        {this.renderConditionOnset()}\n        {this.renderReferencedByAttribute()}\n        {this.renderCodes()}\n      </div>\n    );\n  }\n\n  renderConditionOnset() {\n    let state = ((this.props.state: any): ConditionEndState);\n    let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\n    let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\n    let initial_value = (state.condition_onset ? {id: state.condition_onset, text: state.condition_onset} : options[0]);\n    if (!state.condition_onset) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('condition_onset')({val: initial_value})}>Add Condition Onset</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Condition Onset: <RIESelect className='editable-text' value={initial_value} propName={'condition_onset'}  change={this.props.onChange('condition_onset')} options={options} />\n          <a className='editable-text' onClick={() => this.props.onChange('condition_onset')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  renderReferencedByAttribute() {\n    let state = ((this.props.state: any): ConditionEndState);\n    let displayAttribute;\n    if (this.state.displayLabel)\n    {\n        const data = AttributeData;\n        let others = [this.props.moduleName];\n        if (data[state.referenced_by_attribute]!= undefined)\n        {\n          Object.keys(data[state.referenced_by_attribute].read).forEach(i => {others.push(i)})\n          Object.keys(data[state.referenced_by_attribute].write).forEach(i => {others.push(i)})\n        }\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\n        others.splice(others.indexOf[this.props.moduleName], 1);\n\n        if (others.length > 0)\n        {\n          displayAttribute = <span><label className=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\n          </span>\n        }\n        else{\n          displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\n        }\n\n    }\n    else\n    {\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\n    }\n    if (!state.referenced_by_attribute) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Referenced by Attribute: {displayAttribute}\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  renderCodes() {\n    let state = ((this.props.state: any): ConditionEndState);\n    if (!state.codes) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div className='section'>\n          Codes\n          <br />\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  handleTextChange(value) {\n    this.setState({value: value});\n\n  }\n\n  handleSubmit(save) {\n    if (save && this.props.state.referenced_by_attribute != this.state.value)\n    {\n      this.props.onChange('referenced_by_attribute')({val: this.state.value})\n      this.setState({lastSubmitted: this.state.value})\n    }\n    else {\n      this.setState({value: this.state.lastSubmitted})\n    }\n    this.toggleLabel();\n  }\n\n  fixTextBox() {\n    this.setState({value: this.props.state.referenced_by_attribute});\n    this.setState({lastSubmitted: this.props.state.referenced_by_attribute})\n  }\n  toggleLabel = () =>  {\n    this.setState({displayLabel: !this.state.displayLabel});\n  }\n\n}\n\nclass AllergyOnset extends Component<Props> {\n  constructor (props) {\n    super(props)\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.state = {\n      value : this.props.state.assign_to_attribute,//'',\n      lastSubmitted : this.props.state.assign_to_attribute,\n      displayLabel : true,\n    }\n  }\n\n  render() {\n    // check for undo/redo\n    if (this.props.state.assign_to_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\n    {\n      this.fixTextBox();\n    }\n    let state = ((this.props.state: any): AllergyOnsetState);\n    let encounters = this.props.otherStates.filter((s) => {return s.type === \"Encounter\"});\n    let options = encounters.map((e) => {return {id: e.name, text: e.name}});\n    options.unshift({id: '', text: ''})\n    let initial_value = (state.target_encounter ? {id: state.target_encounter, text: state.target_encounter} : options[0]);\n    let targetEncounter = <RIESelect className='editable-text' value={initial_value} propName={'target_encounter'}  change={this.props.onChange('target_encounter')} options={options} />\n    return (\n      <div>\n        Target Encounter: {targetEncounter}\n        <br />\n        {this.renderAssignToAttribute()}\n        <div className='section'>\n          Codes\n          <br />\n          { state.category == \"medication\" ? <Codes codes={state.codes} system={\"RxNorm\"} onChange={this.props.onChange('codes')} /> : <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} /> }\n        </div>\n        <div>\n          <label>Allergy Type:\n            <RIESelect className='editable-text'\n              propName='allergy_type'\n              value={{id: state.allergy_type, text: state.allergy_type}}\n              change={this.props.onChange('allergy_type')}\n              options={[{id:'allergy', text: 'Allergy'}, {id:'intolerance', text: 'Intolerance'}]}\n            />\n          </label>\n        </div>\n        <div>\n          <label>Category:\n            <RIESelect className='editable-text'\n              propName='category'\n              value={{id: state.category, text: state.category}}\n              change={this.props.onChange('category')}\n              options={[{id:'food', text: 'Food'},\n                        {id:'medication', text: 'Medication'},\n                        {id:'environment', text: 'Environment'}]}\n            />\n          </label>\n        </div>\n        <div className='section'>\n        Reactions:\n        {this.renderReactions(state)}\n        <a className='editable-text' onClick={() => this.props.onChange(`reactions[${this.props.state.reactions.length}]`)({val: {id: {reaction: {code: \"1234\", system: \"SNOMED-CT\", display: \"SNOMED Code\"}, possible_severities: [{level: \"mild\", value: 1}]}}})}>+</a>\n        </div>\n      </div>\n    );\n  }\n\n  renderReactions(state) {\n    if(state.reactions == null) {\n      return null;\n    } else {\n      return state.reactions.map((r, i) => {\n          return (\n            <div className='section' key={i}>\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`reactions[${i}]`)({val: {id: null}})}>remove</a>\n              <Reaction reaction={r} onChange={this.props.onChange(`reactions[${i}]`)}/>\n            </div>\n          );\n      });\n    }\n  }\n\n  renderAssignToAttribute() {\n    let state = ((this.props.state: any): AllergyOnsetState);\n    let displayAttribute;\n    if (this.state.displayLabel)\n    {\n        const data = AttributeData;\n        let others = [this.props.moduleName];\n        if (data[state.assign_to_attribute]!= undefined)\n        {\n          Object.keys(data[state.assign_to_attribute].read).forEach(i => {others.push(i)})\n          Object.keys(data[state.assign_to_attribute].write).forEach(i => {others.push(i)})\n        }\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\n        others.splice(others.indexOf[this.props.moduleName], 1);\n\n        if (others.length > 0)\n        {\n          displayAttribute = <span><label className=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\n          </span>\n        }\n        else{\n          displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\n        }\n\n    }\n    else\n    {\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\n    }\n    if (!state.assign_to_attribute) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Assign to Attribute: {displayAttribute}\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  handleTextChange(value) {\n    this.setState({value: value});\n\n  }\n\n  handleSubmit(save) {\n    if (save && this.props.state.assign_to_attribute != this.state.value)\n    {\n      this.props.onChange('assign_to_attribute')({val: this.state.value})\n      this.setState({lastSubmitted: this.state.value})\n    }\n    else {\n      this.setState({value: this.state.lastSubmitted})\n    }\n    this.toggleLabel();\n  }\n\n  fixTextBox() {\n    this.setState({value: this.props.state.assign_to_attribute});\n    this.setState({lastSubmitted: this.props.state.assign_to_attribute})\n  }\n  toggleLabel = () =>  {\n    this.setState({displayLabel: !this.state.displayLabel});\n  }\n\n}\n\nclass AllergyEnd extends Component<Props> {\n  constructor (props) {\n    super(props)\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.state = {\n      value : this.props.state.referenced_by_attribute,\n      lastSubmitted : this.props.state.referenced_by_attribute,\n      displayLabel : true,\n    }\n  }\n\n  render() {\n    // check for undo/redo\n    if (this.props.state.referenced_by_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\n    {\n      this.fixTextBox();\n    }\n    let state = ((this.props.state: any): AllergyEndState);\n    return (\n      <div>\n        {this.renderAllergyOnset()}\n        {this.renderReferencedByAttribute()}\n        {this.renderCodes()}\n      </div>\n    );\n  }\n\n  renderAllergyOnset() {\n    let state = ((this.props.state: any): AllergyEndState);\n    let allergyOnset = this.props.otherStates.filter((s) => {return s.type === \"AllergyOnset\"});\n    let options = allergyOnset.map((e) => {return {id: e.name, text: e.name}});\n    let initial_value = (state.allergy_onset ? {id: state.allergy_onset, text: state.allergy_onset} : options[0]);\n    if (!state.allergy_onset) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('allergy_onset')({val: initial_value})}>Add Allergy Onset</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Allergy Onset: <RIESelect className='editable-text' value={initial_value} propName={'allergy_onset'}  change={this.props.onChange('allergy_onset')} options={options} />\n          <a className='editable-text' onClick={() => this.props.onChange('allergy_onset')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  renderReferencedByAttribute() {\n    let state = ((this.props.state: any): AllergyEndState);\n    let displayAttribute;\n    if (this.state.displayLabel)\n    {\n        const data = AttributeData;\n        let others = [this.props.moduleName];\n        if (data[state.referenced_by_attribute]!= undefined)\n        {\n          Object.keys(data[state.referenced_by_attribute].read).forEach(i => {others.push(i)})\n          Object.keys(data[state.referenced_by_attribute].write).forEach(i => {others.push(i)})\n        }\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\n        others.splice(others.indexOf[this.props.moduleName], 1);\n\n        if (others.length > 0)\n        {\n          displayAttribute = <span><label className=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\n          </span>\n        }\n        else{\n          displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\n        }\n\n    }\n    else\n    {\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\n    }\n    if (!state.referenced_by_attribute) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Referenced by Attribute: {displayAttribute}\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  renderCodes() {\n    let state = ((this.props.state: any): AllergyEndState);\n    if (!state.codes) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div className='section'>\n          Codes\n          <br />\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  handleTextChange(value) {\n    this.setState({value: value});\n\n  }\n\n  handleSubmit(save) {\n    if (save && this.props.state.referenced_by_attribute != this.state.value)\n    {\n      this.props.onChange('referenced_by_attribute')({val: this.state.value})\n      this.setState({lastSubmitted: this.state.value})\n    }\n    else {\n      this.setState({value: this.state.lastSubmitted})\n    }\n    this.toggleLabel();\n  }\n\n  fixTextBox() {\n    this.setState({value: this.props.state.referenced_by_attribute});\n    this.setState({lastSubmitted: this.props.state.referenced_by_attribute})\n  }\n  toggleLabel = () =>  {\n    this.setState({displayLabel: !this.state.displayLabel});\n  }\n\n}\n\nclass MedicationOrder extends Component<Props> {\n  constructor (props) {\n    super(props)\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleTextChangeReason = this.handleTextChangeReason.bind(this);\n    this.handleSubmitReason = this.handleSubmitReason.bind(this);\n    this.state = {\n      value : this.props.state.assign_to_attribute,\n      lastSubmitted : this.props.state.assign_to_attribute,\n      displayLabel : true,\n      valueReason : this.props.state.reason,\n      lastSubmittedReason : this.props.state.reason,\n      displayLabelReason : true,\n    }\n  }\n\n  render() {\n    // check for undo/redo\n    if (this.props.state.assign_to_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\n    {\n      this.fixTextBox();\n    }\n    let state = ((this.props.state: any): MedicationOrderState);\n    return (\n      <div>\n        {this.renderAssignToAttribute()}\n        {this.renderReason()}\n        <div className='section'>\n          Codes\n          <br />\n          <Codes codes={state.codes} system={\"RxNorm\"} onChange={this.props.onChange('codes')} />\n          <br />\n        </div>\n        {this.renderPrescription()}\n        {this.renderChronicMed()}\n        {this.renderCreateAdministration()}\n      </div>\n    );\n  }\n\n  renderChronicMed() {\n    let state = ((this.props.state: any): MedicationOrder);\n    return (\n      <div>\n        <input type=\"checkbox\" checked={state.chronic} onChange={() => this.props.onChange('chronic')({ val: { id: !state.chronic } })} /> Chronic Medication.\n      </div>\n    );\n  }\n\n  renderCreateAdministration() {\n    let state = ((this.props.state: any): MedicationOrder);\n    return (\n      <div>\n        <input type=\"checkbox\" checked={state.administration} onChange={() => this.props.onChange('administration')({ val: { id: !state.administration } })} /> Administration of the medication.\n      </div>\n    );\n  }\n\n  renderAssignToAttribute() {\n    let state = ((this.props.state: any): ConditionOnsetState);\n    let displayAttribute;\n    if (this.state.displayLabel)\n    {\n        const data = AttributeData;\n        let others = [this.props.moduleName];\n        if (data[state.assign_to_attribute]!= undefined)\n        {\n          Object.keys(data[state.assign_to_attribute].read).forEach(i => {others.push(i)})\n          Object.keys(data[state.assign_to_attribute].write).forEach(i => {others.push(i)})\n        }\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\n        others.splice(others.indexOf[this.props.moduleName], 1);\n\n        if (others.length > 0)\n        {\n          displayAttribute = <span><label className=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\n          </span>\n        }\n        else{\n          displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\n        }\n\n    }\n    else\n    {\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\n    }\n    if (!state.assign_to_attribute) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Assign to Attribute: {displayAttribute}\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  renderReason() {\n    let state = ((this.props.state: any): MedicationOrder);\n    if (!state.reason) {\n      if( this.state.valueReason !== 'text')\n      {\n        this.setState({valueReason: 'text'});\n      }\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: \"Select Condition/Enter Attribute\"}})}>Add Reason</a>\n          <br />\n        </div>\n      );\n    } else {\n      let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\n      let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\n      let inputAttribute = [{id: \"*Input Attribute*\", text: \"*Input Attribute*\"}];\n      let allOptions = options.concat(inputAttribute);\n      let reason = <RIESelect className='editable-text' value={{id: state.reason, text: state.reason}} propName={'reason'}  change={this.props.onChange('reason')} options={allOptions} />\n      if (state.reason === \"*Input Attribute*\") {\n        let displayAttribute;\n        if (this.state.displayLabelReason)\n        {\n          displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabelReason}>{state.reason}</label>\n\n        }\n        else\n        {\n         displayAttribute = <AutoCompleteText onChange={this.handleTextChangeReason} onBlur={this.handleSubmitReason} text={this.state.valueReason} items={Attributes}/>\n        }\n        return (\n          <div>\n            Reason: {reason}\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\n            <br/>\n            Attribute: {displayAttribute}\n            <br/>\n          </div>\n        );\n      } else {\n        return (\n          <div>\n            Reason: {reason}\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\n            <br/>\n          </div>\n        );\n      }\n    }\n  }\n\n  renderPrescription() {\n    let state = ((this.props.state: any): MedicationOrderState);\n    if (!state.prescription) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('prescription')({val: {id: getTemplate('Attribute.Prescription')}})}>Add Prescription</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div className='section'>\n          Prescription\n          {this.renderRefills()}\n          {this.renderAsNeeded()}\n          {this.renderDosage()}\n          {this.renderDuration()}\n          {this.renderInstructions()}\n          <a className='editable-text' onClick={() => this.props.onChange('prescription')({val: {id: null}})}> Remove Prescription</a>\n        </div>\n      );\n    }\n  }\n\n  renderRefills() {\n    let state = ((this.props.state: any): MedicationOrderState);\n    if (!state.prescription.refills) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.refills')({val: {id: 1}})}>Add Prescription Refills</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Prescription Refills: <RIENumber className='editable-text' value={state.prescription.refills} propName={'refills'}  change={this.props.onChange('prescription.refills')} />\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.refills')({val: {id: null}})}>(remove)</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  renderAsNeeded() {\n    let state = ((this.props.state: any): MedicationOrderState);\n    if (state.prescription.as_needed == null) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.as_needed')({val: {id: true}})}>Add Prescription As Needed</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Prescription As Needed\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.as_needed')({val: {id: null}})}>(remove)</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  renderDosage() {\n    let state = ((this.props.state: any): MedicationOrderState);\n    if (!state.prescription.dosage) {\n      return null;\n    }\n    return (\n      <div className='section'>\n        Dosage Amount: <RIENumber className='editable-text' value={state.prescription.dosage.amount} propName={'amount'}  change={this.props.onChange('prescription.dosage.amount')} />\n        <br />\n        Dosage Frequency: <RIENumber className='editable-text' value={state.prescription.dosage.frequency} propName={'frequency'}  change={this.props.onChange('prescription.dosage.frequency')} />\n        <br />\n        Dosage Period: <RIENumber className='editable-text' value={state.prescription.dosage.period} propName={'period'}  change={this.props.onChange('prescription.dosage.period')} />\n        <br />\n        Dosage Unit: <RIESelect className='editable-text' value={{id: state.prescription.dosage.unit, text: state.prescription.dosage.unit}} propName=\"unit\" change={this.props.onChange('prescription.dosage.unit')} options={unitOfTimeOptions} />\n        <br />\n      </div>\n    );\n  }\n\n  renderDuration() {\n    let state = ((this.props.state: any): MedicationOrderState);\n    if (!state.prescription.duration) {\n      return null;\n    }\n    return (\n      <div className='section'>\n        Duration Quantity: <RIENumber className='editable-text' value={state.prescription.duration.quantity} propName={'quantity'}  change={this.props.onChange('prescription.duration.quantity')} />\n        <br />\n        Duration Unit: <RIESelect className='editable-text' value={{id: state.prescription.duration.unit, text: state.prescription.duration.unit}} propName=\"unit\" change={this.props.onChange('prescription.duration.unit')} options={unitOfTimeOptions} />\n        <br />\n      </div>\n    );\n  }\n\n  renderInstructions() {\n    let state = ((this.props.state: any): MedicationOrderState);\n    if (!state.prescription.instructions) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.instructions')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Instructions</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div className='section'>\n          Instructions\n          <br />\n          <Codes codes={state.prescription.instructions} system={\"SNOMED-CT\"} onChange={this.props.onChange('prescription.instructions')} />\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.instructions')({val: {id: null}})}>Remove Instructions</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  handleTextChange(value) {\n    this.setState({value: value});\n  }\n\n  handleSubmit(save) {\n    if (save && this.props.state.assign_to_attribute != this.state.value)\n    {\n      this.props.onChange('assign_to_attribute')({val: this.state.value})\n      this.setState({lastSubmitted: this.state.value})\n    }\n    else {\n      this.setState({value: this.state.lastSubmitted})\n    }\n    this.toggleLabel();\n  }\n\n  fixTextBox() {\n    this.setState({value: this.props.state.assign_to_attribute});\n    this.setState({lastSubmitted: this.props.state.assign_to_attribute})\n  }\n\n  toggleLabel = () =>  {\n    this.setState({displayLabel: !this.state.displayLabel});\n  }\n\n  handleTextChangeReason(value) {\n    this.setState({valueReason: value});\n\n  }\n\n  handleSubmitReason(save) {\n    if (save && this.props.state.reason != this.state.valueReason)\n    {\n      this.props.onChange('reason')({val: this.state.valueReason})\n      this.setState({lastSubmittedReason: this.state.valueReason})\n    }\n    else {\n      this.setState({valueReason: this.state.lastSubmittedReason})\n    }\n    this.toggleLabelReason();\n  }\n\n  toggleLabelReason = () =>  {\n    this.setState({displayLabelReason: !this.state.displayLabelReason});\n  }\n\n}\n\nclass MedicationEnd extends Component<Props> {\n  constructor (props) {\n    super(props)\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.state = {\n      value : this.props.state.referenced_by_attribute,\n      lastSubmitted : this.props.state.referenced_by_attribute,\n      displayLabel : true,\n    }\n  }\n\n  render() {\n    // check for undo/redo\n    if (this.props.state.referenced_by_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\n    {\n      this.fixTextBox();\n    }\n    let state = ((this.props.state: any): MedicationEndState);\n    return (\n      <div>\n        {this.renderMedicationOrder()}\n        {this.renderReferencedByAttribute()}\n        {this.renderCodes()}\n      </div>\n    );\n  }\n\n  renderMedicationOrder() {\n    let state = ((this.props.state: any): MedicationEndState);\n    let medicationOrder = this.props.otherStates.filter((s) => {return s.type === \"MedicationOrder\"});\n    let options = medicationOrder.map((e) => {return {id: e.name, text: e.name}});\n    let initial_value = (state.medication_order ? {id: state.medication_order, text: state.medication_order} : options[0]);\n    if (!state.medication_order) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('medication_order')({val: initial_value})}>Add Medication Order</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Medication Order: <RIESelect className='editable-text' value={initial_value} propName={'medication_order'}  change={this.props.onChange('medication_order')} options={options} />\n          <a className='editable-text' onClick={() => this.props.onChange('medication_order')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  renderReferencedByAttribute() {\n    let state = ((this.props.state: any): MedicationEndState);\n    let displayAttribute;\n    if (this.state.displayLabel)\n    {\n        const data = AttributeData;\n        let others = [this.props.moduleName];\n        if (data[state.referenced_by_attribute]!= undefined)\n        {\n          Object.keys(data[state.referenced_by_attribute].read).forEach(i => {others.push(i)})\n          Object.keys(data[state.referenced_by_attribute].write).forEach(i => {others.push(i)})\n        }\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\n        others.splice(others.indexOf[this.props.moduleName], 1);\n\n        if (others.length > 0)\n        {\n          displayAttribute = <span><label className=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\n          </span>\n        }\n        else{\n          displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\n        }\n\n    }\n    else\n    {\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\n    }\n    if (!state.referenced_by_attribute) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Referenced by Attribute: {displayAttribute}\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  renderCodes() {\n    let state = ((this.props.state: any): MedicationEndState);\n    if (!state.codes) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.RxNorm')]}})}>Add Codes</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div className='section'>\n          Codes\n          <br />\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  handleTextChange(value) {\n    this.setState({value: value});\n  }\n\n  handleSubmit(save) {\n    if (save && this.props.state.referenced_by_attribute != this.state.value)\n    {\n      this.props.onChange('referenced_by_attribute')({val: this.state.value})\n      this.setState({lastSubmitted: this.state.value})\n    }\n    else {\n      this.setState({value: this.state.lastSubmitted})\n    }\n    this.toggleLabel();\n  }\n\n  fixTextBox() {\n    this.setState({value: this.props.state.referenced_by_attribute});\n    this.setState({lastSubmitted: this.props.state.referenced_by_attribute})\n  }\n\n  toggleLabel = () =>  {\n    this.setState({displayLabel: !this.state.displayLabel});\n  }\n\n}\n\nclass CarePlanStart extends Component<Props> {\n  constructor (props) {\n    super(props)\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleTextChangeReason = this.handleTextChangeReason.bind(this);\n    this.handleSubmitReason = this.handleSubmitReason.bind(this);\n    this.state = {\n      value : this.props.state.assign_to_attribute,\n      lastSubmitted : this.props.state.assign_to_attribute,\n      displayLabel : true,\n      valueReason : this.props.state.reason,\n      lastSubmittedReason : this.props.state.reason,\n      displayLabelReason : true,\n    }\n  }\n\n  render() {\n    // check for undo/redo\n    if (this.props.state.assign_to_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\n    {\n      this.fixTextBox();\n    }\n    let state = ((this.props.state: any): CarePlanStartState);\n    return (\n      <div>\n        {this.renderAssignToAttribute()}\n        {this.renderReason()}\n        <div className='section'>\n          Codes\n          <br />\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\n          <br />\n        </div>\n        {this.renderActivities()}\n        {this.renderGoals()}\n      </div>\n    );\n  }\n\n  renderAssignToAttribute() {\n    let state = ((this.props.state: any): CarePlanStartState);\n    let displayAttribute;\n    if (this.state.displayLabel)\n    {\n        const data = AttributeData;\n        let others = [this.props.moduleName];\n        if (data[state.assign_to_attribute]!= undefined)\n        {\n          Object.keys(data[state.assign_to_attribute].read).forEach(i => {others.push(i)})\n          Object.keys(data[state.assign_to_attribute].write).forEach(i => {others.push(i)})\n        }\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\n        others.splice(others.indexOf[this.props.moduleName], 1);\n\n        if (others.length > 0)\n        {\n          displayAttribute = <span><label className=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\n          </span>\n        }\n        else{\n          displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\n        }\n\n    }\n    else\n    {\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\n    }\n    if (!state.assign_to_attribute) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Assign to Attribute: {displayAttribute}\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  renderReason() {\n    let state = ((this.props.state: any): CarePlanStart);\n    if (!state.reason) {\n      if( this.state.valueReason !== 'text')\n      {\n        this.setState({valueReason: 'text'});\n      }\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: \"Select Condition/Enter Attribute\"}})}>Add Reason</a>\n          <br />\n        </div>\n      );\n    } else {\n      let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\n      let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\n      let inputAttribute = [{id: \"*Input Attribute*\", text: \"*Input Attribute*\"}];\n      let allOptions = options.concat(inputAttribute);\n      let reason = <RIESelect className='editable-text' value={{id: state.reason, text: state.reason}} propName={'reason'}  change={this.props.onChange('reason')} options={allOptions} />\n      if (state.reason === \"*Input Attribute*\") {\n        let displayAttribute;\n\n        if (this.state.displayLabelReason)\n        {\n            displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabelReason}>{state.reason}</label>\n        }\n        else\n        {\n         displayAttribute = <AutoCompleteText onChange={this.handleTextChangeReason} onBlur={this.handleSubmitReason} text={this.state.valueReason} items={Attributes}/>\n        }\n        return (\n          <div>\n            Reason: {reason}\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\n            <br/>\n            Attribute: {displayAttribute}\n            <br/>\n          </div>\n        );\n      } else {\n        return (\n          <div>\n            Reason: {reason}\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\n            <br/>\n          </div>\n        );\n      }\n    }\n  }\n\n  renderActivities() {\n    let state = ((this.props.state: any): CarePlanStartState);\n    if (!state.activities) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('activities')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Activities</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div className='section'>\n          Activities\n          <br />\n          <Codes codes={state.activities} system={\"SNOMED-CT\"} onChange={this.props.onChange('activities')} />\n          <a className='editable-text' onClick={() => this.props.onChange('activities')({val: {id: null}})}>Remove Activities</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  renderGoals() {\n    let state = ((this.props.state: any): CarePlanStartState);\n    if (!state.goals) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('goals')({val: {id: [getTemplate('Attribute.Goal')]}})}>Add Goals</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div className='section'>\n          Goals\n          <br />\n          <Goals goals={state.goals} onChange={this.props.onChange('goals')} />\n          <a className='editable-text' onClick={() => this.props.onChange('goals')({val: {id: null}})}>Remove Goals</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  handleTextChange(value) {\n    this.setState({value: value});\n  }\n\n  handleSubmit(save) {\n    if (save && this.props.state.assign_to_attribute != this.state.value)\n    {\n      this.props.onChange('assign_to_attribute')({val: this.state.value})\n      this.setState({lastSubmitted: this.state.value})\n    }\n    else {\n      this.setState({value: this.state.lastSubmitted})\n    }\n    this.toggleLabel();\n  }\n\n  fixTextBox() {\n    this.setState({value: this.props.state.assign_to_attribute});\n    this.setState({lastSubmitted: this.props.state.assign_to_attribute})\n  }\n\n  toggleLabel = () =>  {\n    this.setState({displayLabel: !this.state.displayLabel});\n  }\n  handleTextChangeReason(value) {\n    this.setState({valueReason: value});\n\n  }\n\n  handleSubmitReason(save) {\n    if (save && this.props.state.reason != this.state.valueReason)\n    {\n      this.props.onChange('reason')({val: this.state.valueReason})\n      this.setState({lastSubmittedReason: this.state.valueReason})\n    }\n    else {\n      this.setState({valueReason: this.state.lastSubmittedReason})\n    }\n    this.toggleLabelReason();\n  }\n\n  toggleLabelReason = () =>  {\n    this.setState({displayLabelReason: !this.state.displayLabelReason});\n  }\n}\n\nclass CarePlanEnd extends Component<Props> {\n\n  constructor (props) {\n    super(props)\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.state = {\n      value : this.props.state.referenced_by_attribute,\n      lastSubmitted : this.props.state.referenced_by_attribute,\n      displayLabel : true,\n    }\n  }\n\n  render() {\n    // check for undo/redo\n    if (this.props.state.referenced_by_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\n    {\n      this.fixTextBox();\n    }\n    let state = ((this.props.state: any): CarePlanEndState);\n    return (\n      <div>\n        {this.renderCarePlan()}\n        {this.renderReferencedByAttribute()}\n        {this.renderCodes()}\n      </div>\n    );\n  }\n\n  renderCarePlan() {\n    let state = ((this.props.state: any): CarePlanEndState);\n    let careplans = this.props.otherStates.filter((s) => {return s.type === \"CarePlanStart\"});\n    let options = careplans.map((e) => {return {id: e.name, text: e.name}});\n    let initial_value = (state.careplan ? {id: state.careplan, text: state.careplan} : options[0]);\n    if (!state.careplan) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('careplan')({val: initial_value})}>Add Care Plan</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Care Plan: <RIESelect className='editable-text' value={initial_value} propName={'careplan'}  change={this.props.onChange('careplan')} options={options} />\n          <a className='editable-text' onClick={() => this.props.onChange('careplan')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  renderReferencedByAttribute() {\n    let state = ((this.props.state: any): CarePlanEndState);\n    let displayAttribute;\n    if (this.state.displayLabel)\n    {\n        const data = AttributeData;\n        let others = [this.props.moduleName];\n        if (data[state.referenced_by_attribute]!= undefined)\n        {\n          Object.keys(data[state.referenced_by_attribute].read).forEach(i => {others.push(i)})\n          Object.keys(data[state.referenced_by_attribute].write).forEach(i => {others.push(i)})\n        }\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\n        others.splice(others.indexOf[this.props.moduleName], 1);\n\n        if (others.length > 0)\n        {\n          displayAttribute = <span><label className=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\n          </span>\n        }\n        else{\n          displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\n        }\n\n    }\n    else\n    {\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\n    }\n    if (!state.referenced_by_attribute) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Referenced by Attribute: {displayAttribute}\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  renderCodes() {\n    let state = ((this.props.state: any): CarePlanEndState);\n    if (!state.codes) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div className='section'>\n          Codes\n          <br />\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  handleTextChange(value) {\n    this.setState({value: value});\n\n  }\n\n  handleSubmit(save) {\n    if (save && this.props.state.referenced_by_attribute != this.state.value)\n    {\n      this.props.onChange('referenced_by_attribute')({val: this.state.value})\n      this.setState({lastSubmitted: this.state.value})\n    }\n    else {\n      this.setState({value: this.state.lastSubmitted})\n    }\n    this.toggleLabel();\n  }\n\n  fixTextBox() {\n    this.setState({value: this.props.state.referenced_by_attribute});\n    this.setState({lastSubmitted: this.props.state.referenced_by_attribute})\n  }\n\n  toggleLabel = () =>  {\n    this.setState({displayLabel: !this.state.displayLabel});\n  }\n\n}\n\nclass Procedure extends Component<Props> {\n  constructor (props) {\n    super(props)\n    this.handleTextChangeReason = this.handleTextChangeReason.bind(this);\n    this.handleSubmitReason = this.handleSubmitReason.bind(this);\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.state = {\n      value : this.props.state.assign_to_attribute,//'',\n      lastSubmitted : this.props.state.assign_to_attribute,\n      displayLabel : true,\n      valueReason : this.props.state.reason,\n      lastSubmittedReason : this.props.state.reason,\n      displayLabelReason : true,\n    }\n  }\n\n  legacyGMF() {\n    let state = ((this.props.state: any): ProcedureState);\n    if (state.duration) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  render() {\n    let state = ((this.props.state: any): ProcedureState);\n    let durationEditor;\n    if (this.legacyGMF()) {\n      durationEditor = this.renderLegacyDuration();\n    } else {\n      durationEditor = this.renderDuration();\n    }\n    return (\n      <div>\n        {this.renderReason()}\n        <div className='section'>\n          Codes\n          <br />\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\n          <br />\n        </div>\n        {durationEditor}\n        {this.renderAssignToAttribute()}\n      </div>\n    );\n  }\n\n  renderReason() {\n    let state = ((this.props.state: any): Procedure);\n    if (!state.reason) {\n      if( this.state.valueReason !== 'text')\n      {\n        this.setState({valueReason: 'text'});\n      }\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: \"Select Condition/Enter Attribute\"}})}>Add Reason</a>\n          <br />\n        </div>\n      );\n    } else {\n      let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\n      let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\n      let inputAttribute = [{id: \"*Input Attribute*\", text: \"*Input Attribute*\"}];\n      let allOptions = options.concat(inputAttribute);\n      let reason = <RIESelect className='editable-text' value={{id: state.reason, text: state.reason}} propName={'reason'}  change={this.props.onChange('reason')} options={allOptions} />\n      if (state.reason === \"*Input Attribute*\") {\n        let displayAttribute;\n\n        if (this.state.displayLabelReason)\n        {\n            displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabelReason}>{state.reason}</label>\n        }\n        else\n        {\n         displayAttribute = <AutoCompleteText onChange={this.handleTextChangeReason} onBlur={this.handleSubmitReason} text={this.state.valueReason} items={Attributes}/>\n        }\n        return (\n          <div>\n            Reason: {reason}\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\n            <br/>\n            Attribute: {displayAttribute}\n            <br/>\n          </div>\n        );\n      } else {\n        return (\n          <div>\n            Reason: {reason}\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\n            <br/>\n          </div>\n        );\n      }\n    }\n  }\n\n  renderDuration() {\n    let state = ((this.props.state: any): ProcedureState);\n    if (state.distribution) {\n      return (\n        <div>\n          <Distribution kind={state.distribution.kind}\n                        parameters={state.distribution.parameters}\n                        onChange={this.props.onChange('distribution')} />\n          Unit: <RIESelect className='editable-text'\n                          value={{id: state.unit, text: state.unit}}\n                          propName=\"unit\"\n                          change={this.props.onChange('unit')}\n                          options={unitOfTimeOptions} />\n          <br />\n          <a className='editable-text' onClick={() => this.props.onChange('distribution')({val: {id: null}})}>(remove)</a>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => {\n            this.props.onChange('distribution')({val: {id: {kind: \"UNIFORM\", parameters:{low: 30, high: 60}}}});\n            this.props.onChange('unit')({val: {id: \"minutes\"}});\n          }}>Add Duration</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  renderLegacyDuration() {\n    let state = ((this.props.state: any): ProcedureState);\n    if (!state.duration) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('duration')({val: {id: {low: 10, high: 20, unit: 'days'}}})}>Add Duration</a>\n          <br />\n        </div>\n      );\n      return null;\n    } else {\n      return (\n        <div className='section'>\n          Duration Low: <RIENumber className='editable-text' value={state.duration.low} propName={'low'}  change={this.props.onChange('duration.low')} />\n          <br />\n          Duration High: <RIENumber className='editable-text' value={state.duration.high} propName={'high'}  change={this.props.onChange('duration.high')} />\n          <br />\n          Duration Unit: <RIESelect className='editable-text' value={{id: state.duration.unit, text: state.duration.unit}} propName=\"unit\" change={this.props.onChange('duration.unit')} options={unitOfTimeOptions} />\n          <br />\n          <a className='editable-text' onClick={() => this.props.onChange('duration')({val: {id: null}})}>(remove)</a>\n        </div>\n      );\n    }\n  }\n\n  handleTextChangeReason(value) {\n    this.setState({valueReason: value});\n\n  }\n\n  handleSubmitReason(save) {\n    if (save && this.props.state.reason != this.state.valueReason)\n    {\n      this.props.onChange('reason')({val: this.state.valueReason})\n      this.setState({lastSubmittedReason: this.state.valueReason})\n    }\n    else {\n      this.setState({valueReason: this.state.lastSubmittedReason})\n    }\n    this.toggleLabelReason();\n  }\n\n  toggleLabelReason = () =>  {\n    this.setState({displayLabelReason: !this.state.displayLabelReason});\n  }\n\n  renderAssignToAttribute() {\n    let state = ((this.props.state: any): ProcedureState);\n    let displayAttribute;\n    if (this.state.displayLabel)\n    {\n        const data = AttributeData;\n        let others = [this.props.moduleName];\n        if (data[state.assign_to_attribute]!= undefined)\n        {\n          Object.keys(data[state.assign_to_attribute].read).forEach(i => {others.push(i)})\n          Object.keys(data[state.assign_to_attribute].write).forEach(i => {others.push(i)})\n        }\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\n        others.splice(others.indexOf[this.props.moduleName], 1);\n\n        if (others.length > 0)\n        {\n          displayAttribute = <span><label className=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\n          </span>\n        }\n        else{\n          displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\n        }\n\n    }\n    else\n    {\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\n    }\n    if (!state.assign_to_attribute) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Assign to Attribute: {displayAttribute}\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  handleTextChange(value) {\n    this.setState({value: value});\n  }\n\n  handleSubmit(save) {\n    if (save && this.props.state.assign_to_attribute != this.state.value)\n    {\n      this.props.onChange('assign_to_attribute')({val: this.state.value})\n      this.setState({lastSubmitted: this.state.value})\n    }\n    else {\n      this.setState({value: this.state.lastSubmitted})\n    }\n    this.toggleLabel();\n  }\n\n  fixTextBox() {\n    this.setState({value: this.props.state.assign_to_attribute});\n    this.setState({lastSubmitted: this.props.state.assign_to_attribute})\n  }\n  toggleLabel = () =>  {\n    this.setState({displayLabel: !this.state.displayLabel});\n  }\n\n}\n\nclass Vaccine extends Component<Props> {\n  constructor (props) {\n    super(props)\n  }\n\n  legacyGMF() {\n    let state = ((this.props.state: any): VaccineState);\n  }\n\n  render() {\n    let state = ((this.props.state: any): VaccineState);\n    return (\n      <div>\n        <div className='section'>\n          Series: <RIEInput className='editable-text' value={state.series} propName={'series'} change={this.props.onChange('series')} />\n          <br />\n          Codes\n          <br />\n          <Codes codes={state.codes} system={\"CVX\"} onChange={this.props.onChange('codes')} />\n          <br />\n        </div>\n      </div>\n    );\n  }\n}\n\nclass VitalSign extends Component<Props> {\n\n  render() {\n    let state = ((this.props.state: any): VitalSignState);\n    let distroForm;\n    if (this.legacyGMF()) {\n      distroForm = this.renderExactOrRange();\n    } else {\n      distroForm = this.renderDistribution();\n    }\n    return (\n      <div>\n        Vital Sign: <RIEInput className='editable-text' value={state.vital_sign} propName={'vital_sign'} change={this.props.onChange('vital_sign')} />\n        <br/>\n        Unit: <RIEInput className='editable-text' value={state.unit} propName={'unit'} change={this.props.onChange('unit')} />\n        <br/>\n        {distroForm}\n      </div>\n    );\n  }\n\n  legacyGMF() {\n    let state = ((this.props.state: any): VitalSignState);\n    if (state.exact || state.range) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  renderDistribution() {\n    let state = ((this.props.state: any): SymptomState);\n    return (\n      <div>\n        <Distribution kind={state.distribution.kind}\n                      parameters={state.distribution.parameters}\n                      onChange={this.props.onChange('distribution')} />\n        <br />\n      </div>\n    );\n  }\n\n  renderExactOrRange() {\n    let state = ((this.props.state: any): VitalSignState);\n    if (state.exact) {\n      return (\n        <div className='section'>\n          Exact Quantity: <RIENumber className='editable-text' value={state.exact.quantity} propName='quantity' change={this.props.onChange('exact.quantity')} />\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.Range')}}); this.props.onChange('exact')({val: {id: null}})}}>Change to Range</a>\n          <br />\n        </div>\n      );\n    }\n    else {\n      return (\n        <div className='section'>\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\n          <br />\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.Exact')}}); this.props.onChange('range')({val: {id: null}})}}>Change to Exact</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n}\n\nclass Observation extends Component<Props> {\n  constructor (props) {\n    super(props)\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.state = {\n      value : this.props.state.attribute,//'',\n      lastSubmitted : this.props.state.attribute,\n      displayLabel : true,\n    }\n  }\n\n  render() {\n    // check for undo/redo\n    if (this.props.state.attribute != this.state.value && this.state.value == this.state.lastSubmitted)\n    {\n      this.fixTextBox();\n    }\n    let state = ((this.props.state: any): ObservationState);\n    let options = [\n      {id: 'social-history', text: 'social-history'},\n      {id: 'vital-signs', text: 'vital-signs'},\n      {id: 'imaging', text: 'imaging'},\n      {id: 'laboratory', text: 'laboratory'},\n      {id: 'procedure', text: 'procedure'},\n      {id: 'survey', text: 'survey'},\n      {id: 'exam', text: 'exam'},\n      {id: 'therapy', text: 'therapy'}\n    ];\n    return (\n      <div>\n        Category: <RIESelect className='editable-text' value={{id: state.category, text: state.category}} propName=\"category\" change={this.props.onChange('category')} options={options} />\n        <br/>\n        Unit: <RIEInput className='editable-text' value={state.unit} propName={'unit'} change={this.props.onChange('unit')} />\n        <br/>\n        <div className='section'>\n          Codes\n          <br />\n          <Codes codes={state.codes} system={\"LOINC\"} onChange={this.props.onChange('codes')} />\n          <br/>\n        </div>\n        {this.renderValueContainer()}\n      </div>\n    );\n  }\n\n  legacyGMF() {\n    let state = ((this.props.state: any): ObservationState);\n    if (state.exact || state.range) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  renderValueContainer() { // renders exact, range, attribute, or vital_sign\n    let state = ((this.props.state: any): ObservationState);\n    if (this.legacyGMF() && state.exact) {\n      let value = state.exact.quantity;\n      if(typeof value === 'boolean'){\n        value = String(value);\n      }\n      return (\n        <div className='section'>\n          Exact Value: <RIEInput className='editable-text' value={value} propName='quantity' change={this.props.onChange('exact.quantity')} />\n          <br />\n          { this.renderToggles('exact') }\n        </div>\n      );\n    } else if (this.legacyGMF() && state.range) {\n      return (\n        <div className='section'>\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\n          <br />\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\n          <br />\n          { this.renderToggles('range') }\n        </div>\n      );\n    } else if (state.distribution) {\n      return (\n        <Distribution kind={state.distribution.kind}\n                      round={state.distribution.round}\n                      parameters={state.distribution.parameters}\n                      onChange={this.props.onChange('distribution')}\n                      otherToggles={this.renderToggles('distribution')} />\n      );\n    } else if (state.attribute) {\n      let displayAttribute;\n      if (this.state.displayLabel)\n      {\n          const data = AttributeData;\n          let others = [this.props.moduleName];\n          if (data[state.attribute]!= undefined)\n          {\n            Object.keys(data[state.attribute].read).forEach(i => {others.push(i)})\n            Object.keys(data[state.attribute].write).forEach(i => {others.push(i)})\n          }\n          others = others.filter((x, i, a) => a.indexOf(x) == i)\n          others.splice(others.indexOf[this.props.moduleName], 1);\n\n          if (others.length > 0)\n          {\n            displayAttribute = <span><label className=\"editable-text\" onClick={this.toggleLabel}>{state.attribute}</label>\n            <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\n            </span>\n          }\n          else{\n            displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabel}>{state.attribute}</label>\n          }\n\n      }\n      else\n      {\n       displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\n      }\n      return (\n        <div className='section'>\n          Attribute: {displayAttribute}\n          <br/>\n          { this.renderToggles('attribute') }\n        </div>\n      );\n    } else if (state.value_code) {\n      return (\n        <div className='section'>\n          <Code code={state.value_code} system={\"SNOMED-CT\"} onChange={this.props.onChange('value_code')} />\n          { this.renderToggles('value_code') }\n        </div>\n      );\n    } else if (state.vital_sign) {\n      return (\n        <div className='section'>\n          Vital Sign: <RIEInput className='editable-text' value={state.vital_sign} propName={'vital_sign'}  change={this.props.onChange('vital_sign')} />\n          { this.renderToggles('vital_sign') }\n        </div>\n      );\n    } else if (state.attachment) {\n      return (\n        <div className='section'>\n          Observation Attachments Not Supported.\n        </div>\n      );\n    } else if (state.sampled_data) {\n      return (\n        <div className='section'>\n          Observation Sampled Data Not Supported.\n        </div>\n      );\n    }\n  }\n\n  clearProps(...propsToClear) {\n    propsToClear.forEach((propName) => {\n      this.props.onChange(propName)({val: {id: null}});\n    })\n  }\n\n  renderToggles(currentItem) {\n    console.log(currentItem);\n\n    let toggles = [];\n\n    if (currentItem !== 'exact' && currentItem !== 'distribution') {\n      toggles.push(\n                <div key='exact'>\n                  <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.Exact')}}); this.clearProps('range', 'attribute', 'vital_sign', 'value_code', 'distribution')}}>Change to Exact</a>\n                  <br />\n                </div>\n        );\n    }\n\n    if (currentItem !== 'range' && currentItem !== 'distribution') {\n      toggles.push(\n                <div key='range'>\n                  <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.Range')}}); this.clearProps('exact', 'attribute', 'vital_sign', 'value_code', 'distribution')}}>Change to Range</a>\n                  <br />\n                </div>\n        );\n    }\n\n    if (currentItem !== 'attribute') {\n      toggles.push(\n                <div key='attribute'>\n                  <a className='editable-text' onClick={() => {this.props.onChange('attribute')({val: {id: \"text\"}}); this.clearProps('exact', 'range', 'vital_sign', 'value_code', 'distribution')}}>Change to Attribute</a>\n                  <br />\n                </div>\n        );\n    }\n\n    if (currentItem !== 'vital_sign') {\n      toggles.push(\n                <div key='vital_sign'>\n                  <a className='editable-text' onClick={() => {this.props.onChange('vital_sign')({val: {id: \"text\"}}); this.clearProps('exact', 'range', 'attribute', 'value_code', 'distribution')}}>Change to Vital Sign</a>\n                  <br />\n                </div>\n        );\n    }\n\n    if (currentItem !== 'value_code') {\n      toggles.push(\n                <div key='value_code'>\n                  <a className='editable-text' onClick={() => {this.props.onChange('value_code')({val: {id:  getTemplate('Type.Code.Snomed')}}); this.clearProps('exact', 'range', 'attribute', 'vital_sign', 'distribution')}}>Change to Value Code</a>\n                  <br />\n                </div>\n        );\n    }\n\n    return toggles;\n  }\n  handleTextChange(value) {\n    this.setState({value: value});\n\n  }\n\n  handleSubmit(save) {\n    if (save && this.props.state.attribute != this.state.value)\n    {\n      this.props.onChange('attribute')({val: this.state.value})\n      this.setState({lastSubmitted: this.state.value})\n    }\n    else {\n      this.setState({value: this.state.lastSubmitted})\n    }\n    this.toggleLabel();\n  }\n\n  fixTextBox() {\n    this.setState({value: this.props.state.attribute});\n    this.setState({lastSubmitted: this.props.state.attribute})\n  }\n\n  toggleLabel = () =>  {\n    this.setState({displayLabel: !this.state.displayLabel});\n  }\n\n}\n\nclass MultiObservation extends Component<Props> {\n\n  render() {\n    let state = ((this.props.state: any): MultiObservationState);\n    let observationCount = (state.observations && state.observations.length) || 0;\n    let options = [\n      {id: 'social-history', text: 'social-history'},\n      {id: 'vital-signs', text: 'vital-signs'},\n      {id: 'imaging', text: 'imaging'},\n      {id: 'laboratory', text: 'laboratory'},\n      {id: 'procedure', text: 'procedure'},\n      {id: 'survey', text: 'survey'},\n      {id: 'exam', text: 'exam'},\n      {id: 'therapy', text: 'therapy'}\n    ];\n    return (\n      <div>\n        Category: <RIESelect className='editable-text' value={{id: state.category, text: state.category}} propName=\"category\" change={this.props.onChange('category')} options={options} />\n        <br />\n        <div className='section'>\n          Codes\n          <br />\n          <Codes codes={state.codes} system={\"LOINC\"} onChange={this.props.onChange('codes')} />\n          <br />\n        </div>\n        <div className='section'>\n          <b>Observations</b>\n          <br />\n          {state.observations && state.observations.map((observation, i) => {\n            return (\n              <div className='section' key={i}>\n                Observation #{i+1} (<a className='editable-text delete-button' onClick={() => this.props.onChange(`observations.[${i}]`)({val: {id: null}})}>remove</a>)\n                <Observation state={observation} onChange={this.props.onChange(`observations.[${i}]`)} />\n              </div>\n            )\n          })}\n          <a className='editable-text' onClick={() => this.props.onChange(`observations.[${observationCount}]`)({val: {id: _.cloneDeep(getTemplate('Contained.Observation'))}})}>+</a>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nclass DiagnosticReport extends Component<Props> {\n\n  render() {\n    let state = ((this.props.state: any): DiagnosticReportState);\n    let observationCount = (state.observations && state.observations.length) || 0;\n    return (\n      <div>\n        <div className='section'>\n          <b>Codes</b>\n          <br />\n          <Codes codes={state.codes} system={\"LOINC\"} onChange={this.props.onChange('codes')} />\n        </div>\n        <div className='section'>\n          <b>Observations</b>\n          <br />\n          {state.observations && state.observations.map((observation, i) => {\n            return (\n              <div className='section' key={i}>\n                Observation #{i+1} (<a className='editable-text delete-button' onClick={() => this.props.onChange(`observations.[${i}]`)({val: {id: null}})}>remove</a>)\n                <Observation state={observation} onChange={this.props.onChange(`observations.[${i}]`)} />\n              </div>\n            )\n          })}\n        <a className='editable-text' onClick={() => this.props.onChange(`observations.[${observationCount}]`)({val: {id: _.cloneDeep(getTemplate('Contained.Observation'))}})}>+</a>\n\n        </div>\n      </div>\n    );\n  }\n\n}\n\nclass ImagingStudy extends Component<Props> {\n\n  render() {\n    let state = ((this.props.state: any): ImagingStudyState);\n    return (\n      <div>\n        <div className='section'>\n          <b>Procedure Code:</b>\n          <Code code={state.procedure_code} system={\"SNOMED-CT\"} onChange={this.props.onChange('procedure_code')} />\n          <br />\n        </div>\n        <div className='section'>\n          <b>Series:</b>\n          <br />\n          <SeriesList series={state.series} onChange={this.props.onChange('series')} />\n          <br />\n        </div>\n      </div>\n    );\n  }\n\n}\n\nclass Symptom extends Component<Props> {\n\n  render() {\n    let state = ((this.props.state: any): SymptomState);\n    let distroForm;\n    if (this.legacyGMF()) {\n      distroForm = this.renderExactOrRange();\n    } else {\n      distroForm = this.renderDistribution();\n    }\n    return (\n      <div>\n        Symptom: <RIEInput className='editable-text' value={state.symptom} propName={'symptom'} change={this.props.onChange('symptom')} />\n        <br/>\n        {this.renderProbability()}\n        {this.renderCause()}\n        {distroForm}\n      </div>\n    );\n  }\n\n  renderDistribution() {\n    let state = ((this.props.state: any): SymptomState);\n    return (\n      <div>\n        <Distribution kind={state.distribution.kind}\n                      parameters={state.distribution.parameters}\n                      onChange={this.props.onChange('distribution')} />\n        <br />\n      </div>\n    );\n  }\n\n  legacyGMF() {\n    let state = ((this.props.state: any): SymptomState);\n    if (state.exact || state.range) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  renderProbability() {\n    let state = ((this.props.state: any): SymptomState);\n    if (!state.probability) {\n      return (\n        <div>\n          Probability: <RIENumber className='editable-text' value={1} propName={'probability'} editProps={{step: .01, min: 0, max: 1}} change={this.props.onChange('probability')} format={this.formatAsPercentage} validate={this.checkInRange} classInvalid=\"invalid\" />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Probability: <RIENumber className='editable-text' value={state.probability} propName={'probability'} editProps={{step: .01, min: 0, max: 1}} change={this.props.onChange('probability')} format={this.formatAsPercentage} validate={this.checkInRange} classInvalid=\"invalid\"/>\n        </div>\n      );\n    }\n  }\n\n  checkInRange(num: number) {\n    return ((num >= 0) && (num <= 1));\n  }\n\n  formatAsPercentage(num: number) {\n    return (num * 100) + \"%\";\n  }\n\n  renderCause() {\n    let state = ((this.props.state: any): SymptomState);\n    if (!state.cause) {\n      return (\n        <div>\n          Cause: <RIEInput className='editable-text' value={this.props.moduleName} propName={'cause'} change={this.props.onChange('cause')} />\n          <br/>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Cause: <RIEInput className='editable-text' value={state.cause} propName={'cause'} change={this.props.onChange('cause')} />\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  renderExactOrRange() {\n    let state = ((this.props.state: any): SymptomState);\n    if (state.exact) {\n      return (\n        <div className='section'>\n          Exact Quantity: <RIENumber className='editable-text' value={state.exact.quantity} propName='quantity' change={this.props.onChange('exact.quantity')} />\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.Range')}}); this.props.onChange('exact')({val: {id: null}})}}>Change to Range</a>\n          <br />\n        </div>\n      );\n    }\n    else {\n      return (\n        <div className='section'>\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\n          <br />\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.Exact')}}); this.props.onChange('range')({val: {id: null}})}}>Change to Exact</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n}\n\nclass SupplyList extends Component<Props> {\n  render() {\n    let state = ((this.props.state: any): SupplyListState);\n    let supplyCount = (state.supplies && state.supplies.length) || 0;\n    return (\n      <div>\n        <b>Supplies</b>\n        <br />\n        {state.supplies && state.supplies.map((supply, i) => {\n          return (\n            <div className='section' key={i}>\n              Supply #{i+1} (<a className='editable-text delete-button' onClick={() => this.props.onChange(`supplies.[${i}]`)({val: {id: null}})}>remove</a>)\n              { this.renderSupply(supply, i) }\n            </div>\n          )\n        })}\n        <a className='editable-text' onClick={() => this.props.onChange(`supplies.[${supplyCount}]`)({val: {id: _.cloneDeep(getTemplate('Attribute.Supply'))}})}>+</a>\n      </div>\n    );\n  }\n\n  renderSupply(supply, i) {\n    const onChange = this.props.onChange(`supplies[${i}]`);\n    return (\n      <div>\n        Quantity: <RIENumber className='editable-text' value={supply.quantity} propName='quantity' change={onChange('quantity')} />\n        <br />\n        Code:\n        <div className='section'>\n          <Code code={supply.code} system={\"SNOMED-CT\"} onChange={onChange('code')} />\n        </div>\n      </div>\n      );\n  }\n}\n\nclass Device extends Component<Props> {\n  constructor (props) {\n    super(props)\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.state = {\n      value : this.props.state.assign_to_attribute,//'',\n      lastSubmitted : this.props.state.assign_to_attribute,\n      displayLabel : true,\n    }\n  }\n\n  render() {\n    // check for undo/redo\n    if (this.props.state.assign_to_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\n    {\n      this.fixTextBox();\n    }\n    let state = ((this.props.state: any): DeviceState);\n\n    return (\n      <div>\n        Code:\n        <div className='section'>\n          <Code code={state.code} system={\"SNOMED-CT\"} onChange={this.props.onChange('code')} />\n        </div>\n        { this.renderManufacturer(state) }\n        { this.renderModel(state) }\n        { this.renderAssignToAttribute(state) }\n      </div>\n      );\n  }\n\n  renderManufacturer(state) {\n    if (state.manufacturer) {\n      return (\n        <div>\n          Manufacturer: <RIEInput className='editable-text' value={state.manufacturer} propName={'manufacturer'} change={this.props.onChange('manufacturer')} /><br/>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('manufacturer')({val: {id: \"text\"}})}>Add Manufacturer</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  renderModel(state) {\n    if (state.model) {\n      return (\n        <div>\n          Model: <RIEInput className='editable-text' value={state.model} propName={'model'} change={this.props.onChange('model')} /><br/>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('model')({val: {id: \"text\"}})}>Add Model</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  renderAssignToAttribute() {\n    let state = ((this.props.state: any): DeviceState);\n    let displayAttribute;\n    if (this.state.displayLabel)\n    {\n        const data = AttributeData;\n        let others = [this.props.moduleName];\n        if (data[state.assign_to_attribute]!= undefined)\n        {\n          Object.keys(data[state.assign_to_attribute].read).forEach(i => {others.push(i)})\n          Object.keys(data[state.assign_to_attribute].write).forEach(i => {others.push(i)})\n        }\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\n        others.splice(others.indexOf[this.props.moduleName], 1);\n\n        if (others.length > 0)\n        {\n          displayAttribute = <span><label className=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\n          </span>\n        }\n        else{\n          displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\n        }\n\n    }\n    else\n    {\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\n    }\n    if (!state.assign_to_attribute) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Assign to Attribute: {displayAttribute}\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  handleTextChange(value) {\n    this.setState({value: value});\n  }\n\n  handleSubmit(save) {\n    if (save && this.props.state.assign_to_attribute != this.state.value)\n    {\n      this.props.onChange('assign_to_attribute')({val: this.state.value})\n      this.setState({lastSubmitted: this.state.value})\n    }\n    else {\n      this.setState({value: this.state.lastSubmitted})\n    }\n    this.toggleLabel();\n  }\n\n  fixTextBox() {\n    this.setState({value: this.props.state.assign_to_attribute});\n    this.setState({lastSubmitted: this.props.state.assign_to_attribute})\n  }\n  toggleLabel = () =>  {\n    this.setState({displayLabel: !this.state.displayLabel});\n  }\n}\n\nclass DeviceEnd extends Component<Props> {\n  constructor (props) {\n    super(props)\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.state = {\n      value : this.props.state.referenced_by_attribute,\n      lastSubmitted : this.props.state.referenced_by_attribute,\n      displayLabel : true,\n    }\n  }\n\n  render() {\n    // check for undo/redo\n    if (this.props.state.referenced_by_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\n    {\n      this.fixTextBox();\n    }\n    let state = ((this.props.state: any): DeviceEndState);\n    return (\n      <div>\n        {this.renderDevice()}\n        {this.renderReferencedByAttribute()}\n        {this.renderCodes()}\n      </div>\n    );\n  }\n\n  renderDevice() {\n    let state = ((this.props.state: any): DeviceEndState);\n    let deviceStates = this.props.otherStates.filter((s) => {return s.type === \"Device\"});\n    let options = deviceStates.map((e) => {return {id: e.name, text: e.name}});\n    let initial_value = (state.device ? {id: state.device, text: state.device} : options[0]);\n    if (!state.device) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('device')({val: initial_value})}>Add Device State</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Device: <RIESelect className='editable-text' value={initial_value} propName={'device'}  change={this.props.onChange('device')} options={options} />\n          <a className='editable-text' onClick={() => this.props.onChange('device')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  renderReferencedByAttribute() {\n    let state = ((this.props.state: any): DeviceEndState);\n    let displayAttribute;\n    if (this.state.displayLabel)\n    {\n        const data = AttributeData;\n        let others = [this.props.moduleName];\n        if (data[state.referenced_by_attribute]!= undefined)\n        {\n          Object.keys(data[state.referenced_by_attribute].read).forEach(i => {others.push(i)})\n          Object.keys(data[state.referenced_by_attribute].write).forEach(i => {others.push(i)})\n        }\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\n        others.splice(others.indexOf[this.props.moduleName], 1);\n\n        if (others.length > 0)\n        {\n          displayAttribute = <span><label className=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\n          </span>\n        }\n        else{\n          displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\n        }\n\n    }\n    else\n    {\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\n    }\n    if (!state.referenced_by_attribute) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Referenced by Attribute: {displayAttribute}\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  renderCodes() {\n    let state = ((this.props.state: any): DeviceEndState);\n    if (!state.codes) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div className='section'>\n          Codes\n          <br />\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  handleTextChange(value) {\n    this.setState({value: value});\n\n  }\n\n  handleSubmit(save) {\n    if (save && this.props.state.referenced_by_attribute != this.state.value)\n    {\n      this.props.onChange('referenced_by_attribute')({val: this.state.value})\n      this.setState({lastSubmitted: this.state.value})\n    }\n    else {\n      this.setState({value: this.state.lastSubmitted})\n    }\n    this.toggleLabel();\n  }\n\n  fixTextBox() {\n    this.setState({value: this.props.state.referenced_by_attribute});\n    this.setState({lastSubmitted: this.props.state.referenced_by_attribute})\n  }\n  toggleLabel = () =>  {\n    this.setState({displayLabel: !this.state.displayLabel});\n  }\n}\n\nclass Death extends Component<Props> {\n  constructor (props) {\n    super(props)\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.state = {\n      value : this.props.state.referenced_by_attribute,\n      lastSubmitted : this.props.state.referenced_by_attribute,\n      displayLabel : true,\n    }\n  }\n\n  render() {\n    // check for undo/redo\n    if (this.props.state.referenced_by_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\n    {\n      this.fixTextBox();\n    }\n    let state = ((this.props.state: any): DeathState);\n    return (\n      <div>\n        {this.renderExactOrRange()}\n        {this.renderCodes()}\n        {this.renderConditionOnset()}\n        {this.renderReferencedByAttribute()}\n      </div>\n    );\n  }\n\n  renderExactOrRange() {\n    let state = ((this.props.state: any): DeathState);\n    if (state.exact) {\n      return (\n        <div className='section'>\n          Exact Quantity: <RIENumber className='editable-text' value={state.exact.quantity} propName='quantity' change={this.props.onChange('exact.quantity')} />\n          <br />\n          Exact Unit: <RIESelect className='editable-text' value={{id: state.exact.unit, text: state.exact.unit}} propName=\"unit\" change={this.props.onChange('exact.unit')} options={unitOfTimeOptions} />\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.RangeWithUnit')}}); this.props.onChange('exact')({val: {id: null}})}}>Change to Range</a>\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: null}}); this.props.onChange('exact')({val: {id: null}})}}>Remove Exact/Range</a>\n          <br />\n        </div>\n      );\n    }\n    else if (state.range) {\n      return (\n        <div className='section'>\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\n          <br />\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\n          <br />\n          Range Unit: <RIESelect className='editable-text' value={{id: state.range.unit, text: state.range.unit}} propName=\"unit\" change={this.props.onChange('range.unit')} options={unitOfTimeOptions} />\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.ExactWithUnit')}}); this.props.onChange('range')({val: {id: null}})}}>Change to Exact</a>\n          <br />\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: null}}); this.props.onChange('exact')({val: {id: null}})}}>Remove Exact/Range</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.ExactWithUnit')}}); this.props.onChange('range')({val: {id: null}})}}>Add Exact/Range</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  renderCodes() {\n    let state = ((this.props.state: any): DeathState);\n    if (!state.codes) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div className='section'>\n          Codes\n          <br />\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\n          <br />\n        </div>\n      );\n    }\n  }\n\n  renderConditionOnset() {\n    let state = ((this.props.state: any): DeathState);\n    let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\n    let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\n    let initial_value = (state.condition_onset ? {id: state.condition_onset, text: state.condition_onset} : options[0]);\n    if (!state.condition_onset) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('condition_onset')({val: initial_value})}>Add Condition Onset</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Condition Onset: <RIESelect className='editable-text' value={initial_value} propName={'condition_onset'}  change={this.props.onChange('condition_onset')} options={options} />\n          <a className='editable-text' onClick={() => this.props.onChange('condition_onset')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  renderReferencedByAttribute() {\n    let state = ((this.props.state: any): DeathState);\n    let displayAttribute;\n    if (this.state.displayLabel)\n    {\n        const data = AttributeData;\n        let others = [this.props.moduleName];\n        if (data[state.referenced_by_attribute]!= undefined)\n        {\n          Object.keys(data[state.referenced_by_attribute].read).forEach(i => {others.push(i)})\n          Object.keys(data[state.referenced_by_attribute].write).forEach(i => {others.push(i)})\n        }\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\n        others.splice(others.indexOf[this.props.moduleName], 1);\n\n        if (others.length > 0)\n        {\n          displayAttribute = <span><label className=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\n          </span>\n        }\n        else{\n          displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\n        }\n\n    }\n    else\n    {\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\n    }\n    if (!state.referenced_by_attribute) {\n      return (\n        <div>\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\n          <br />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Referenced by Attribute: {displayAttribute}\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\n          <br/>\n        </div>\n      );\n    }\n  }\n\n  handleTextChange(value) {\n    this.setState({value: value});\n\n  }\n\n  handleSubmit(save) {\n    if (save && this.props.state.referenced_by_attribute != this.state.value)\n    {\n      this.props.onChange('referenced_by_attribute')({val: this.state.value})\n      this.setState({lastSubmitted: this.state.value})\n    }\n    else {\n      this.setState({value: this.state.lastSubmitted})\n    }\n    this.toggleLabel();\n  }\n\n  fixTextBox() {\n    this.setState({value: this.props.state.referenced_by_attribute});\n    this.setState({lastSubmitted: this.props.state.referenced_by_attribute})\n  }\n\n  toggleLabel = () =>  {\n    this.setState({displayLabel: !this.state.displayLabel});\n  }\n\n}\n\nexport default StateEditor;\n","// @flow\nimport React, { Component } from 'react';\nimport { RIEInput, RIETextArea } from 'riek';\n\nimport './ModuleProperties.css';\n\nimport type { Module } from './types/Module';\n\ntype Props = {\n  module: Module,\n  onRemarksChange: (selectedModuleIndex: number, newName: string) => mixed\n}\n\nclass ModulePropertiesEditor extends Component<Props> {\n\n  constructor(props) {\n    super(props);\n    this.onRemarksChange = this.onRemarksChange.bind(this);\n  }\n\n  onRemarksChange(remarks) {\n    this.props.onRemarksChange(remarks)\n  }\n\n  render() {\n    let remarks = \"No remarks.\" \n    if(Array.isArray(this.props.module.remarks)){ \n      remarks = this.props.module.remarks.join(\"\\n\");\n    }\n\n    // NOTE: WHAT IF REMARKS SET TO BLANK?\n\n    return (\n      <div className='ModuleProperties'>\n        <div className='Editor-panel-title'> \n           Module Remarks\n        </div>\n        <div className='ModuleProperties-remarks'>\n          <RIETextArea value={remarks} propName=\"remarks\" change={(newval) => this.onRemarksChange(newval.remarks)} />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ModulePropertiesEditor;\n","// @flow\nimport type { Module } from './types/Module';\nimport type { State } from './types/State';\n\nimport { cleanString } from '../utils/stringUtils';\n\nconst STANDARD_COLOR = 'Black';\n/*\nconst HIGHLIGHT_COLOR = '#007bff';\nconst MUTED_COLOR = '#CCCCCC'\n*/\n\nexport function generateDOT(module: Module, selectedState: State, selectedStateTransition: Number) {\n\n  let relatedStates = {};\n\n  if(selectedState) {\n    Object.keys(module.states).forEach( key => {\n      let state = module.states[key];\n\n      let allTransitions = findTransitions(module.states[key])\n\n      if(allTransitions[selectedState.name]){\n        relatedStates[state.name] = true;\n      }\n\n    });\n\n    relatedStates = Object.assign({}, relatedStates, findTransitions(module.states[selectedState.name]))\n\n  }\n\n  let output =  ['digraph G {',\n          nodesAsDOT(module, selectedState, relatedStates),\n          transitionsAsDOT(module, selectedState, selectedStateTransition),\n         '}'\n         ].join('\\n');\n\n  return output;\n\n}\n\nconst nodesAsDOT = (module: Module, selectedState: State, relatedStates: mixed) => {\n\n  return Object.keys(module.states).filter(name => typeof module.states[name] === 'object').map( name => {\n\n    let state = module.states[name]\n    state['name'] = name\n\n    let node = {\n      id: 'node_' + escapeId(name),\n      shape: 'record',\n      style: 'rounded,filled',\n      fillcolor: 'White',\n      fontcolor: STANDARD_COLOR\n    }\n\n    if(state['type'] === 'Initial' || state['type'] === 'Terminal'){\n        node['fillcolor'] = 'Grey'\n        node['style'] = 'rounded,filled'\n        node['fontcolor'] = 'White'\n    }\n\n    if(selectedState && state.name === selectedState.name){\n      node['fillcolor'] = 'White'\n      node['class'] = 'node-highlighted'\n    } else if (selectedState && !relatedStates[state.name]){\n      node['class'] = 'node-muted'\n    }\n\n    let details = stateDescription(state)\n    if(details.length === 0){\n      node['label'] = (name === state['type']) ? state['name'] : `{ ${name} | ${state['type']} }`\n    } else {\n      node['label'] = `{ ${name} | { ${state['type']} | ${details} } }`\n    }\n\n    node['label'] = escapeLabel(node['label']);\n\n    let params = Object.keys(node).map((key) => `${key} = \"${node[key]}\"`).join(\", \");\n\n    return `\"${escapeName(name)}\" [${params};]`\n\n  }).join(\"\\n\");\n\n}\n\nconst transitionsAsDOT = (module: Module, selectedState: State, selectedStateTransition: Number) => {\n\n  return Object.keys(module.states).map( name => {\n\n    let state = module.states[name]\n    let escapedName = escapeName(name);\n\n    let className='';\n\n    if(!!selectedState){\n      className = 'transition-muted'\n    }\n\n    if(selectedState && selectedState.name === name){\n      className='transition-highlighted'\n    }\n\n    if(state.direct_transition !== undefined){\n      if(selectedState && state.direct_transition === selectedState.name && selectedState.name !== name){\n        className='';\n      }\n\n      if(selectedStateTransition === 0 ){\n        className += ' transition-selected';\n      }\n\n      if(module.states[state.direct_transition]){\n        return `  \"${escapedName}\" -> \"${escapeName(module.states[state.direct_transition].name)}\" [class = \"transition transition-index_0 ${className}\"];\\n`\n      } else {\n        console.log(`NO SUCH NODE TO TRANSITION TO: ${state.direct_transition} FROM ${name}`);\n      }\n    } else if(state.distributed_transition !== undefined){\n      let out_transitions = ''\n      state.distributed_transition.forEach( (t, i) => {\n        let transitionClassName = className\n        let distLabel = ''\n        if(typeof t.distribution === 'object'){\n          distLabel = `p(${t.distribution.attribute})`\n          if(t.distribution.default){\n            let pct = t.distribution.default * 100\n            distLabel += `, default ${pct}%`\n          }\n        } else {\n          let pct = t.distribution * 100\n          distLabel = `${pct}%`\n        }\n        if(module.states[t.transition]){\n          if(selectedState && t.transition === selectedState.name && selectedState.name !== name){\n            transitionClassName = '';\n          }\n\n          if(selectedStateTransition === i){\n            transitionClassName += ' transition-selected';\n          }\n          out_transitions += `  \"${escapedName}\" -> \"${escapeName(module.states[t.transition].name)}\" [label = \"${distLabel}\", class = \"transition transition-index_${i} ${transitionClassName}\"];\\n`\n        } else {\n          console.log(`NO SUCH NODE TO TRANSITION TO: ${t.transition} FROM ${name}`);\n        }\n      })\n      return out_transitions\n    } else if(state.lookup_table_transition !== undefined){\n        let out_transitions = ''\n        state.lookup_table_transition.transitions.forEach( (t, i) => {\n        let transitionClassName = className\n        let pct = t.default_probability * 100\n        let distLabel = `${pct}%`\n        if(module.states[t.transition]){\n          if(selectedState && t.transition === selectedState.name && selectedState.name !== name){\n            transitionClassName = '';\n          }\n\n          if(selectedStateTransition === i){\n            transitionClassName += ' transition-selected';\n          }\n          out_transitions += `  \"${escapedName}\" -> \"${escapeName(module.states[t.transition].name)}\" [label = \"See Table (def: ${distLabel})\", class = \"transition transition-index_${i} ${transitionClassName}\"];\\n`\n          } else {\n          console.log(`NO SUCH NODE TO TRANSITION TO: ${t.transition} FROM ${name}`);\n        }\n      })\n      return out_transitions\n    } else if (state.conditional_transition !== undefined){\n      let out_transitions = ''\n      state.conditional_transition.forEach( (t, i ) => {\n        let transitionClassName = className\n        let cnd = t.condition !== undefined ? logicDetails(t.condition) : 'else';\n        if(module.states[t.transition]){\n          if(selectedState && t.transition === selectedState.name){\n            transitionClassName = ''\n          }\n          if(selectedStateTransition === i){\n            transitionClassName += ' transition-selected';\n          }\n          out_transitions += `  \"${escapedName}\" -> \"${escapeName(module.states[t.transition].name)}\" [label = \"${i+1}. ${cnd}\", class = \"transition transition-index_${i} ${transitionClassName}\"];\\n`\n        } else {\n          console.log(`NO SUCH NODE TO TRANSITION TO: ${t.transition} FROM ${name}\\n`);\n        }\n      })\n     return out_transitions\n\n    } else if (state.complex_transition !== undefined){\n      let transitions = {}\n      let nodeHighlighted = {}\n      state.complex_transition.forEach( (t, i) => {\n        let cnd = t.condition !== undefined ? logicDetails(t['condition']) : 'else'\n        if(t.transition !== undefined){\n          if(module.states[t.transition]){\n            let nodes = `  \"${escapedName}\" -> \"${t.transition}\"`\n            if(selectedState && t.transition === selectedState.name){\n              nodeHighlighted[nodes] = 'standard'\n            }\n            if(selectedState && name === selectedState.name){\n              nodeHighlighted[nodes] = 'highlighted'\n            }\n            if(transitions[nodes] === undefined){\n              transitions[nodes] = [];\n            }\n            transitions[nodes].push(cnd)\n          } else {\n            console.log(`NO SUCH NODE TO TRANSITION TO: ${t.transition} FROM ${name}`);\n          }\n        } else {\n          t.distributions.forEach( dist => {\n            if(module.states[dist.transition]){\n              let pct = dist.distribution * 100\n              let nodes = `  \"${escapedName}\" -> \"${dist.transition}\"`\n              if(selectedState && dist.transition === selectedState.name){\n                nodeHighlighted[nodes] = 'standard'\n              }\n              if(selectedState && name === selectedState.name){\n                nodeHighlighted[nodes] = 'highlighted'\n              }\n              if(transitions[nodes] === undefined){\n                transitions[nodes] = [];\n              }\n              transitions[nodes].push(`${cnd}: ${pct}%`)\n            } else {\n              console.log(`NO SUCH NODE TO TRANSITION TO: ${dist.transition} FROM ${name}`);\n            }\n          })\n        }\n      })\n\n      let out_transitions = ''\n      Object.keys(transitions).forEach( (trans, index) => {\n        let transitionClassName = className\n        if(nodeHighlighted[trans] === 'standard'){\n          transitionClassName = ''\n        } else if(nodeHighlighted[trans] === 'highlighted'){\n          transitionClassName='transition-highlighted'\n        }\n        if(selectedStateTransition === index){\n          transitionClassName += ' transition-selected';\n        }\n        out_transitions += `${trans} [label = \"${transitions[trans].join(',\\\\n')}\", class = \"transition transition-index_${index} ${transitionClassName}\"]\\n`\n      })\n\n      return out_transitions;\n\n    }\n\n    return ''\n\n  }).join('')\n\n}\n\nconst distributionString = (distro) => {\n  switch(distro['kind']) {\n    case 'EXACT':\n      return distro['parameters']['value'];\n    case 'UNIFORM':\n      return `${distro['parameters']['low']} - ${distro['parameters']['high']}`;\n    case 'GAUSSIAN':\n      return `Mean: ${distro['parameters']['mean']}, SD: ${distro['parameters']['standardDeviation']}`\n    case 'EXPONENTIAL':\n      return `Mean: ${distro['parameters']['mean']}`\n  }\n  return '';\n}\n\nconst stateDescription = (state) =>{\n\n  let details = ''\n\n  switch(state['type']){\n    case 'Initial':\n    case 'Terminal':\n      details = ''\n      break;\n    case 'Guard':\n      details = \"Allow if \" + logicDetails(state['allow'])\n      break;\n\n    case 'Delay':\n    case 'Death':\n      if(state['range'] !== undefined){\n        let r = state['range']\n        details = `${r['low']} - ${r['high']} ${r['unit']}`\n      } else if (state['exact'] !== undefined) {\n        let e = state['exact']\n        details = `${e['quantity']} ${e['unit']}`\n      } else if (state['distribution'] !== undefined && state['unit'] !== undefined) {\n        details = `${distributionString(state['distribution'])} ${state['unit']}`\n      }\n      break;\n    case 'Encounter':\n      if(state['wellness']){\n        details = 'Wait for regularly scheduled wellness encounter\\\\n'\n      }\n      break;\n    case 'EncounterEnd':\n      details = 'End the current encounter'\n      if(state['discharge_disposition']){\n       let code = state['discharge_disposition']\n       details += `\\\\lDischarge Disposition: [${code['code']}] ${code['display']}`\n      }\n      break;\n    case 'SetAttribute':\n      if (state.range) {\n        const r = state.range;\n        details = `Set '${state[\"attribute\"]}': ${r['low']} - ${r['high']}`;\n      } else if (state['value']) {\n        let v = state['value']\n        details = `Set '${state[\"attribute\"]}' = ${(v === undefined || v === null || v === \"\") ? 'nil' : v}`\n      } else if (state.value_code !== undefined) {\n        let v = state['value_code']\n        details = `Set '${state[\"attribute\"]}' = ${v['system']}[${v['code']}]: ${v['display']}\\\\l`\n      } else if (state['distribution'] !== undefined ) {\n        details = `Set '${state[\"attribute\"]}': ${distributionString(state['distribution'])}}`\n      }\n      break;\n\n    case 'Symptom':\n     let s = state['symptom']\n     let p = state['probability']\n      if(state.range !== undefined){\n        let r = state['range']\n        details = `${s}: ${r['low']} - ${r['high']}`\n      } else if (state.exact !== undefined) {\n        let e = state['exact']\n        details = `${s}: ${e['quantity']}`\n      } else if (state['distribution'] !== undefined ) {\n        details = `${s}: ${distributionString(state['distribution'])}}`\n      }\n      if (p && p < 1.0 && p > 0) {\n        let pct = p*100;\n        details += ` (${pct}%)`\n      }\n      break;\n\n    case 'Observation':\n      let unit = state['unit']\n      if(unit){\n        unit = \"in \" + unit.replace('{','(').replace('}',')')\n      }\n\n      if(state.vital_sign !== undefined) {\n        details = `Record value from Vital Sign '${state[\"vital_sign\"]}' ${unit}\\\\l`\n      } else if (state.attribute !== undefined) {\n        details = `Record value from Attribute '${state[\"attribute\"]}' ${unit}\\\\l`\n      } else if(state.range !== undefined){\n        let r = state['range']\n        details = `Record value between: ${r['low']} - ${r['high']} ${unit}\\\\l`\n      } else if (state.exact !== undefined) {\n        let e = state['exact']\n        details = `Record value ${e['quantity']} ${unit}\\\\l`\n      } else if (state.value_code !== undefined) {\n        let v = state['value_code']\n        details = `Record value ${v['system']}[${v['code']}]: ${v['display']}\\\\l`\n      } else if (state['distribution'] !== undefined && state['unit'] !== undefined) {\n        details = `Record value ${distributionString(state['distribution'])} ${unit}`\n      }\n      break;\n\n    case 'Procedure':\n      if (state['distribution'] !== undefined && state['unit'] !== undefined) {\n        details = `Duration: ${distributionString(state['distribution'])} ${state['unit']}\\\\l`\n      }\n      break;\n\n    case 'ImagingStudy':\n      let series = state['series'];\n      if (series.length > 0) {\n        let primarySeries = series[0];\n        let primaryModality = primarySeries['modality'];\n        let primaryBodySite = primarySeries['body_site'];\n\n        details = `DICOM-DCM[${primaryModality['code']}]: ${primaryModality['display']}\\\\l`\n        details += `SNOMED-CT[${primaryBodySite['code']}]: Body Site: ${primaryBodySite['display']}\\\\l`\n      }\n      break;\n\n    case 'Counter':\n      details = `${state['action']} value of attribute '${state[\"attribute\"]}' by ${state['amount'] || 1}`\n      break;\n    case 'VitalSign':\n      let vs = state['vital_sign']\n      let unitv = state['unit']\n      if(state.range !== undefined){\n        let r = state['range']\n        details = `Set ${vs}: ${r['low']} - ${r['high']} ${unitv}`\n      } else if (state.exact !== undefined) {\n        let e = state['exact']\n        details = `Set ${vs}: ${e['quantity']} ${unitv}`\n      } else if (state['distribution'] !== undefined ) {\n        details = `Set ${vs}: ${distributionString(state['distribution'])} ${unitv}`\n      }\n      break;\n    case 'CallSubmodule':\n      details = `Call submodule '${state['submodule']}'`\n      break;\n    case 'MultiObservation':\n    case 'DiagnosticReport':\n      if(state.observations && state.observations.length > 0){\n        let diagType = ['Type']\n        let diagValue = ['Value']\n        let diagUnits = ['Unit'];\n        state.observations.forEach( (s,i) => {\n          let unit = s['unit']\n          if(unit){\n            unit = unit.replace('{','(').replace('}',')')\n          }\n          diagType.push(s.codes.map(c => c.display).join('\\\\l'))\n          diagUnits.push(unit)\n\n          if(s.vital_sign !== undefined) {\n            diagValue.push(`Vital Sign: '${s[\"vital_sign\"]}'`)\n          } else if (s.attribute !== undefined) {\n            diagValue.push(`Attribute: '${s[\"attribute\"]}'`)\n          } else if(s.range !== undefined){\n            let r = s['range']\n            diagValue.push(`${r['low']} - ${r['high']}`)\n          } else if (s.exact !== undefined) {\n            let e = s['exact']\n            diagValue.push(`${e['quantity']}`);\n          } else if (s.value_code !== undefined) {\n            let v = s['value_code']\n            diagValue.push(`${v['system']}[${v['code']}]: ${v['display']}`);\n          }\n        });\n        details += `{${diagType.map(t => t).join('|')}}|`;\n        details += `{${diagValue.map(t => t).join('|')}}|`;\n        details += `{${diagUnits.map(t => t).join('|')}}|`;\n      } else {\n        details = `No Observations\\\\l`;\n      }\n\n      break;\n\n    case 'Device':\n      const c = state.code;\n      details = `${c['system']}[${c['code']}]: ${c['display']}\\\\l`;\n\n      if (state.manufacturer) {\n        details += `Manufacturer: ${state.manufacturer}\\\\l`;\n      }\n      if (state.model) {\n        details += `Model: ${state.model}\\\\l`;\n      }\n      break;\n\n    case 'DeviceEnd':\n      if (state.device) {\n        details = `Added at: ${state.device}\\\\l`;\n      }\n      break;\n\n    case 'SupplyList':\n      if(state.supplies && state.supplies.length > 0){\n        let supplyQuantity = ['Quantity']\n        let supplyCode = ['Code'];\n        state.supplies.forEach( (s,i) => {\n          supplyQuantity.push(s.quantity);\n          const c = s.code;\n          supplyCode.push(`${c['system']}[${c['code']}]: ${c['display']}`);\n        });\n\n        details += `{${supplyCode.map(t => t).join('|')}}|`;\n        details += `{${supplyQuantity.map(t => t).join('|')}}|`;\n      } else {\n        details = `No Supplies\\\\l`;\n      }\n      break;\n\n    default:\n      break;\n\n  }\n\n  if(state.codes !== undefined){\n    state['codes'].forEach( code => {\n      if(code['value_set'] === undefined){\n        code['value_set'] = \"\";\n      }\n\n      let system_val = escapeVerticalBar(code['system']);\n      let code_val = escapeVerticalBar(code['code']);\n      let display_val = escapeVerticalBar(code['display']);\n      let valuSet_val = escapeVerticalBar(code['value_set']);\n\n      details = details + system_val + \"[\" + code_val + \"]: \" + display_val  + \"\\\\l\";\n      if (valuSet_val) {\n      \tdetails += \"Value Set:\" + \"[\" + valuSet_val +\"] \" + \"\\\\l\";\n      }\n    })\n  }\n\n  if(state.target_encounter !== undefined){\n   let verb = 'Perform'\n\n    switch(state['type']){\n      case 'ConditionOnset':\n      case 'AllergyOnset':\n        verb = 'Diagnose'\n        break;\n      case 'MedicationOrder':\n        verb = 'Prescribe'\n        break;\n      default:\n        break;\n    }\n\n    details = details + verb + \" at \" + state['target_encounter'] + \"\\\\l\"\n  }\n\n  if(state.reason){\n    details = details + `Reason: ${state['reason']}\\\\l`\n  }\n  if(state.medication_order){\n    details = details + `Prescribed at: ${state['medication_order']}\\\\l`\n  }\n  if(state.condition_onset){\n    details = details + `Onset at: ${state['condition_onset']}\\\\l`\n  }\n  if(state.allergy_onset){\n    details = details + `Onset at: ${state['allergy_onset']}\\\\l`\n  }\n  if(state.careplan){\n    details = details + `Prescribed at: ${state['careplan']}\\\\l`\n  }\n  if(state.assign_to_attribute){\n    details = details + `Assign to Attribute: '${state['assign_to_attribute']}'\\\\l`\n  }\n  if(state.administration){\n    details = details + `Medication is administered\\\\l`\n  }\n  if(state.referenced_by_attribute){\n    details = details + `Referenced By Attribute: '${state['referenced_by_attribute']}'\\\\l`\n  }\n  if(state.activities){\n    details = details + \"\\\\lActivities:\\\\l\"\n    state['activities'].forEach( activity => {\n      details = details + activity['system'] + \"[\" + activity['code'] + \"]: \" + activity['display'] + \"\\\\l\"\n    })\n  }\n  if(state.goals){\n    details = details + \"\\\\lGoals:\\\\l\"\n    state['goals'].forEach( goal => {\n      if(goal['text']){\n        details = details + goal['text'] + \"\\\\l\"\n      } else if(goal['codes']) {\n        let code = goal['codes'][0]\n        details = details + code['system'] + \"[\" + code['code'] + \"]: \" + code['display'] + \"\\\\l\"\n      } else if(goal['observation']) {\n        let logic = goal['observation']\n        let obs = findReferencedType(logic)\n        details = details + `Observation ${obs} \\\\${logic['operator']}${leaveUndefinedBlank(logic['value'])}\\\\l`\n      }\n    })\n  }\n  if(state.duration){\n    let d = state['duration']\n    details = `${details}\\\\lDuration: ${d['low']} - ${d['high']} ${d['unit']}\\\\l`\n  }\n  if(state.category){\n    details = `${details}Category: ${state['category']}\\\\l`\n  }\n  if(state.allergy_type && state.allergy_type.length > 0) {\n      details += `Type: ${state.allergy_type}\\\\l`\n  }\n  if(state.reactions && state.reactions.length > 0) {\n    state.reactions.forEach(r => {\n      details += `Reaction: ${r.reaction['system']}[${r.reaction['code']}]: ${r.reaction['display']}\\\\l`\n    });\n  }\n\n  return details;\n}\n\nconst logicDetails = logic => {\n\n  switch(logic['condition_type']){\n    case 'And':\n    case 'Or':\n      let subsWhen =logic['conditions'].map( c => {\n        if(c['condition_type'] === 'and' || c['condition_type'] === 'or'){\n          return \"(\\\\l\" + logicDetails(c) + \")\\\\l\"\n        } else {\n          return logicDetails(c)\n        }\n      })\n      return subsWhen.join(logic['condition_type'].toLowerCase() + ' ')\n    case 'At Least':\n    case 'At Most':\n      let threshold = logic['minimum'] || logic['maximum']\n      let subsOr = logic['conditions'].map( c => {\n        if(c['condition_type'] === 'and' || c['condition_type'] === 'or'){\n          return \"(\\\\l\" + logicDetails(c) + \")\\\\l\"\n        } else {\n          return logicDetails(c)\n        }\n      });\n      return `${logic['condition_type']} ${threshold} of:\\\\l- ${subsOr.join('- ')}`\n    case 'Not':\n      let condition = logicDetails(logic['condition'])\n      return `not ${condition}`\n    case 'Gender':\n      return `gender is '${logic['gender']}'\\\\l`\n    case 'Age':\n      return `age \\\\${logic['operator']} ${logic['quantity']} ${logic['unit']}\\\\l`\n    case 'Socioeconomic Status':\n      return `${logic['category']} Socioeconomic Status\\\\l`\n    case 'Race':\n      return `race is '${logic['race']}'\\\\l`\n    case 'Date':\n      if (logic.year !== undefined) {\n        return `Year is \\\\${logic['operator']} ${logic['year']}\\\\l`\n      } else if (logic.month !== undefined) {\n        return `Month is \\\\${logic['operator']} ${logic['month']}\\\\l`\n      } else if (logic.date !== undefined) {\n        let d = logic['date']\n        return `Date is \\\\${logic['operator']} ${d['year']}-${d['month']}-${d['day']} ${d['hour']}:${d['minute']}:${d['second']}.${d['millisecond']}\\\\l`\n      }\n    case 'Symptom':\n      return `Symptom: '${logic['symptom']}' \\\\${logic['operator']} ${logic['value']}\\\\l`\n    case 'PriorState':\n      let prior_description = `state '${logic['name']}' has been processed`\n      if(logic.since !== undefined){\n        prior_description = `${prior_description} since ${logic.since}`\n      }\n      if(logic.within !== undefined){\n        prior_description = `${prior_description} within ${logic.within['quantity']} ${logic.within['unit']}`\n      }\n      return `${prior_description} \\\\l`\n    case 'Attribute':\n      return `Attribute: '${logic['attribute']}' \\\\${logic['operator']}${leaveUndefinedBlank(logic['value'])}\\\\l`\n    case 'Observation':\n      let obs = findReferencedType(logic)\n      if (logic.operator !== 'is nil' && logic.operator !== 'is not nil' && logic.operator.id !== 'is nil' && logic.operator.id !== 'is not nil'){\n        if(logic.value !== undefined){\n          return `Observation ${obs} \\\\${logic['operator']}${leaveUndefinedBlank(logic['value'])}\\\\l`\n        } else if (logic.value_code !== undefined) {\n          return `Observation ${obs} \\\\${logic['operator']} ${logic.value_code['system']}[${logic.value_code['code']}]: ${logic.value_code['display']}\\\\l`\n        }\n      } else {\n        return `Observation ${obs} \\\\${logic['operator']}\\\\l`\n      }\n\n    case 'Vital Sign':\n      return `Vital Sign ${logic['vital_sign']} \\\\${logic['operator']} ${logic['value']}\\\\l`\n    case 'Active Condition':\n      let cond = findReferencedType(logic)\n      return `Condition ${cond} is active\\\\l`\n    case 'Active CarePlan':\n      let plan = findReferencedType(logic)\n      return `CarePlan ${plan} is active\\\\l`\n    case 'Active Medication':\n      let med = findReferencedType(logic)\n      return `Medication ${med} is active\\\\l`\n    case 'Active Allergy':\n      let alg = findReferencedType(logic)\n      return `Allergy ${alg} is active\\\\l`\n    case 'True':\n    case 'False':\n      return logic['condition_type']\n    default:\n      return `Unknown Condition: ${logic['condition_type']}`\n\n  }\n}\n\nconst findReferencedType = (logic) => {\n  if(logic['codes']){\n    let code = logic['codes'][0]\n    return `'${code['system']} [${code['code']}]: ${code['display']}'`\n  } else if (logic['referenced_by_attribute']) {\n    return `Referenced By Attribute: '${logic['referenced_by_attribute']}'`\n  }\n  return `Error with referenced types: ${logic['condition_type']} condition must be specified by code or attribute`\n}\n\nconst findTransitions = (obj, ret) => {\n\n  if(!ret) ret = {};\n  if (!obj) return ret;\n  if (obj instanceof Array) {\n    for (let i in obj) {\n        ret = Object.assign({}, ret, findTransitions(obj[i], {}))\n    }\n    return ret;\n  }\n\n  if (obj['direct_transition']) ret[obj['direct_transition']] = true\n  if (obj['transition']) ret[obj['transition']] = true;\n\n  if ((typeof obj === \"object\") && (obj !== null) ){\n    let children = Object.keys(obj);\n    if (children.length > 0){\n      for (let i = 0; i < children.length; i++ ){\n        ret = Object.assign({}, ret,findTransitions(obj[children[i]], {}));\n      }\n    }\n  }\n  return ret;\n}\n\nconst leaveUndefinedBlank = (value) => {\n  if(value === undefined){\n    return '';\n  } else {\n    return ' ' + value;\n  }\n}\n\nconst escapeId = (name) => {\n  return cleanString(name, {'?': '', '\"': \"\"});\n};\n\nconst escapeName = (name) => {\n  return  cleanString(name, {'\"': '\\\\'});\n};\n\nconst escapeLabel = (label) => {\n\n  // note: order matters; in practice order is retained in browsers but we may want to make an array\n  const mapObj = {\n        \"&\" : \"&amp;\",\n        \"<\" : \"&lt;\",\n        \">\" : \"&gt;\",\n        '\"' : '\\\\\"',\n        };\n\n  return cleanString(label, mapObj);\n\n}\n\nconst escapeVerticalBar = (inputStr) => {\n  inputStr = inputStr.toString();\n  return inputStr.replace(/\\|/g, \"\\\\|\")\n};\n\nexport const svgDefs = `<defs>\n\n  <filter id=\"outershadow\" height=\"200%\" width=\"200%\" x=\"-75%\" y=\"-75%\" color-interpolation-filters=\"sRGB\">\n    <feMorphology operator=\"dilate\" radius=\"3\" in=\"SourceAlpha\" result=\"thicken\" />\n    <feGaussianBlur in=\"thicken\" stdDeviation=\"4\" result=\"blurred\" />\n    <feFlood flood-color=\"#336699\" result=\"glowColor\" />\n    <feComposite in=\"glowColor\" in2=\"blurred\" operator=\"in\" result=\"glowComposite\" />\n    <feMerge>\n      <feMergeNode in=\"glowComposite\"/>\n      <feMergeNode in=\"SourceGraphic\"/>\n    </feMerge>\n  </filter>\n</defs>`;\n\n","// @flow\nimport React, { Component } from 'react';\n\nimport svgPanZoom from  'svg-pan-zoom';\n\nimport Viz from 'viz.js';\nimport {generateDOT,svgDefs} from '../../utils/graphviz';\n\nimport './ModuleGraph.css';\n\nimport type { Module } from './types/Module';\nimport type { State } from './types/State';\n\ntype Props = {\n  module: Module,\n  onClick: (id:string) => mixed,\n  selectedState: State\n}\n\nclass ModuleGraph extends Component<Props> {\n\n  constructor(props) {\n    super(props);\n    this.onPanZoom = this.onPanZoom.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.bold = false;\n    this.lastDOT = '';\n  }\n\n  componentDidMount(){\n    this.writeSVG(this.props.module)\n    this.mount.addEventListener('mouseup', this.onMouseUp);\n    this.mount.addEventListener('mousedown', this.onMouseDown);\n  }\n\n  componentWillReceiveProps(nextProps: Props){\n\n    if(nextProps.module.name !== this.props.module.name){\n      this.panZoomSettings = null\n    }\n\n    this.writeSVG(nextProps.module, nextProps.selectedState, nextProps.selectedStateTransition);\n\n    if(nextProps.fullscreen !== this.props.fullscreen){\n      if(nextProps.fullscreen){\n        this.svgPanZoom.panBy({x: 250, y: 0});\n        this.customPanBy({x: -100, y: 0})\n      }else{\n        this.svgPanZoom.panBy({x: -250, y: 0});\n        this.customPanBy({x: 100, y: 0})\n      }\n    }\n\n    if(this.panZoomSettings){\n      this.blockPanZoomEvent = true\n      this.svgPanZoom.zoom(this.panZoomSettings.zoom, true);\n      this.svgPanZoom.pan(this.panZoomSettings.pan, true);\n      this.blockPanZoomEvent = false\n    }\n\n  }\n\n  customPanBy(amount) { // {x: 1, y: 2}\n    var animationTime = 300 // ms\n      , animationStepTime = 15 // one frame per 30 ms\n      , animationSteps = animationTime / animationStepTime\n      , animationStep = 0\n      , intervalID = null\n      , stepX = amount.x / animationSteps\n      , stepY = amount.y / animationSteps\n\n    intervalID = setInterval(() => {\n      if (animationStep++ < animationSteps) {\n        if(this.svgPanZoom){\n        this.svgPanZoom.panBy({x: stepX, y: stepY})\n        }\n      } else {\n        // Cancel interval\n        clearInterval(intervalID)\n      }\n    }, animationStepTime)\n  }\n\n\n  render() {\n    return (\n        <div ref={mount => this.mount = mount } className={'Module ' + (this.props.fullscreen ? \"Module-fullscreen\" : 'Module-standard-screen')}>\n         <svg width=\"50000px\" height=\"50000px\" xmlns=\"http://www.w3.org/2000/svg\" style={{opacity: .3}}>\n           <defs>\n            <pattern id=\"smallGrid\" width=\"10\" height=\"10\" patternUnits=\"userSpaceOnUse\">\n              <path d=\"M 10 0 L 0 0 0 10\" fill=\"none\" stroke=\"#95b4cf\" strokeWidth=\"0.5\"/>\n            </pattern>\n            <pattern id=\"grid\" width=\"100\" height=\"100\" patternUnits=\"userSpaceOnUse\">\n              <rect width=\"100\" height=\"100\" fill=\"url(#smallGrid)\"/>\n              <path d=\"M 100 0 L 0 0 0 100\" fill=\"none\" stroke=\"#95b4cf\" strokeWidth=\"1\"/>\n            </pattern>\n          </defs>\n          <g>\n            <rect width=\"100%\" height=\"100%\" style={{\"transform\": \"translate(-50%, -50%)\"}} fill=\"url(#grid)\" />\n          </g>\n        </svg>\n        <div style={{\"position\":\"absolute\", \"top\": 0, \"left\": 0, \"width\": \"100%\", \"height\": '100%'}} className=\"Module-graph\">\n        </div>\n      </div>\n    )\n  }\n  onMouseUp(e) {\n    if(this.fireClickOnMouseUp){\n      this.props.onClick();\n    }\n  }\n  onMouseDown() {\n    this.fireClickOnMouseUp = true;\n  }\n\n  onPanZoom() {\n    if(this.blockPanZoomEvent) return;\n\n    this.fireClickOnMouseUp = false;\n    this.panZoomSettings = {pan: this.svgPanZoom.getPan(), zoom: this.svgPanZoom.getZoom()};\n\n    this.mount.children[0].children[1].setAttribute('transform', this.mount.children[1].children[0].children[1].attributes['transform'].value)\n\n    let linesShouldBold = Math.max(this.originalWidth, this.originalHeight) / this.svgPanZoom.getZoom() > 1500\n\n    if(linesShouldBold && !this.bold){\n      this.bold = true\n      this.mount.children[1].className = 'Module bold-lines'\n    } else if(!linesShouldBold && this.bold){\n      this.bold = false\n      this.mount.children[1].className = 'Module'\n    }\n\n  }\n\n  writeSVG(module: Module, selectedState: State, selectedStateTransition: Number){\n\n    const dot = generateDOT(module, selectedState, (selectedStateTransition: Number));\n    if(dot === this.lastDOT){\n      return;\n    }\n\n    this.lastDOT = dot;\n\n    /* write SVG */\n    try {\n      this.mount.children[1].innerHTML= Viz(dot).replace('</svg>', svgDefs + '</svg>');\n    } catch (ex) {\n      alert('Invalid module: ' + ex.message)\n      this.mount.children[1].innerHTML = `<svg width=\"10px\" height=\"10px\"/>`;\n    }\n\n    let svg = this.mount.children[1].children[0]\n\n    /* Add event handlers for states */\n    Object.keys(module.states).forEach( s => {\n      let el = document.getElementById(`node_${s.replace('?','')}`);     \n\n      if(el){\n        // force rerender because of a pan bug\n        el.addEventListener('mouseup', (e) => {this.lastDOT = null;e.stopPropagation(); this.props.onClick(s)});\n\n        if(selectedState && s === selectedState.name){\n          // assume path is at index 1 to speed things up.  bad assumption?\n          el.children[1].setAttribute('filter', 'url(#outershadow)')\n        } else {\n          el.children[1].removeAttribute('filter')\n        }\n      }\n\n    })\n\n    // Removes the title elmeent generated by graph viz that causes a \"G\" to always show on mouse hover\n    const unnecessaryGTitle = document.querySelector('svg > g > title');\n    if(unnecessaryGTitle){\n      unnecessaryGTitle.remove();\n    }\n\n    const unnecessaryFill = document.querySelector('svg > g > polygon');\n    if(unnecessaryFill){\n      unnecessaryFill.remove();\n    }\n\n    /* Add event handlers for transitions, and increase their 'hit box' size */\n    document.querySelectorAll('.edge.transition').forEach( group => {\n      let originator = group.querySelector('title').innerHTML.split('-&gt;')[0]\n      let hitLine = group.querySelector('path').cloneNode(true)\n      let transitionIndex = null;\n      let transitionIndexClass = group.className.baseVal.split(' ').find(t => t.startsWith('transition-index'));\n      if(transitionIndexClass){\n        try{\n          transitionIndex = parseInt(transitionIndexClass.split('_')[1])\n        } catch(e){\n          // just ignore if not a number\n        }\n\n      }\n      hitLine.setAttribute('class', 'transition-hitbox');\n      hitLine.setAttribute('stroke-width', 20)\n      hitLine.setAttribute('opacity', 0)\n      group.appendChild(hitLine)\n\n      group.querySelectorAll('path,text').forEach( path => {\n        // force rerender because of a pan bug\n        path.addEventListener('mouseup', (e) => {this.lastDOT = null;e.stopPropagation(); this.props.onClick(originator, transitionIndex)});\n      })\n    })\n\n    /* Bump the transition labels to the right because it is too crowded */\n    document.querySelectorAll('svg .edge text').forEach(t => t.setAttribute('x', parseFloat(t.getAttribute('x'))+5))\n\n    /* add pan/zoom if available */\n    if(typeof svgPanZoom === \"function\"){\n\n      this.originalWidth = svg.attributes.width.value.match(/\\d+/g).map(Number)[0];\n      this.originalHeight = svg.attributes.height.value.match(/\\d+/g).map(Number)[0];\n\n      let offsetLeft = this.mount.children[1].getBoundingClientRect().x\n      let offsetTop = this.mount.children[1].getBoundingClientRect().y\n      let visibleWidth = this.mount.children[1].getBoundingClientRect().width - offsetLeft;\n      let visibleHeight = this.mount.children[1].getBoundingClientRect().height - offsetTop;\n\n      this.mount.children[1].children[0].setAttribute('width', '100%')\n      this.mount.children[1].children[0].setAttribute('height', '100%')\n\n      let zoomFactor = 1\n\n      if(this.originalWidth / this.originalHeight > visibleWidth / visibleHeight){\n        //width constrained\n        zoomFactor = visibleWidth / this.originalWidth;\n      } else {\n        //height constrained\n        zoomFactor = visibleHeight / this.originalHeight;\n      }\n\n      this.svgPanZoom = svgPanZoom(this.mount.children[1].children[0],{\n          controlIconsEnabled: false, // BUGGY BECAUSE OF EVENT HANDLERS \n          minZoom: .1,\n          onPan: this.onPanZoom,\n          onZoom: this.onPanZoom,\n        });\n\n      let panZoomControlsElement = document.getElementById('svg-pan-zoom-controls');\n\n      if(panZoomControlsElement){\n        /* DISABLED BECAUSE BUGGY WITH OTHER EVENT HANDLERS */\n        panZoomControlsElement.setAttribute(\"transform\", `translate(${visibleWidth-100} ${visibleHeight-150}) scale(.75)`)\n        document.getElementById('svg-pan-zoom-zoom-in').addEventListener('mouseup', (e) => {this.svgPanZoom.zoomIn()});\n        document.getElementById('svg-pan-zoom-zoom-out').addEventListener('mouseup', (e) => {this.svgPanZoom.zoomOut()});\n        document.getElementById('svg-pan-zoom-reset-pan-zoom').addEventListener('mouseup', (e) => {\n          e.stopPropagation();\n          this.svgPanZoom.pan({x: this.svgPanZoom.getPan().x - offsetLeft/2 , y: 50}, true)\n          this.svgPanZoom.zoom(Math.pow(.8,zoomFactor), true);\n        });\n      }\n\n      if(!this.panZoomSettings){\n        /* first time load of module */\n        /* center and bump down a bit */\n        this.svgPanZoom.pan({x: this.svgPanZoom.getPan().x - offsetLeft/2 , y: 50}, true)\n        this.svgPanZoom.zoom(Math.pow(.8,zoomFactor), true);\n      }\n\n    }\n\n  }\n}\n\nexport default ModuleGraph;\n","import React, {useMemo} from 'react';\nimport {useDropzone} from 'react-dropzone';\n\nconst baseStyle = {\n  flex: 1,\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  padding: '25px',\n  borderWidth: 2,\n  borderRadius: '5px',\n  marginBottom: '15px',\n  borderColor: '#666666',\n  borderStyle: 'dashed',\n  backgroundColor: '#ffffff',\n  outline: 'none',\n  transition: 'border .15s ease-in-out'\n};\n\nconst activeStyle = {\n  borderColor: '#336699',\n  backgroundColor: '#dceaef',\n  color: '#336699'\n};\n\nconst acceptStyle = {\n  borderColor: '#339999',\n  cursor: 'hand'\n};\n\nconst rejectStyle = {\n  borderColor: '#ff1744',\n  backgroundColor: '#ffeeee',\n  cursor: 'no-drop'\n};\n\nfunction StyledDropzone(props) {\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive,\n    isDragAccept,\n    isDragReject\n  } = useDropzone({accept: 'application/json',onDrop:props.onDrop});\n\n  const style = useMemo(() => ({\n    ...baseStyle,\n    ...(isDragActive ? activeStyle : {}),\n    ...(isDragAccept ? acceptStyle : {}),\n    ...(isDragReject ? rejectStyle : {})\n  }), [\n    isDragActive,\n    isDragReject\n  ]);\n\n  return (\n    <div className=\"LoadModule-dropzone\">\n      <div {...getRootProps({style})}>\n        <input {...getInputProps()} />\n        <p>Drop files here or click to open saved modules.</p>\n      </div>\n    </div>\n  );\n}\n\nexport default StyledDropzone;\n","const LOCAL_STORAGE_KEY = 'modules';\n\n/**\n * Get any existing modules that exist in local storage\n *\n * @returns Object keyed by module name whose values are the module JSON\n */\nexport function getLocalStorageModules() {\n  const existingModules = localStorage.getItem(LOCAL_STORAGE_KEY);\n\n  if (!existingModules) return {};\n\n  return JSON.parse(existingModules);\n}\n\n/**\n * Get a module in local storage by name\n *\n * @param {string} moduleName name to lookup\n * @returns matching entry in the modules object, or null if none found\n */\nexport function getLocalStorageModuleByName(moduleName) {\n  const allModules = getLocalStorageModules();\n\n  return allModules[moduleName] || null;\n}\n\n/**\n * Save a module to local storage\n *\n * @param {Object} module the JSON content of the module being saved\n */\nexport function saveLocalStorageModule(module) {\n  const newModuleObject = { ...getLocalStorageModules() };\n\n  const timestamp = new Date().toLocaleString();\n\n  newModuleObject[module.name] = { module, timestamp };\n\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(newModuleObject));\n}\n\n/**\n * Delete a specific module from the object in localStorage\n *\n * @param {string} moduleName name of the module to remove\n */\nexport function removeLocalStorageModule(moduleName) {\n  const existingModules = getLocalStorageModules();\n\n  if (existingModules[moduleName]) {\n    const newModules = { ...existingModules };\n    delete newModules[moduleName];\n\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(newModules));\n  }\n}\n","import React, { Component } from 'react';\nimport './LoadModule.css';\nimport {generateDOT} from '../../utils/graphviz';\nimport StyledDropzone from './StyledDropZone';\nimport {\n  getLocalStorageModules,\n  removeLocalStorageModule,\n} from \"../../utils/localStorageHelpers\";\n\nclass LoadModule extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {json: '', selectedOption: 'core'}\n  }\n\n  loadModule = (json) => {\n    try {\n      let module = JSON.parse(json)\n\n      if(module.name === undefined){\n        throw new Error('Module must have a name.')\n      }\n\n      if(module.states === undefined || Object.keys(module.states).length === 0){\n        throw new Error('Module must have at least one state.')\n      }\n\n      let tableMessage =  ''\n\n      // need to get the tables for any table transition\n      for (var key in module.states)\n      {\n        if (module.states[key].lookup_table_transition != null)\n        {\n          tableMessage += key.toString() + ' & '\n\n          // this is an awful hack to get around a data model mismatch\n          const lttWrapper = { type: 'Table', transitions: module.states[key].lookup_table_transition };\n          module.states[key].lookup_table_transition = lttWrapper;\n\n\n          // put default data in for state of the table transition\n          module.states[key].lookup_table_transition.lookup_table_name_ModuleBuilder = module.states[key].lookup_table_transition.transitions[0].lookup_table_name;\n          module.states[key].lookup_table_transition.viewTable = false;\n          module.states[key].lookup_table_transition.lookuptable = '';\n        }\n      }\n\n      if (tableMessage.length > 0)\n      {\n        tableMessage = tableMessage.substr(0, tableMessage.length - 2);\n        // make a pop-up to tell the user to enter the table data\n        alert('Table Transition must be filled out in Module Builder for ' + tableMessage)\n      }\n      // this will throw an error if the module is incomprehensible\n      let dot = generateDOT(module);\n\n      this.props.newModule(module)\n      this.setState({...this.state, json: '', selectedOption: 'core'})\n\n    } catch (ex) {\n      alert('Error creating module: ' + ex.message);\n    }\n\n  }\n\n  onClick = (key) => {\n    return () => {\n      this.setState({...this.state, json: '', selectedOption: 'core'})\n      this.props.push('#' + key);\n    }\n  }\n\n  onDrop = (files) => {\n    files.forEach(file => {\n      const reader = new FileReader();\n\n      reader.onload = () => {\n        this.loadModule(reader.result);\n      };\n      reader.readAsText(file);\n    });\n  }\n\n  onLoadJSON = () => {\n    this.loadModule(this.state.json);\n  };\n\n  onOptionClick = (key) =>{\n    return () => {\n      this.setState({...this.state, selectedOption: key});\n    }\n  }\n\n  updateJson = (event) => {\n    this.setState({...this.state, json: event.target.value})\n  }\n\n  renderFooter = () => {\n    let loadButton = <span/>\n    if(this.state.selectedOption === 'json'){\n        loadButton = <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={this.onLoadJSON}>Load</button>\n    }\n    let closeButton = <span/>\n    if(!this.props.welcome){\n      closeButton = <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={this.props.onHide}>Close</button>\n    }\n\n    return <div className=\"modal-footer\" style={{height: 69}}>\n      {loadButton}\n      {closeButton}\n    </div>\n\n  }\n\n  renderDetails = () => {\n\n    switch(this.state.selectedOption){\n      case 'core':\n        return (\n          <ul className='LoadModule-list'>\n            { Object.keys(this.props.library).filter(n => (n.indexOf('/') === -1)).map( (key, index) => {\n              let module = this.props.library[key]\n              return (\n                <li key={key}><button className='btn btn-link' onClick={this.onClick(key)}>{module.name}</button></li>\n              )\n            })}\n          </ul>\n        )\n\n      case 'submodules':\n        return (\n          <ul className='LoadModule-list'>\n            { Object.keys(this.props.library).filter(n => (n.indexOf('/') > -1)).map( (key, index) => {\n              let module = this.props.library[key]\n              return (\n                <li key={key}><button className='btn btn-link' onClick={this.onClick(key)}>{key.split('/').slice(0,-1).join(': ') + ': ' + module.name}</button></li>\n              )\n            })}\n          </ul>\n        )\n\n      case 'my':\n        return (\n          <ul className='LoadModule-list'>\n            { Object.keys(this.props.modules).map( (key, index) => {\n              let module = this.props.modules[key]\n              return (\n                <li key={key}><button className='btn btn-link' onClick={this.onClick(key)}>{module.name} ({key})</button></li>\n              )\n            })}\n          </ul>\n        )\n\n\n      case 'json':\n        return (\n          <textarea id='loadJSON' value={this.state.json} onChange={this.updateJson}></textarea>\n        )\n\n      case 'git':\n        const columns = 1 + (this.state.Modules ? 1 : 0) + (this.state.Submodules ? 1 : 0);\n        const colsize = 12 / columns;\n\n        return(\n        <div className='row'>\n          <div className={`col-${colsize} nopadding`}>\n            <ul className='LoadModule-list'>\n              {this.state.Branches}\n            </ul>\n          </div>\n          {this.state.Modules && (\n            <div className={`col-${colsize} nopadding`}>\n              <ul className='LoadModule-list'>\n                {this.state.Modules}\n              </ul>\n            </div>\n            )}\n          {this.state.Submodules && (\n            <div className={`col-${colsize} nopadding`}>\n                <ul className='LoadModule-list'>\n                  {this.state.Submodules}\n                </ul>\n              </div>\n            )}\n        </div>\n        )\n\n    case 'local-storage':\n      return (\n        <ul className=\"LoadModule-list\">\n          {Object.keys(this.state.localStorageModules || {}).map(moduleName => { \n            const moduleEntry = this.state.localStorageModules[moduleName]\n            return (\n              <li key={moduleName}>\n                <div className=\"d-flex\">\n                  <div className=\"flex-grow-1\">\n                    <button className='btn btn-link' onClick={() => {\n                      this.loadModule(JSON.stringify(moduleEntry.module))\n                    }}>\n                      {moduleName} (Last saved: {moduleEntry.timestamp})\n                    </button>\n                  </div>\n                  <div className=\"flex-shrink-1 mx-5\">\n                    <button className=\"close h-100 w-100\" aria-label=\"Close\" onClick={() => {\n                      removeLocalStorageModule(moduleName);\n                      this.updateLocalStorageModules();\n                    }}>\n                      <span aria-hidden=\"true\">&times;</span>\n                    </button>\n                  </div>\n                </div>\n              </li>\n            );\n          })}\n        </ul>\n      );\n    default:\n      return;\n    }\n  }\n\n  changeColor(ID, type) {\n    if (type === 'submodule') return; // as of now, the submodule panel doesn't persist so don't bother coloring it\n\n    document.getElementById(ID).style.backgroundColor = \"#ddd\";\n    let list = []\n    switch(type) {\n      case 'branch':\n        list = this.state.Branches\n        break;\n      case 'module':\n        list = this.state.Modules\n        break;\n      default:\n        break;\n    }\n    list.forEach((i) => {\n      if (i.props.id !== ID) {\n        document.getElementById(i.props.id).style.backgroundColor = \"#eee\";\n      }\n    });\n  }\n\n  updateLocalStorageModules() {\n    const existingModules = getLocalStorageModules();\n\n    this.setState({\n      localStorageModules: existingModules,\n    });\n  }\n\n  fetchBranchList() {\n    fetch(`https://api.github.com/repos/synthetichealth/synthea/branches`)\n    .then(response => response.json())\n    .then(data => {\n      this.setState({\n        Branches: data.map((branch, i) => (\n          <li key={i} id={branch.name}><button className='btn btn-link' onClick={() => {this.changeColor(branch.name, 'branch');this.fetchModuleList(branch.name)}}>{branch.name}</button></li>\n        ))\n      })\n    })\n    .catch(error => console.log('error: ', error));\n  }\n\n  fetchModuleList(branch) {\n    this.setState({\n      currentBranch: branch\n    })\n    fetch(`https://api.github.com/repos/synthetichealth/synthea/contents/src/main/resources/modules?ref=` + branch)\n      .then(response => response.json())\n      .then(data => {\n        this.setState({\n          Modules: this.mapFolderContentsToList(data, [], 'module'),\n          Submodules: null // reset submodules to prevent 404 errors\n        })\n      })\n      .catch(error => console.log('error: ', error));\n  }\n\n  fetchFile(path) {\n    fetch(`https://raw.githubusercontent.com/synthetichealth/synthea/` + this.state.currentBranch + `/src/main/resources/modules/` + path.join('/'))\n      .then(response => response.text())\n      .then(data => this.loadModule(data))\n      .then(this.setState ({\n        Submodules: null,\n        Modules: null\n      }))\n      .catch(error => console.log('error: ', error));\n  }\n\n  fetchFolder(path) {\n    fetch(`https://api.github.com/repos/synthetichealth/synthea/contents/src/main/resources/modules/` + path.join('/') + `?ref=` + this.state.currentBranch)\n      .then(response => response.json())\n      .then(data => this.setState({\n        Submodules: this.mapFolderContentsToList(data, path, 'submodule')\n      }))\n      .catch(error => console.log('error: ', error));\n  }\n\n  mapFolderContentsToList(data, path, type) {\n    data.sort((a, b) => {\n      // sort folders ahead of files, but both groups should use the usual alphabetical order\n      const aIsFile = a.name.endsWith(\".json\");\n      const bIsFile = b.name.endsWith(\".json\");\n\n      if (aIsFile === bIsFile) return a.name.localeCompare(b.name);\n      \n      if (aIsFile) {\n        // then we know B is a folder, B is first\n        return 1;\n      }\n      // now we know A is a folder, A is first\n      return -1;\n    });\n    const list = data.map((item, i) => {\n      const name = item.name;\n      const isFile = name.endsWith(\".json\");\n      const displayName = isFile ? name : name + '/'; \n      return (\n      <li key={i} id={item.name}>\n        <button className='btn btn-link' onClick={() => { this.changeColor(item.name, type); isFile ? this.fetchFile(path.concat(name)) : this.fetchFolder(path.concat(name))}}>\n          {displayName}\n        </button>\n      </li>\n    )});\n\n    if (path.length > 1) {\n      // add a \"go back\" option at the top\n      list.unshift((\n        <li key={-1} id=\"go-up-one\">\n          <button className='btn btn-link' onClick={() => {this.fetchFolder(path.slice(0,-1))}}>\n            ^ up one folder\n          </button>\n        </li>\n        ));\n    }\n\n    return list;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      this.state.selectedOption === \"git\" &&\n      prevState.selectedOption !== \"git\"\n    ) {\n      this.fetchBranchList();\n    } else if (\n      this.state.selectedOption === \"local-storage\" &&\n      prevState.selectedOption !== \"local-storage\"\n    ) {\n      this.updateLocalStorageModules();\n    }\n  }\n\n  renderWelcomeMessage = () => {\n    if(this.props.welcome){\n      return (<div>\n        Welcome to Synthea Module Builder.  Please visit the documentation first.\n        </div>)\n    }\n\n    return <div />\n  }\n\n  render() {\n\n    let classDetails = \" hide\", style = {display: 'none'}\n\n    if(this.props.visible){\n      classDetails = \" show\";\n      style = {display: 'block'}\n    }\n\n    return (\n      <div>\n        <div className={'modal ' +  classDetails} style={style}>\n            <div className=\"modal-content\" style={{width:\"1024px\", marginLeft: '15%', marginRight: '15%', marginTop: 50}}>\n              <div className=\"modal-header\">\n                <h5 className=\"modal-title\">{(!this.props.welcome ? 'Load Module' : 'Synthea Module Builder')}</h5>\n                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={this.props.onHide} style={{display: (this.props.welcome ? 'none' : '')}}>\n                  <span aria-hidden=\"true\">&times;</span>\n                </button>\n              </div>\n              <div className=\"modal-body LoadModule-body\">\n                <StyledDropzone onDrop={this.onDrop.bind(this)}/>\n                <div className='container'>\n                  <div className='row'>\n                    <div className='col-3 nopadding'>\n                      <ul className='LoadModule-options'>\n                         <li className={(this.state.selectedOption === 'core') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('core')}>Core Modules</button></li>\n                         <li className={(this.state.selectedOption === 'submodules') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('submodules')}>Submodules</button></li>\n                         {Object.keys(this.props.modules).length > 0 ? <li className={(this.state.selectedOption === 'my') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('my')}>My Modules</button></li> : ''}\n                         <li className={(this.state.selectedOption === 'json') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('json')}>Paste JSON</button></li>\n                         <li className={(this.state.selectedOption === 'git') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('git')}>GitHub Modules</button></li>\n                         <li className={this.state.selectedOption === 'local-storage' ? 'selected' : '' }><button className='btn btn-link' onClick={this.onOptionClick('local-storage')} >Local Storage</button></li>\n                      </ul>\n                    </div>\n                    <div className='col-9 nopadding'>\n                      {this.renderDetails()}\n                    </div>\n                  </div>\n                </div>\n              </div>\n              {this.renderFooter()}\n          </div>\n        </div>\n        <div className={`modal-backdrop ${classDetails}`} style={style}/>\n      </div>\n    )\n  }\n}\n\nexport default LoadModule;\n","import React, { Component } from 'react';\nimport FileSaver from 'file-saver';\nimport _ from 'lodash'\nimport { getLocalStorageModuleByName, saveLocalStorageModule } from '../../utils/localStorageHelpers';\n\nimport './Download.css';\n\nclass Download extends Component {\n  constructor(props) {\n    super(props);\n    this.onDownload = this.onDownload.bind(this);\n\n    this.state = {\n      saveSuccess: false,\n    };\n  }\n  \n  onDownload(){\n    let blob = new Blob([this.refs.codeInput.value], {\n       type: \"text/plain;charset=utf-8\"\n    });\n\n    this.downloadCsvs();\n\n    let filename = this.props.module.name.replace(/[^a-z0-9]/gi, '_').toLowerCase();\n\n    FileSaver.saveAs(blob, `${filename}.json`, true); // true = no BOM, see https://github.com/eligrey/FileSaver.js/issues/160\n  }\n\n  downloadCsvs(){\n    \n    let module = _.cloneDeep(this.props.module);\n\n    // Go through the states\n    Object.keys(module.states).map(k => module.states[k]).forEach( s => {\n\n      // find table transitions and download the tables\n      if (s.lookup_table_transition !== undefined){\n        this.downloadCsv(s.lookup_table_transition.lookup_table_name_ModuleBuilder, s.lookup_table_transition.lookuptable);\n      }\n\n    })\n  }\n\n  downloadCsv(filename, data){\n      // the \\n are getting encoded to \\ + n. replace that with a line break\n      data = encodeURIComponent(data);\n      data = data.replace(/%5Cn/g, \"%0D%0A\"); \n\n      \n      var element = document.createElement('a');   \n      element.style.display = 'none';   \n      element.setAttribute('href', 'data:text/csv;charset=utf-8,' + data);\n      element.setAttribute('download', filename);\n      document.body.appendChild(element);\n      element.click();\n      document.body.removeChild(element);\n  }\n\n  prepareJSON(){\n    let module = _.cloneDeep(this.props.module);\n\n    // We currently save name in the state for convenience\n    // In lieu of a better solution, we will just remove it here\n    Object.keys(module.states).map(k => module.states[k]).forEach( s => {\n      if(s['name'] !== undefined){\n        delete s.name;\n      }\n\n      // Remove empty code value sets\n      if(s['codes'] !== undefined){\n        s['codes'].forEach( c => {\n          if (c.value_set !== undefined && !c.value_set){\n            delete c.value_set;\n          }\n        })\n      }\n\n      // find table transitions and delete state data\n      if (s.lookup_table_transition !== undefined){\n        let name = s.lookup_table_transition.lookup_table_name_ModuleBuilder;\n        s.lookup_table_transition.transitions.forEach( t => \n          {\n            t.lookup_table_name = name;\n          })\n        delete s.lookup_table_transition.lookup_table_name_ModuleBuilder;\n        delete s.lookup_table_transition.lookuptable;\n        delete s.lookup_table_transition.viewTable;\n        s.lookup_table_transition = s.lookup_table_transition.transitions;\n      }\n\n    })\n\n    return JSON.stringify(module, null, 2)\n  }\n\n  saveToLocalStorage = () => {\n    let shouldSave = true;\n    const localStorageModule = getLocalStorageModuleByName(this.props.module.name)\n\n    if (localStorageModule) {\n      shouldSave = confirm(`Module named \"${localStorageModule.module.name}\" (Last saved: ${localStorageModule.timestamp}) already exists in local storage. Overwrite?`);\n    }\n\n    if (shouldSave) {\n      saveLocalStorageModule(this.props.module);\n\n      this.setState({\n        saveSuccess: true,\n      });\n\n      setTimeout(() => {\n        this.setState({\n          saveSuccess: false,\n        });\n      }, 2000);\n    }\n  };\n\n  render() {\n\n    let classDetails = \"hide\", style = {display: 'none'}\n\n    if(this.props.visible){\n      classDetails = \"show\";\n      style = {display: 'block'}\n    }\n\n    return (\n      <div className='Download'>\n        <div className={`modal ${classDetails}`} style={style}>\n          <div className=\"modal-dialog modal-lg\" role=\"document\">\n            <div className=\"modal-content\">\n              <div className=\"modal-header\">\n                <h5 className=\"modal-title\">Download Module</h5>\n                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={this.props.onHide}>\n                  <span aria-hidden=\"true\">&times;</span>\n                </button>\n              </div>\n              <div className=\"modal-body Download-body\">\n              <textarea ref=\"codeInput\" disabled value={this.prepareJSON()} />\n              </div>\n              {this.state.saveSuccess && (\n                <div>\n                  Successfully saved {this.props.module.name} to local storage\n                </div>\n              )}\n              <div className=\"modal-footer\">\n                <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={this.onDownload}>Download</button>\n                <button type=\"button\" className=\"btn btn-secondary\" onClick={this.saveToLocalStorage}>Save to Local Storage</button>\n                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={this.props.onHide}>Close</button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className={`modal-backdrop ${classDetails}`} style={style}/>\n      </div>\n    )\n  }\n}\n\nexport default Download;\n","// @flow\nimport React, { Component } from 'react';\n\nimport './NavTabs.css';\n\nimport type { Module } from './types/Module';\n\nimport CancelButton from './cancel-button.png';\n\ntype Props = {\n  modules: Module[],\n  selectedModuleKey: string,\n  onChange: any\n}\n\n\nclass NavTabs extends Component<Props> {\n\n  constructor(props) {\n    super(props);\n  }\n\n  onClick = (selectedModuleKey) => {\n    if(selectedModuleKey === this.props.selectedModuleKey){\n      return () => {}\n    }\n\n    return () => this.props.onChangeModule(selectedModuleKey);\n  }\n\n  onClose = (selectedModuleKey) => {\n    return () => this.props.onCloseModule(selectedModuleKey);\n  }\n\n\n  render() {\n    return (\n      <div className='NavTabs'>\n        <ul>\n         {\n           Object.keys(this.props.modules).map( m => {\n             return (<li key={m} className={(m === this.props.selectedModuleKey ? 'NavTabs-active' : '')} ><button onClick={this.onClick(m)}>\n                 {/*this.props.modules[m].name*/}\n                 {m}.json\n               </button>\n              <img className=\"NavTabs-close\" src={CancelButton} onClick={this.onClose(m)} alt=\"Close\"/>\n             </li>\n             )})\n           }\n         </ul>\n      </div>\n    );\n  }\n}\n\nexport default NavTabs;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABTCAYAAADjsjsAAAADZ0lEQVR4nO2dTZKbMBBGnycXYJlljsANQm6RpY6inGS22c0RnJwAHyHL7PANyAJIYRsMgpbUyPqqvoVrPDT9Sn80wpyIr7L3F+ArUPSfl3QBrsBv4E//+eLlDBWrAAzwATRAK+imP67p4yQrQ5eoJLwlD2CTUAFY5FvglhZrOWhr1QLx8FAt+iDOQVWrEqiJD8rFNetWDkFliQ9mj600kC0qOF5rfNZKo42lJfrHRlc3ROj2hvRAjoEaKVBLMh4T0WQjg2teJnKCyQA1CpJLAmiKk81ai05KBa8Lcgx0cdn0tsyS85oDJa6CjsNTfVr4uwW+S5xNAvoMnIBfW/65JH730uhN42cql4nSrueAzXVzS+7ec3Lq7j5m7waoCN/a6z6uj3xWTcrWQ+BhnAlZZRpXgXysk+0SSOlWObXgDQF0qpwmDXSxdVrPIEMAfVaXlAZqZ+KAYKA1l2A+gK4p8EoCbeaCGMGkqoWEBkkCdamUV4K5mqkAkhsEXBKTABo63tgfUwGkDh46wZggB9/ENx4ChEhUA8iWu67ucw+Qr4S1gGy56+q+65XSiWsC2TKa1UNVh6QAaAM5uISw93b2gtAKsqUfN23AgHuAaAbZ0l8NnQMH3QLm3fH7MWqxZyIFdgW6VjH3PtVECuwDqIZNZFGDSwHVAFIFzL1AtYBUA3MrUE0gVcFs6WZtF70rOGeVMHPLjAhSI9DoJ5Bnc0UgB2kAmq+ApPJ5o3vMOLQuwLeVsV2uza/9cWM8Kn2FXDWSsoVcz5SygVxpl/L/TRf5HtA+3+zsyHcn9/nm7qTxFOQl75vnHR37/BA/7zXa5oe9RpB3wW21mQuS92e65zkrK5jYy+8cLoSDTQENse6bAioNspmI8SArnNgYaMgrkjFQaZCLrXKQdOscgFYBQY6BVp7yWV0+tIGTPprtWpCDYlettbp2BQn5qd45zy75nj1v/pfugcvqyXdeTT+An3sOkLt7503d+14+Zvej2Wn2XpKPddpRvObS2FlGQWIxbPajm5ZRkFwSIAeZyAkmA3KQId0xtCHCL2inOCl5mWzWSsNmKSn72Pu0SZb4MPbYSgPZq5LjtdIahb+GPZZF/1jaoLA1zqlAJ9QBooqx0VVaoB4a4pQM+a0r4ipI9H1Ap9ABJ1SSyJuq/gG9HAYxsPsSkQAAAABJRU5ErkJggg==\"","// @flow\nimport uuid from 'uuid-js';\n\nimport type { Module } from '../types/Module';\nimport type { State } from '../types/State';\nimport type { DirectTransition, DistributedTransition, ConditionalTransition, ComplexTransition, TableTransition, Transition } from '../types/Transition';\n\nexport function extractModule(data: any): Module {\n  let name = extractName(data);\n  let states = extractStates(data);\n  let remarks = extractRemarks(data);\n  return {name, states, remarks};\n}\n\nexport function extractStates(data: any): State[] {\n  if(!data){\n      return []\n  }\n  let stateNames = Object.keys(data.states);\n  return stateNames.map((name) => {\n    return extractState(name, data.states[name]);\n  })\n}\n\nexport function extractState(name: string, state: any): State {\n  let transition = extractTransition(state);\n  let id = uuid.create().toString();\n  let type = state.type;\n  return {name, transition, id, type, ...state};\n}\n\nexport function extractTransition(state: any): ?Transition {\n  if(state.direct_transition) {\n    return extractDirectTransition(state.direct_transition);\n  }\n  if(state.distributed_transition) {\n    return extractDistributedTransition(state.distributed_transition);\n  }\n  if(state.conditional_transition) {\n    return extractConditionalTransition(state.conditional_transition);\n  }\n  if(state.complex_transition) {\n    return extractComplexTransition(state.complex_transition);\n  }\n  if(state.lookup_table_transition) {\n    return extractTableTransition(state.lookup_table_transition);\n  }\n  return null;\n}\n\nexport function extractDirectTransition(data: any): DirectTransition {\n  return {to: data, type: 'Direct'}\n}\n\nexport function extractDistributedTransition(data: any): DistributedTransition {\n  let transition = data.map((d) => {\n    return {distribution: d.distribution, to: d.transition};\n  });\n  return {type: 'Distributed', transition};\n}\n\nexport function extractConditionalTransition(data: any): ConditionalTransition {\n  let transition = data.map((d) => {\n    return {condition: d.condition, to: d.transition};\n  });\n  return {type: 'Conditional', transition};\n}\n\nexport function extractComplexTransition(data: any): ComplexTransition {\n  let transition = data.map((c) => {\n    return {\n      condition: c.condition,\n      distributions: extractDistributedTransition(c.distributions||[]).transition,\n      transition: extractDirectTransition(c.transition)\n    }\n  })\n  return {type: 'Complex', transition};\n}\n\nexport function extractTableTransition(data: any): TableTransition {\n  let transition = data.transitions.map((d) => {\n    return {\n      default_probability: d.default_probability, \n      transition: d.transition,\n      lookup_table_name: d.lookup_table_name,\n    };\n  });\n  return { \n    type: 'Table', \n    lookuptable: data.lookuptable, \n    viewTable: data.viewTable,\n    lookup_table_name_ModuleBuilder: data.lookup_table_name_ModuleBuilder, \n    transition \n  };\n}\n\nexport function extractRemarks(data: any):string[] {\n  return (data.remarks :string[]);\n}\n\nexport function extractName(data: any): string {\n  return (data.name: string);\n}\n\nexport function extractAttributes(module: Module): string[] {\n  let attributes = Object.keys(module.states).filter((key) => {\n    return module.states[key].type === 'SetAttribute' || module.states[key].type === 'Counter';\n  }).map(key => (module.states[key].attribute))\n\n  attributes = attributes.concat(Object.keys(module.states).filter((key) => {\n    return !!module.states[key].assign_to_attribute\n  }).map(key => (module.states[key].assign_to_attribute)))\n\n\n  return [...new Set(attributes)]\n\n}\n","\nexport function findAvailableKey(root, keys){\n  // eslint-disable-next-line no-sequences\n  let keys_index = keys.reduce((r, i) => (r[i] = true, r), {})\n\n  let next = root;\n  let index = 1;\n\n  // check if this pattern already exists, so we don't chain key_2_2_2 etc\n  let endsInNumber = /_(\\d+)$/g;\n  let matches = endsInNumber.exec(root);\n  if(matches && matches.length > 1){\n    index = parseInt(matches[1]);\n    root = next = next.replace(matches[0], \"\");\n  }\n\n  while(keys_index[next]){\n    index++;\n    next = root + \"_\" + index;\n  }\n\n  return next;\n}\n\nexport function createSafeKeyFromName(name){\n  return name.replace(/[^A-Z0-9]/ig, \"_\");\n}\n","export default { \"example_module\": \n    {\n      \"name\": \"Examplitis\",\n      \"remarks\": [\n        \"Examplitis is a painful condition that affects only males. Most patients \",\n        \"can be cured with Examplitol or an Examplotomy but some never recover.\"\n      ],\n      \"states\": {\n\n        \"Initial\": {\n          \"type\": \"Initial\",\n          \"conditional_transition\": [\n            {\n              \"condition\": {\n                \"condition_type\": \"Gender\",\n                \"gender\": \"M\"\n              },\n              \"transition\": \"Age_Guard\"\n            },\n            {\n              \"transition\": \"Terminal\"\n            }\n          ]\n        },\n\n        \"Age_Guard\": {\n          \"type\": \"Guard\",\n          \"allow\": {\n            \"condition_type\": \"Age\",\n            \"operator\": \">\",\n            \"quantity\": 40,\n            \"unit\": \"years\"\n          },\n          \"distributed_transition\": [\n            {\n              \"distribution\": 0.10,\n              \"transition\": \"Pre_Examplitis\"\n            },\n            {\n              \"distribution\": 0.90,\n              \"transition\": \"Terminal\"\n            }\n          ]\n        },\n\n        \"Pre_Examplitis\": {\n          \"type\": \"Delay\",\n          \"range\": {\n            \"low\": 0,\n            \"high\": 10,\n            \"unit\": \"years\"\n          },\n          \"direct_transition\": \"Examplitis\"\n        },\n\n        \"Examplitis\": {\n          \"type\": \"ConditionOnset\",\n          \"target_encounter\": \"Wellness_Encounter\",\n          \"codes\": [\n            {\n              \"system\": \"SNOMED-CT\",\n              \"code\": \"123\",\n              \"display\": \"Examplitis\"\n            }\n          ],\n          \"direct_transition\": \"Wellness_Encounter\"\n        },\n\n        \"Wellness_Encounter\": {\n          \"type\": \"Encounter\",\n          \"wellness\": true,\n          \"direct_transition\": \"Examplitol\"\n        },\n\n        \"Examplitol\": {\n          \"type\": \"MedicationOrder\",\n          \"reason\": \"Examplitis\",\n          \"codes\": [\n            {\n              \"system\": \"RxNorm\",\n              \"code\": \"456\",\n              \"display\": \"Examplitol\"\n            }\n          ],\n          \"distributed_transition\": [\n            {\n              \"distribution\": 0.2,\n              \"transition\": \"Pre_Examplotomy\"\n            },\n            {\n              \"distribution\": 0.1,\n              \"transition\": \"Last_Days\"\n            },\n            {\n              \"distribution\": 0.7,\n              \"transition\": \"Terminal\"\n            }\n          ]\n        },\n\n        \"Pre_Examplotomy\": {\n          \"type\": \"Delay\",\n          \"range\": {\n            \"low\": 18,\n            \"high\": 36,\n            \"unit\": \"months\"\n          },\n          \"direct_transition\": \"Examplotomy_Encounter\"\n        },\n\n        \"Examplotomy_Encounter\": {\n          \"type\": \"Encounter\",\n          \"encounter_class\": \"ambulatory\",\n          \"codes\": [\n            {\n              \"system\": \"SNOMED-CT\",\n              \"code\": \"ABC\",\n              \"display\": \"Examplotomy Encounter\"\n            }\n          ],\n          \"direct_transition\": \"Examplotomy\"\n        },\n\n        \"Examplotomy\": {\n          \"type\": \"Procedure\",\n          \"duration\": {\n            \"low\": 2,\n            \"high\": 3,\n            \"unit\": \"hours\"\n          },\n          \"codes\": [\n            {\n              \"system\": \"SNOMED-CT\",\n              \"code\": \"789\",\n              \"display\": \"Examplotomy\"\n            }\n          ],\n          \"reason\": \"Examplitis\",\n          \"direct_transition\": \"End_Examplotomy_Encounter\"\n        },\n\n        \"End_Examplotomy_Encounter\": {\n            \"type\": \"EncounterEnd\",\n            \"distributed_transition\": [\n            {\n              \"distribution\": 0.1,\n              \"transition\": \"Death\"\n            },\n            {\n              \"distribution\": 0.9,\n              \"transition\": \"Terminal\"\n            }\n          ]\n        },\n\n        \"Last_Days\": {\n          \"type\": \"Delay\",\n          \"range\": {\n              \"low\": 8,\n              \"high\": 20,\n              \"unit\": \"years\"\n          },\n          \"direct_transition\": \"Death\"\n        },\n\n        \"Death\": {\n          \"type\": \"Death\",\n          \"direct_transition\": \"Terminal\"\n        },\n\n        \"Terminal\": {\n          \"type\": \"Terminal\"\n        }\n      }\n    }\n}\n","// @flow\nimport React, { Component } from 'react';\n\nimport './JsonEditor.css';\nimport { JsonEditor as Editor } from 'jsoneditor-react';\nimport 'jsoneditor-react/es/editor.min.css';\nimport ace from 'brace';\nimport 'brace/mode/json';\nimport {generateDOT} from '../../utils/graphviz';\n\nimport type { Module } from './types/Module';\n\ntype Props = {\n  module: Module,\n  onChange: mixed\n}\n\nclass JsonEditor extends Component<Props> {\n\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(module) {\n    \n    if(this.clearTimeout){\n      clearTimeout(this.clearTimeout);\n    }\n\n    this.clearTimeout = setTimeout(()=>{\n\n      try {\n        let dot = generateDOT(module);\n\n        this.props.onChange(module)\n\n      } catch (ex) {\n        // currently silently fails on this\n        // alert('Error creating module: ' + ex.message);\n      }\n\n    }, 1000) // wait a second for user to complete changes\n  }\n\n\n  render() {\n    if(this.props.refreshCodeFlag){\n      return <div/>\n    }\n    return (\n      <div className='JsonEditor'>\n        <Editor\n          value={this.props.module}\n          mode='code'\n          ace={ace}\n          onChange={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nexport default JsonEditor;;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABTCAYAAADjsjsAAAADZ0lEQVR4nO2dTZKbMBBGnycXYJlljsANQm6RpY6inGS22c0RnJwAHyHL7PANyAJIYRsMgpbUyPqqvoVrPDT9Sn80wpyIr7L3F+ArUPSfl3QBrsBv4E//+eLlDBWrAAzwATRAK+imP67p4yQrQ5eoJLwlD2CTUAFY5FvglhZrOWhr1QLx8FAt+iDOQVWrEqiJD8rFNetWDkFliQ9mj600kC0qOF5rfNZKo42lJfrHRlc3ROj2hvRAjoEaKVBLMh4T0WQjg2teJnKCyQA1CpJLAmiKk81ai05KBa8Lcgx0cdn0tsyS85oDJa6CjsNTfVr4uwW+S5xNAvoMnIBfW/65JH730uhN42cql4nSrueAzXVzS+7ec3Lq7j5m7waoCN/a6z6uj3xWTcrWQ+BhnAlZZRpXgXysk+0SSOlWObXgDQF0qpwmDXSxdVrPIEMAfVaXlAZqZ+KAYKA1l2A+gK4p8EoCbeaCGMGkqoWEBkkCdamUV4K5mqkAkhsEXBKTABo63tgfUwGkDh46wZggB9/ENx4ChEhUA8iWu67ucw+Qr4S1gGy56+q+65XSiWsC2TKa1UNVh6QAaAM5uISw93b2gtAKsqUfN23AgHuAaAbZ0l8NnQMH3QLm3fH7MWqxZyIFdgW6VjH3PtVECuwDqIZNZFGDSwHVAFIFzL1AtYBUA3MrUE0gVcFs6WZtF70rOGeVMHPLjAhSI9DoJ5Bnc0UgB2kAmq+ApPJ5o3vMOLQuwLeVsV2uza/9cWM8Kn2FXDWSsoVcz5SygVxpl/L/TRf5HtA+3+zsyHcn9/nm7qTxFOQl75vnHR37/BA/7zXa5oe9RpB3wW21mQuS92e65zkrK5jYy+8cLoSDTQENse6bAioNspmI8SArnNgYaMgrkjFQaZCLrXKQdOscgFYBQY6BVp7yWV0+tIGTPprtWpCDYlettbp2BQn5qd45zy75nj1v/pfugcvqyXdeTT+An3sOkLt7503d+14+Zvej2Wn2XpKPddpRvObS2FlGQWIxbPajm5ZRkFwSIAeZyAkmA3KQId0xtCHCL2inOCl5mWzWSsNmKSn72Pu0SZb4MPbYSgPZq5LjtdIahb+GPZZF/1jaoLA1zqlAJ9QBooqx0VVaoB4a4pQM+a0r4ipI9H1Ap9ABJ1SSyJuq/gG9HAYxsPsSkQAAAABJRU5ErkJggg==\"","// @flow\nimport React, { Component } from 'react';\nimport _ from 'lodash';\n\nimport './StateList.css';\nimport CancelButton from './cancel-button.png';\n\ntype Props = {\n  states: State[],\n  selectedState: State,\n  onChange: any,\n}\n\nclass StateList extends Component<Props> {\n\n  constructor(props) {\n    super(props);\n    this.state = {search: ''};\n  }\n\n  onClick(state) {\n    return () => { this.props.onClick(state.name)}\n  }\n\n  onChange(event){\n    this.setState({search: event.target.value});\n  }\n\n  clearSearch(){\n    this.setState({search: ''})\n  }\n\n  stateFilter(state){\n    return state.name.toLowerCase().includes(this.state.search.toLowerCase()) || \n           state.type.toLowerCase().includes(this.state.search.toLowerCase());\n  }\n\n  render() {\n    return (<div className='StateList'>\n          <div className='Editor-panel-title'> \n             State List\n          </div>\n          <div className=\"btn-group\">\n            <input type=\"text\" className=\"form-control\" placeholder=\"Find\" value={this.state.search} onChange={this.onChange.bind(this)}/>\n            <img className=\"search-clear\" src={CancelButton} onClick={this.clearSearch.bind(this)}/>\n          </div>\n          <table className=\"table table-sm table-hover\">\n              <thead className=\"thead-light\">\n                <tr>\n                  <th scope=\"col\">State</th>\n                  <th scope=\"col\">Type</th>\n                </tr>\n              </thead>\n              <tbody>\n              {this.props.states.filter(this.stateFilter.bind(this)).map((state,i) => {\n                return (\n                  <tr key={i} onClick={this.onClick(state)} className={this.props.selectedState && (state.name === this.props.selectedState.name) ? \"table-info\" : \"\"}>\n                    <th scope=\"row\">{state.name}</th>\n                    <td>{state.type}</td>\n                  </tr>\n                )\n              })}\n              </tbody>\n            </table>\n          </div>)\n  }\n}\n\nexport default StateList;\n","// @flow\nimport React, { Component } from 'react';\nimport _ from 'lodash';\n\nimport './AttributeList.css';\nimport CancelButton from './cancel-button.png';\nimport AttributeData from './AttributeData.json';\nimport Attributes from '../editor/Attributes';\nimport Dropdown from 'react-dropdown';\nimport './Dropdown.css';\n\ntype Props = {\n  states: State[],\n  modules: Module[],\n  selectedState: State,\n  onChange: any,\n}\n\nclass AttributeList extends Component<Props> {\n\n  constructor(props) {\n    super(props);\n    this.state = {search: ''};\n  }\n\n  onClick(attribute) {\n    return () => { this.props.onClick(attribute.stateName)}\n  }\n\n  onChange(event){\n    this.setState({search: event.target.value});\n  }\n\n  clearSearch(){\n    this.setState({search: ''})\n  }\n\n  attributeFilter(attribute){\n    return attribute.attribute.toLowerCase().includes(this.state.search.toLowerCase()) || \n           attribute.stateName.toLowerCase().includes(this.state.search.toLowerCase());\n  }\n  \n  onSelect = (option) =>  {\n    // Open this module\n    this.props.loadSelectedModule(option.label)\n  }\n\n  render() {\n    const data = AttributeData;\n    return (<div className='AttributeList'>\n          <div className='Editor-panel-title'> \n             Attribute List\n          </div>\n\n          <div className=\"btn-group\">\n            <input type=\"text\" className=\"form-control\" placeholder=\"Find\" value={this.state.search} onChange={this.onChange.bind(this)}/>\n            <img className=\"search-clear\" src={CancelButton} onClick={this.clearSearch.bind(this)}/>\n          </div>\n          <div>\n            Note: This currently only displays attributes being written in this module.  It does not include referenced attributes\n            or attributes written in other modules.\n          </div>\n          <table className=\"table table-sm table-hover\">\n              <thead className=\"thead-light\">\n                <tr>\n                  <th scope=\"col\">Attribute</th>\n                  <th scope=\"col\">State</th>\n                  <th scope=\"col\">Other Modules</th>\n                </tr>\n              </thead>\n              <tbody>\n              {this.props.attributes.filter(this.attributeFilter.bind(this)).map((attribute, i) => {\n                let others = [this.props.module.name];\n                if (data[attribute.attribute]!= undefined) \n                {\n                  Object.keys(data[attribute.attribute].read).forEach(i => {others.push(i)})                \n                  Object.keys(data[attribute.attribute].write).forEach(i => {others.push(i)})\n                }\n                others = others.filter((x, i, a) => a.indexOf(x) == i)\n                others.splice(others.indexOf[this.props.module.name], 1);\n                let dropDown;\n                if (others.length > 0)\n                {\n                  dropDown = <Dropdown className='code' options={others} onChange={this.onSelect} value=\"Jump To Module...\" />\n                }\n                else\n                {\n                  dropDown = <td className={this.props.selectedState && (attribute.stateName === this.props.selectedState.name) ? \"table-info\" : \"\"} onClick={this.onClick(attribute)} >None</td>\n                }\n\n                \n                return (\n                  <tr key={i}>\n                    <th className={this.props.selectedState && (attribute.stateName === this.props.selectedState.name) ? \"table-info\" : \"\"} onClick={this.onClick(attribute)} scope=\"row\">{attribute.attribute}</th>\n                    <td className={this.props.selectedState && (attribute.stateName === this.props.selectedState.name) ? \"table-info\" : \"\"} onClick={this.onClick(attribute)} >{attribute.stateName} </td>\n                    {dropDown}\n                  </tr>\n                )\n              })}\n              </tbody>\n            </table>\n          </div>)\n  }\n}\n\nexport default AttributeList;\n","// @flow\nimport React, { Component } from 'react';\nimport _ from 'lodash';\n\nimport './WarningList.css';\n\ntype Props = {\n  warnings: mixed,\n  selectedState: State\n}\n\nclass WarningList extends Component<Props> {\n\n  onClick(warning) {\n    return () => { this.props.onClick(warning.stateName)}\n  }\n\n  render() {\n    return (<div className='WarningList'>\n          <div className='Editor-panel-title'> \n            Warnings\n          </div>\n\n          <table className=\"table table-sm table-hover\">\n              <thead className=\"thead-light\">\n                <tr>\n                  <th scope=\"col\">Warning</th>\n                  <th scope=\"col\">State</th>\n                </tr>\n              </thead>\n              <tbody>\n       \n              {this.props.warnings.map( (warning, i) => {\n                return (\n                  <tr key={i} onClick={this.onClick(warning)} className={this.props.selectedState && (warning.stateName === this.props.selectedState.name) ? \"table-info\" : \"\"}>\n                    <th scope=\"row\">{warning.message}</th>\n                    <td>{warning.stateName}</td>\n                  </tr>\n                )\n              })}\n              </tbody>\n            </table>\n          </div>)\n  }\n}\n\nexport default WarningList;\n","// @flow\nimport React, { Component } from 'react';\nimport _ from 'lodash';\n\nimport './RelatedList.css';\n\ntype Props = {\n  related: mixed,\n  selectedState: State\n}\n\nclass RelatedList extends Component<Props> {\n\n  onClick(related) {\n    return () => { this.props.onClick(related.stateName)}\n  }\n\n  render() {\n    return (<div className='RelatedList'>\n          <div className='Editor-panel-title'> \n            Related Modules\n          </div>\n\n          <div>\n            This currently only displays relationships based on submodules.  Additional relationships are in progress.\n          </div>\n\n          <table className=\"table table-sm table-hover\">\n              <thead className=\"thead-light\">\n                <tr>\n                  <th scope=\"col\">Type</th>\n                  <th scope=\"col\">Module</th>\n                  <th scope=\"col\">State</th>\n                </tr>\n              </thead>\n              <tbody>\n       \n              {this.props.related.map( (related, i) => {\n                return (\n                  <tr key={i} onClick={this.onClick(related)} className={this.props.selectedState && (related.stateName === this.props.selectedState.name) ? \"table-info\" : \"\"}>\n                    <th scope=\"row\">{related.type}</th>\n                    <td>{related.moduleKey}</td>\n                    <td>{related.stateName}</td>\n                  </tr>\n                )\n              })}\n              </tbody>\n            </table>\n          </div>)\n  }\n}\n\nexport default RelatedList;\n","export default __webpack_public_path__ + \"static/media/synthea-animated-logo.6aaf309c.svg\";","export default __webpack_public_path__ + \"static/media/synthea-logo.17848c75.png\";","export const analyze = (moduleKey, module) => {\n  return ({\n    type: 'ANALYZE',\n    data: {moduleKey, module}\n  })\n}\n","import {analyze} from  './analysis';\nimport { push } from 'connected-react-router'\n\nconst dispatchThenAnalyze = (action) => {\n  return (dispatch, getState) => {\n    dispatch(action);\n    let moduleKey = getState().editor.selectedModuleKey;\n    let module = getState().editor.modules[moduleKey];\n\n    if(module){\n      if (module.gmf_version === undefined) {\n        dispatch(addGMFVersion(moduleKey))\n      }\n      dispatch(analyze(moduleKey, module));\n    }\n\n    // refresh the editor if the change didn't originate from the editor\n    if(action.type !== 'JSON_EDIT'){\n      dispatch(refreshCode())\n    }\n\n  }\n}\n\nexport const addGMFVersion = (targetModuleKey) => {\n  return ({\n    type: 'ADD_GMF_VERSION',\n    data: {targetModuleKey}\n  })\n}\n\nexport const selectNode = (key, transitionIndex) => {\n  return ({\n    type: 'SELECT_NODE',\n    data: {key, transitionIndex}\n  })\n}\n\nexport const addNode = (currentModuleKey, stateKey, state, selectedState, selectedStateTransition) => {\n   return dispatchThenAnalyze({\n    type: 'ADD_NODE',\n    data: {currentModuleKey, stateKey, state, selectedState, selectedStateTransition}\n  })\n}\n\nexport const addStructure = (currentModuleKey, structureName) => {\n  return dispatchThenAnalyze({\n    type: 'ADD_STRUCTURE',\n    data: {currentModuleKey, structureName}\n  });\n}\n\nexport const addTransition = (currentModuleKey, nodeName, transitionType) => {\n  return dispatchThenAnalyze({\n    type: 'ADD_TRANSITION',\n    data: {currentModuleKey, nodeName, transitionType}\n  });\n}\n\nexport const editNode = (update, path) => {\n  return dispatchThenAnalyze({\n    type: 'EDIT_NODE',\n    data: {\n      update,\n      path\n    }\n  })\n}\n\nexport const renameNode = (targetModuleKey, targetNode, newName) => {\n  return dispatchThenAnalyze({\n    type: 'RENAME_NODE',\n    data:{\n      targetModuleKey,\n      targetNode,\n      newName\n    }\n  })\n}\n\nexport const copyNode = (targetModuleKey, targetNode, newName) => {\n  return {\n    type: 'COPY_NODE',\n    data:{\n      targetModuleKey,\n      targetNode\n    }\n  }\n}\n\nexport const jsonEdit = (module) => {\n  return dispatchThenAnalyze({\n    type: 'JSON_EDIT',\n    data: {module}\n  })\n}\n\nexport const closeModule = (selectedModuleKey) => {\n\n  return (dispatch, getState) => {\n\n    if(Object.keys(getState().editor.modules).length > 1){\n      if(Object.keys(getState().editor.modules)[0] === selectedModuleKey){\n        dispatch(push('#' + Object.keys(getState().editor.modules)[1])); // handling case where first is the one we already have open\n      }else {\n        dispatch(push('#' + Object.keys(getState().editor.modules)[0]));\n      }\n    } else {\n      dispatch({type: 'OPEN_MODULE', data: {}}); // open nothing to force welcome screen\n      dispatch(push('#'));\n    }\n\n\n    return dispatch({type: 'CLOSE_MODULE', data: {selectedModuleKey}});\n\n  }\n}\n\nexport const newModule = (key, module) => {\n  return dispatchThenAnalyze({\n    type: 'NEW_MODULE',\n    data: {key, module}\n  })\n}\n\nexport const editModuleName = (targetModuleKey, newName) => {\n  return ({\n    type: 'EDIT_MODULE_NAME',\n    data: {\n      newName,\n      targetModuleKey\n    }\n  })\n}\n\nexport const editModuleRemarks = (targetModuleKey, newRemarks) => {\n  return ({\n    type: 'EDIT_MODULE_REMARKS',\n    data: {\n      newRemarks,\n      targetModuleKey\n    }\n  })\n}\n\nexport const changeStateType = (targetModuleKey, targetNode, newType) => {\n  return dispatchThenAnalyze({\n    type: 'CHANGE_STATE_TYPE',\n    data:{\n      targetModuleKey,\n      targetNode,\n      newType\n    }\n  })\n}\n\nexport const undo = () => {\n  return dispatchThenAnalyze({\n    type: 'UNDO'\n  })\n}\n\nexport const redo = () => {\n  return dispatchThenAnalyze({\n    type: 'REDO'\n  })\n}\n\nexport const showLoadModule = () => {\n  return ({\n    type: 'SHOW_LOAD_MODULE'\n  })\n}\n\nexport const hideLoadModule = () => {\n  return ({\n    type: 'HIDE_LOAD_MODULE'\n  })\n}\n\nexport const showDownload = () => {\n  return ({\n    type: 'SHOW_DOWNLOAD'\n  })\n}\n\nexport const hideDownload = () => {\n  return ({\n    type: 'HIDE_DOWNLOAD',\n  })\n}\n\n\nexport const changeModulePanel = (targetPanel) => {\n  return dispatchThenAnalyze({\n    type: 'CHANGE_MODULE_PANEL',\n    data:{\n      targetPanel\n    }\n  })\n}\n\nexport const refreshCode = () => {\n  return dispatch => {\n    dispatch({\n      type: 'REFRESH_CODE_FLAG',\n      data:{\n        flag: true\n      }\n    })\n\n    setTimeout(() => {dispatch({\n      type: 'REFRESH_CODE_FLAG',\n      data:{\n        flag: false\n      }\n    })}, 250)\n\n\n  }\n}\n\n","import {analyze} from  './analysis';\n\nexport const openModule = (key) => {\n\n  return (dispatch, getState) => {\n    let action = {type: 'OPEN_MODULE', data: {key}};\n\n    if(!getState().editor.modules[key] && getState().library.modules[key]){\n      action.data.libraryModule = getState().library.modules[key];\n    }\n\n    dispatch(action);\n    if(getState().editor.modules[key]){\n      dispatch(analyze(key, getState().editor.modules[key]));\n    }\n  }\n}\n","import { openModule } from './router'\n\nexport const loadLibrary = (modules) => {\n  return (dispatch, getState) => {\n\n    dispatch ({\n      type: 'LOAD_LIBRARY',\n      data: modules\n    })\n\n    if(getState().router.location.hash.charAt(0) === '#'){\n      dispatch(openModule(getState().router.location.hash.slice(1)));\n    }\n  }\n}\n\n","import React, { Component } from 'react'\nimport { push } from 'connected-react-router'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\nimport _ from 'lodash'\nimport Joyride from 'react-joyride'\nimport ReactTooltip from 'react-tooltip'\nimport Draggable from 'react-draggable'\n\nimport StateEditor from '../components/editor/State';\nimport ModulePropertiesEditor from '../components/editor/ModuleProperties';\nimport ModuleGraph from '../components/graph/ModuleGraph';\nimport LoadModule from '../components/menu/LoadModule';\nimport Download from '../components/menu/Download';\nimport NavTabs from '../components/editor/NavTabs';\nimport { extractStates } from '../transforms/Module';\nimport {cleanString } from '../utils/stringUtils';\n\nimport { findAvailableKey, createSafeKeyFromName } from '../utils/keys';\nimport { getTemplate } from '../templates/Templates';\nimport { BasicTutorial } from '../templates/Tutorial';\n\nimport { RIEInput } from 'riek';\n\nimport examplitis from '../data/example_module'\n\nimport './Editor.css';\n\nimport JsonEditor from '../components/editor/JsonEditor';\n\nimport StateList from '../components/analysis/StateList';\nimport AttributeList from '../components/analysis/AttributeList';\nimport WarningList from '../components/analysis/WarningList';\nimport RelatedList from '../components/analysis/RelatedList';\n\nimport LoadingLogo from './synthea-animated-logo.svg'\n// import SyntheaLogo from './synthea-logo-dark-glow.png'\nimport SyntheaLogo from './synthea-logo.png'\nimport MinimizePanel from './minimize-panel.png'\nimport FullscreenButton from './fullscreen.png'\nimport InfoButton from './Info.png'\nimport StateButton from './state-button.png'\nimport StateListButton from './statelist.png'\nimport CodeButton from './code-button.png'\nimport AttributeButton from './attribute-button.png'\nimport RelatedButton from './related-button.png'\nimport WarningButton from './warning-button.png'\n\nimport {selectNode,\n        addNode,\n        addStructure,\n        addTransition,\n        editNode,\n        renameNode,\n        copyNode,\n        newModule,\n        jsonEdit,\n        showLoadModule,\n        hideLoadModule,\n        showDownload,\n        hideDownload,\n        refreshCode,\n        changeStateType,\n        editModuleName,\n        editModuleRemarks,\n        closeModule,\n        undo,\n        redo,\n        changeModulePanel} from '../actions/editor';\n\nimport {loadLibrary} from '../actions/library';\n\nclass Editor extends Component {\n\n  constructor() {\n    super();\n\n    this.originalPanelWidth = 500;\n    this.state = {\n      joyride: {\n        run: false,\n        steps: BasicTutorial,\n        stepIndex: 0\n      },\n      panelWidth: this.originalPanelWidth,\n    }\n  }\n\n  componentDidMount() {\n    import(\"../data/modules\").then(modules => {\n      this.props.loadLibrary({...examplitis, ...modules.default});\n\n      // see https://github.com/wwayne/react-tooltip/issues/40\n      setTimeout(() => {\n       ReactTooltip.rebuild();\n      }, 1000)\n    });\n\n  }\n\n  /*\n    This is a recursive function to track the path that an edit action took through the Inspector\n    It was written this way because there's multiple ways that one could get to, say, a Conditional Editor\n    By keeping track of where it's been it means that the action can just look into the modules along the path\n  */\n  onChange  = (update, path=[]) => {\n    if(typeof update !== 'object') {\n      return (val) => this.onChange(val, [].concat(path, [update]))\n    }\n    this.props.editNode(update, path)\n  }\n\n  renameNode = (targetModuleKey, targetNode) => {\n    return (newName) => {\n      newName.name = cleanString(newName.name, {'.': '', '\\\\': '', '|': ''});\n      this.props.renameNode(targetModuleKey, targetNode, newName);\n    }\n  }\n\n  copyNode = (targetModuleKey, targetNode) => {\n    return () => {\n      this.props.copyNode(targetModuleKey, targetNode);\n    }\n  }\n\n  pasteNode = (selectedModuleKey, takenKeys, selectedState, selectedStateTransition) => {\n    return () => {\n      let key = findAvailableKey(createSafeKeyFromName(this.props.clipboard.name), takenKeys);\n      let newState = _.cloneDeep(this.props.clipboard);\n      this.props.addNode(selectedModuleKey, key, newState, selectedState, selectedStateTransition);\n    }\n  }\n  \n  changeStateType = (targetModuleKey, targetNode) => {\n    return (newType) => {\n      this.props.changeStateType(targetModuleKey, targetNode, newType);\n    }\n  }\n\n  addTransition = (targetModuleKey, targetNode) => {\n    return (transitionType) => {\n      this.props.addTransition(targetModuleKey, targetNode, transitionType)\n    }\n  }\n\n  newModule = (takenKeys) => {\n    return (module = getTemplate('Module.Blank')) => {\n      let key = findAvailableKey(createSafeKeyFromName(module.name), takenKeys);\n      this.props.newModule(key, module);\n      this.props.push('#' + key)\n    }\n  }\n\n  addNode = (selectedModuleKey, takenKeys, selectedState, selectedStateTransition) => {\n    return () => {\n      let key = findAvailableKey(createSafeKeyFromName('New State'), takenKeys);\n      let newState = {...getTemplate('State.Simple'), direct_transition: key };\n      this.props.addNode(selectedModuleKey, key, newState, selectedState, selectedStateTransition);\n    }\n  }\n\n  startTutorial = (steps) => {\n    return () => {\n      this.joyride.reset(true);\n      this.setState({joyride: {run: true, steps}})\n    }\n  }\n  renderAddStateButton = () => {\n    if(this.props.selectedModuleKey){\n      return <button className='button-clear' data-tip='Add a state to this graph.' onClick={this.addNode(this.props.selectedModuleKey, Object.keys(this.props.module.states), this.props.selectedStateKey, this.props.selectedStateTransition)}> + Add State </button>\n    }\n    return <div/>\n  }\n\n  renderUndoButton = () => {\n    let className = 'button-clear';\n    if(!this.props.undoEnabled){\n      className+=' disabled'\n    }\n    return <button className={className} data-tip='Undo' onClick={() => this.props.undo()}> Undo</button>\n  }\n\n  renderRedoButton = () => {\n    let className = 'button-clear';\n    if(!this.props.redoEnabled){\n      className+=' disabled'\n    }\n    return <button className={className} data-tip='Redo' onClick={() => this.props.redo()}> Redo</button>\n  }\n\n  renderDownloadButton = () => {\n  }\n\n  renderUndoButton = () => {\n    let className = 'button-clear';\n    if(!this.props.undoEnabled){\n      className+=' disabled'\n    }\n    return <button className={className} data-tip='Undo' onClick={() => this.props.undo()}> Undo</button>\n  }\n  \n  renderDeleteButton = () => {\n    let className = 'button-clear';\n    if(!this.props.selectedStateKey){\n      className+=' disabled'\n    }\n    return <button className={className} data-tip='Delete State' onClick={() => this.props.selectedStateKey && this.onChange(`${this.props.selectedModuleKey}.states.${this.props.selectedStateKey}`)({val: {id: null}})}> Delete State</button>\n  }\n\n  renderCopyButton = () => {\n    let className = 'button-clear';\n    if(!this.props.selectedStateKey){\n      className+=' disabled'\n    }\n    return <button className={className} data-tip='Copy State' onClick={this.props.selectedStateKey && this.copyNode(this.props.selectedModuleKey, this.props.moduleState, Object.keys(this.props.module.states))}> Copy State</button>\n  }\n\n  renderPasteButton = () => {\n    let className = 'button-clear';\n    if(!this.props.clipboard){\n      className+=' disabled'\n    }\n    return <button className={className} data-tip='Paste State Here' onClick={this.props.clipboard && this.pasteNode(this.props.selectedModuleKey, Object.keys(this.props.module.states), this.props.selectedStateKey, this.props.selectedStateTransition)}> Paste State</button>\n  }\n\n  renderStateEditor = () => {\n    if(this.props.module){\n      return <StateEditor\n        moduleName={this.props.module.name}\n        helpFunction={this.startTutorial}\n        renameNode={this.renameNode(this.props.selectedModuleKey, this.props.moduleState)}\n        changeType={this.changeStateType(this.props.selectedModuleKey, this.props.moduleState)}\n        copyNode={this.copyNode(this.props.selectedModuleKey, this.props.moduleState, Object.keys(this.props.module.states))}\n        addTransition={this.addTransition(this.props.selectedModuleKey, this.props.moduleState)}\n        state={this.props.moduleState}\n        otherStates={this.props.moduleStates}\n        onChange={this.onChange(this.props.selectedModuleKey)}\n        displayAttributes={this.leftNavClick('attribute')} />\n    }\n    return <div/>\n\n  }\n\n  renderDownload = () => {\n    if(this.props.module){\n      return <Download module={this.props.module}\n        visible={this.props.downloadVisible}\n        onHide={this.props.hideDownload}/>\n    }\n    return <div/>\n  }\n\n  renderLoadModule = () => {\n    return <LoadModule modules={this.props.modules}\n          library={this.props.library}\n          visible={this.props.loadModuleVisible}\n          onHide={this.props.hideLoadModule}\n          push={this.props.push}\n          welcome={!this.props.module}\n          newModule={this.newModule(Object.keys(this.props.modules))}\n          />\n  }\n\n  loadSelectedModule= (key) => \n  {\n    let val;\n    Object.keys(this.props.library).forEach(option => {\n      if (this.props.library[option].name === key)\n      {\n        val = option;\n      }\n    })\n    if (val !== undefined)\n    {\n        this.props.push('#' + val);   \n    }\n  }\n\n  renderModulePropertiesEditor = () => {\n    if(this.props.module){\n      return <ModulePropertiesEditor\n              module={this.props.module}\n              onRemarksChange={(remarks) => this.props.editModuleRemarks(this.props.selectedModuleKey, remarks)}/>\n    }\n    return <div/>\n  }\n\n  renderModuleGraph = () => {\n    if(this.props.module){\n      return <ModuleGraph\n            module={this.props.module}\n            fullscreen={!this.props.modulePanelVisible}\n            onClick={this.props.selectNode}\n            selectedState={this.props.moduleState}\n            selectedStateTransition={this.props.selectedStateTransition}/>\n    }\n    return <div/>\n  }\n\n  onPanelResize = (event, data) => {\n    this.setState({...this.state, panelWidth: this.state.panelWidth + data.deltaX})\n  }\n\n  onPanelResizeDone = () => {\n    this.props.refreshCode();\n    if(this.state.panelWidth <= 250){\n      this.setState({...this.state, panelWidth: 250});\n      this.leftNavClick('hide')();\n    }\n  }\n\n  renderPanelContent = () => {\n    switch(this.props.selectedModulePanel){\n      case 'info':\n        return this.renderModulePropertiesEditor();\n      case 'state':\n        return this.renderStateEditor();\n      case 'statelist':\n        return <StateList selectedState={this.props.moduleState} states={this.props.moduleStates} onClick={this.props.selectNode} />\n      case 'code':\n        return <JsonEditor onChange={(value) => {this.props.jsonEdit(value)}} module={this.props.module} refreshCodeFlag={this.props.refreshCodeFlag}/>\n      case 'attribute':\n        // The attribute list does not show attributes that are referenced \n        // for example BMI is not in the attribute list in the Metabolic Syndrome Standards of Care Module but the state 'Obese Check' uses BMI in the transition\n        return <AttributeList attributes={this.props.attributes} selectedState={this.props.moduleState} modules={this.props.modules} states={this.props.moduleStates} onClick={this.props.selectNode} module={this.props.module} editor={this.props} loadSelectedModule={this.loadSelectedModule}/>\n      case 'warning':\n        return <WarningList warnings={this.props.warnings} selectedState={this.props.moduleState} onClick={this.props.selectNode} />\n      case 'related':\n        return <RelatedList related={this.props.relatedModules} selectedState={this.props.moduleState} onClick={this.props.selectNode} />\n      default:\n        return <div/>\n    }\n  }\n\n  renderStateButton = () => {\n    let className = '';\n    let onClick = this.leftNavClick('state');\n    if(this.props.selectedModulePanel === 'state'){\n      className = 'Editor-left-selected';\n    } else if(!this.props.moduleState){\n      className = 'Editor-left-disabled';\n      onClick = () => {};\n    }\n    let dataTip = 'View currently selected state.'\n\n    if(this.props.moduleStates){\n      dataTip += ' Please selected a state in the graph, state list, or attribute list.'\n    }\n\n    return <li className={className}><button data-tip={dataTip} onClick={onClick}><img src={StateButton} alt=\"\"/></button></li>\n  }\n\n  renderStateListButton = () => {\n   let stateCount = <span className='Editor-button-count'>0</span>\n   if(this.props.moduleStates.length > 0){\n       stateCount = <span className='Editor-button-count'>{this.props.moduleStates.length}</span>\n   }\n   return <li className={this.props.selectedModulePanel === 'statelist' ? 'Editor-left-selected' : ''}><button data-tip='Searchable list of states.' onClick={this.leftNavClick('statelist')}><img src={StateListButton} alt=\"\"/>{stateCount}</button></li>\n\n  }\n\n  renderAttributesButton = () => {\n   let attributesCount = <span className='Editor-button-count'>0</span>\n   if(this.props.attributes.length > 0){\n     attributesCount = <span className='Editor-button-count'>{this.props.attributes.length}</span>\n   }\n   return <li className={this.props.selectedModulePanel === 'attribute' ? 'Editor-left-selected' : ''}><button data-tip='Attributes set in this module.' onClick={this.leftNavClick('attribute')}><img src={AttributeButton} alt=\"\"/>{attributesCount}</button></li>\n\n  }\n\n\n  renderWarningButton = () => {\n   let warningCount = <span className='Editor-button-count'>0</span>\n   if(this.props.warnings.length > 0){\n     warningCount = <span className='Editor-button-count Editor-button-count-warning'>{this.props.warnings.length}</span>\n   }\n   return <li className={this.props.selectedModulePanel === 'warning' ? 'Editor-left-selected' : ''}><button data-tip='Problems in module that need to be resolved.' onClick={this.leftNavClick('warning')}><img src={WarningButton} alt=\"\"/>{warningCount}</button></li>\n\n  }\n\n  renderRelatedModulesButton = () => {\n\n   let relatedCount = <span className='Editor-button-count'>0</span>\n   if(this.props.relatedModules.length > 0){\n     relatedCount = <span className='Editor-button-count'>{this.props.relatedModules.length}</span>\n   }\n   return <li className={this.props.selectedModulePanel === 'related' ? 'Editor-left-selected' : ''}><button data-tip='Related modules, such as those that share attributes. ' onClick={this.leftNavClick('related')}><img src={RelatedButton} alt=\"\"/>{relatedCount}</button></li>\n\n  }\n\n\n  leftNavClick = (nav) => {\n    return () => {\n      if(nav !== 'hide' || (nav === 'hide' && this.props.modulePanelVisible)){\n        this.props.changeModulePanel(nav);\n      } else if (nav === 'hide') {\n        if(this.props.selectedStateKey){\n          this.props.changeModulePanel('state');\n        } else {\n          this.props.changeModulePanel('info');\n        }\n      }\n    }\n  }\n\n  renderNav = () => {\n    return(\n      <div className='Editor-top'>\n        <img src={SyntheaLogo} className='Editor-top-logo' alt='Synthea Logo'/>\n        <div className='Editor-top-title'>Synthea Module Builder</div>\n        <div className='Editor-top-open'>\n          <button className='button-clear' onClick={this.newModule(Object.keys(this.props.modules)).bind(this, undefined)}>New Module</button>\n          <button className='button-clear' onClick={this.props.showLoadModule}>Open Module</button>\n          <button className='button-clear Editor-top-download' onClick={this.props.showDownload}>Download</button>\n        </div>\n        <button className='button-clear Editor-top-help' onClick={this.startTutorial(BasicTutorial)}> ? </button>\n        <NavTabs selectedModuleKey={this.props.selectedModuleKey}\n                 modules={this.props.modules}\n                 onChangeModule={(key) => this.props.push('#' + key)}\n                 onCloseModule={(key) => {this.props.closeModule(key)}}\n                 />\n              \n      </div>\n    )\n\n  }\n\n  renderMainEditor = () => {\n\n    if(!this.props.module){\n      return <img className='Editor-loading-logo' src={LoadingLogo} alt='Loading'/>\n    }\n\n    return (\n      <div className='Editor-main'>\n\n        <div className='Editor-action-bar'>\n              <RIEInput className='Editor-top-module' value={(this.props.module && this.props.module.name) || 'Untitled'} propName=\"name\" change={(name) => {this.props.editModuleName(this.props.selectedModuleKey, name.name)}} />\n             <div className='Editor-graph-buttons'>\n                {this.renderAddStateButton()}\n                {this.renderUndoButton()}\n                {this.renderRedoButton()}\n                {this.renderDeleteButton()}\n                {this.renderCopyButton()}\n                {this.renderPasteButton()}\n                {this.renderDownloadButton()}\n\n             </div>\n        </div>\n\n        <div className='Editor-left'>\n         <ul>\n        <li className={'Editor-left-fullscreen' + (!this.props.modulePanelVisible ? ' Editor-left-fullscreen-active' : '')}><button data-tip='Show/hide editor panel.' onClick={this.leftNavClick('hide')}><img src={FullscreenButton} alt=\"\"/></button></li>\n           <li className='Editor-left-spacer'></li>\n           <li className={this.props.selectedModulePanel === 'info' ? 'Editor-left-selected' : ''}><button data-tip='Module Properties.' onClick={this.leftNavClick('info')}><img src={InfoButton} alt=\"\"/></button></li>\n           {this.renderStateButton()}\n           <li className='Editor-left-spacer'></li>\n           <li className={this.props.selectedModulePanel === 'code' ? 'Editor-left-selected' : ''}><button data-tip='Directly edit module JSON.' onClick={this.leftNavClick('code')}><img src={CodeButton} alt=\"\"/></button></li>\n           <li className='Editor-left-spacer'></li>\n           {this.renderStateListButton()}\n           {this.renderAttributesButton()}\n           {this.renderWarningButton()}\n           {this.renderRelatedModulesButton()}\n\n\n         </ul>\n        </div>\n\n        <div className='Editor-panel' style={{left: this.props.modulePanelVisible ? 50 :  -this.state.panelWidth, width: this.state.panelWidth}}>\n          <div className='Editor-panel-content'>\n            <button className='Editor-panel-minimize button-clear' onClick={this.leftNavClick('hide')} ><img src={MinimizePanel} alt=\"\"/></button>\n            {this.renderPanelContent()}\n          </div>\n\n          <Draggable\n             axis='x'\n             onDrag={this.onPanelResize}\n             onStop={this.onPanelResizeDone}\n             bounds={{left: -250, top: 0, right: Infinity, bottom: 0}}\n            >\n            <div className='Editor-panel-resize' style={{left: this.originalPanelWidth - 8}}></div>\n          </Draggable>\n\n         </div>\n\n\n\n        {this.renderModuleGraph()}\n\n\n      </div>)\n\n  }\n\n  render() {\n\n    return (\n      <div className='Editor'>\n\n        <ReactTooltip\n          className='react-tooltip-customized'\n          effect='solid'\n          delayShow={800}\n          />\n\n        { this.renderNav() }\n\n        { this.renderLoadModule() }\n        { this.renderDownload() }\n\n        { this.renderMainEditor() }\n\n\n        <Joyride\n          ref={c => (this.joyride = c)}\n          showOverlay={true}\n          showSkipButton={true}\n          showStepsProgress={false}\n          type={'continuous'}\n          steps={this.state.joyride.steps}\n          run={this.state.joyride.run}\n          autoStart={true}\n          debug={false}\n          allowClicksThruHole={false}\n          keyboardNavigation={true}\n        />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n\n  let selectedModuleKey = state.editor.selectedModuleKey;\n\n  let loadModuleVisible = state.editor.loadModuleVisible;\n\n  if(!selectedModuleKey){\n    loadModuleVisible = true;\n  }\n\n  let module = state.editor.modules[selectedModuleKey];\n\n  let moduleStates = selectedModuleKey && extractStates(module);\n  let moduleState =  moduleStates && moduleStates.find(s => (s.name === state.editor.selectedStateKey))\n\n  let undoEnabled = state.editor.historyIndex < state.editor.history.length - 1;\n  let redoEnabled = state.editor.historyIndex > 0;\n\n  return {\n    module,\n    modules: state.editor.modules,\n    library: state.library.modules,\n    selectedModuleKey,\n    moduleState,\n    moduleStates,\n    selectedStateKey: state.editor.selectedStateKey,\n    selectedStateTransition: state.editor.selectedStateTransition,\n    loadModuleVisible: loadModuleVisible,\n    downloadVisible: state.editor.downloadVisible,\n    selectedModulePanel: state.editor.selectedModulePanel,\n    modulePanelVisible: state.editor.modulePanelVisible,\n    warnings: state.analysis.warnings,\n    relatedModules: state.analysis.relatedModules,\n    attributes: state.analysis.attributes,\n    undoEnabled,\n    redoEnabled,\n    refreshCodeFlag: state.editor.refreshCodeFlag,\n    clipboard: state.editor.clipboard\n  }\n}\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  selectNode,\n  addNode,\n  addStructure,\n  addTransition,\n  editNode,\n  renameNode,\n  copyNode,\n  changeStateType,\n  newModule,\n  loadLibrary,\n  showLoadModule,\n  hideLoadModule,\n  showDownload,\n  hideDownload,\n  refreshCode,\n  editModuleName,\n  editModuleRemarks,\n  changeModulePanel,\n  jsonEdit,\n  closeModule,\n  undo,\n  redo,\n  push\n}, dispatch)\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Editor);\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAADF0lEQVRIiZ3WS4iVZRgH8N8cx+N4osuMkqPZFbEb4aIUwkVWEAUtohZR7oISiqJNi0gwsILatLCCcBPZbREFbaTMRYRdKRcVJdaohVE5MzmHUU9NZ74Wz/M535w5M874h5dzznt5/s/l/z7v6XFmNLABd2AT1mApjuN7fIS9+AH/zsNeV1yNl3AMBVoYwV9J1MYkfsIT6D8bkpvxdRI08Rm24i7chs14MSNpYwJv4dKFkFyPb5LkFzyKVah37GuIqJ/H37l/Fy6cD8lyvJuHfsQtWHyGM+emM8dFZE9iyVwHevAA/kkP7+xYX4SLsQ5rk6BEHU+ngwdxw1xEg9idm18xPVXnYwv2YQgH8DKurey5DF/l+a1zRXUjfsUYbq/MN/CMEEVRGRP4Atd1iWovVs5GdB9OCiVdXpnfJCRddBlt7BB3i1DkWEZ9ZWmgVjHWg/PSqzFxZwgh3Jpr3VATl3kgfw9jXKR6SXVTlaiWn+30ttyzqmNvJ1aYUmZ5tifHDKJJUYOJ9L705j8cMrfEj+JUfh8QahwX6p1BBIcxKuqzpuLhBzgyC0khOsKIkP/GdHQoHe+KlfgwD++oRFHDgxlZVQhNvC1SB5fgS5GdbWZ2ktNYlAab4sJWJV4X/e910Z724DFclOt9eEqk+mesn42kxCDeS4+/S7K+ynq/6A6D6M25hugoo6Iu2zvOzIqNopkW+A2P4IKMuIrFoqk+J2pU4BNT9T2N3s6JRFs0SFgtnoO78T6+FYpaIRruPbginWiKbAzNJ5rVeE0U9JAQx4iQfSFe0ZaoRVUYkzn24CYdQijluBx/iFw/jIfS4At4Fp+K/Pcm4Xj+3i+EcQofiza0IceweOpJ9e5Lr9fhXvyeHu40/QE7R4jgGtFE12b6lglZ9+N+cXmLtHmVqNdmmYYW3jH1dO9OgwtFHY+LVJ/Am2l3v0xBmfsCn4t0ni0G8Kqp/xF/4ljN9C49IR60UTOlPF9MiielJWral3MOm66cYbwh7sdCURdCOpK2SpvNXnFflmY0LdHXyrFQ1MQ71BAd4qTIzOj/E7fg3rTP7r4AAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAaCAYAAAAwspV7AAAAs0lEQVRIie3UMQrCQBCF4S9h8SzxRKbQ0lYrxcYL6BXsbPSEQhotNBBCAmuzSbE/TLGzA/uYfbxiWVULXLFGgTsOaOp6BR6Pp5QEXLDr9HZ44dSbfacSVWIz0N+mEjBEOeXjY5S+HupzG+gVqSrg+Du033jHuaumNXwqAhrsfzULQuotxDBLoxfLqhq9nGqLAaOJ3g7lRJcTPZ6c6LHkRI9llkbPif6PqJzoMczS6DnRY/kAyfw0NPNHfbAAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAYCAYAAAB0kZQKAAABmklEQVRIibWWy3HCMBCGv3HSgFtwC0kJaYEWSAlQgiiBXHNzSoBrbqQEuOZmX7mRA1q0XkvyiJh/RjO2tI9f2ocEY6yAC1BH1v4DsdsBLznBNy+4m5kAQAMcFZEmJXicEpiBSEdmo84vugcREEhYLlxPfoDOj7lzIQYJyzbGbhvT8HB+/aKGPTWn1nIJqJP0hh2J4zEOnJKVIY7sfC60DSYkMtElFGI4GEc6zjvCca8yNgYyS8rLUnSE/NTOY2hFpyIk4qnAwAfQ+2/R3wPrAhvir6kIPaGEBMCX+S8hAGET6JMoxT5ltBTVvYqMk255p53+XhKOcQ9YFNq45WIVmYxhSdhpSziFNSEMDfmStJBN9BC6XKpEdWPRQ7qrM/NCdkU+RFLaDYSaTzWrGInWyBwiMrm+IU+GI8AzIctrv2iz/gS8E0r5h3F5vhqHPbBJEIAQioGd6K32QIi/QXLrW+3RV/mCeEipmXjxzAjJn+g1r2/CklIrgfjIXnT6TVDafKYgVXawC0/m/xM4c62Ab+B3ZiJwrbSznvgDPlufbtfHeLcAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAA5ElEQVRIib3WPQqDQBCG4dc0Qq6Rg6XzXjlDevEIghcQBGtbK9OsYUn8mU/HXRgIMpMHx12dDH3lwDP8fgHjgf8wrztQAlOIMlxLgl2KrmGXoHuYK2rFXNA1bACqEIMXunVndZRXr+RI6F4bLaAZtTyzJspvdnI3UesGaaOa1pC/iCq7UQX/0FzAJqCPwF6oK4NFIRTNx2JeS8diK4rbb29TLLWl8edoFOq+LQX9FTagtfP0TlXC5Sy6YFa0Ax4hurOYBa2ivMoDs6DvEG6YBXXHVDTpXJN0cks6m8pYdgA9Nep/AHdVY2hvGCEdAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAbCAYAAAAULC3gAAABYElEQVRIie2XTU7DMBCFP1dZItFLVGHFujs2CAmxZMdFKBdo4TBhxx04AItyiqgpe7OwKyZR4njCgCrEk0aa+PfZHr+JIWABVMAO8Ea2i2MuALz3WQZQArUhka7VQKkhVP0gmYNVuYQcsAdO4tG9AS/Y4Bo4j37jvT/N7ShXsjIiA7CRY+fu0MyQgAn+PiF5W6bg6HYIdEE9KqBih7LK6QiohlCWgE4g1BJQzZGtgbmivRZzYF0oOlwJP0dAX4FlT/lT51sK6CWMHNnAVq+GbpMo7xXGHrTaFcAHX6njLlakVgRwATxG/15WOOcO7o0obvqYDCGZXL8RpK3kmph/02nLGYnbY0CojnNkEZoBW0LwPRMyvxX2ccxlnCMLRVzlO3CrmOxB+G6w1QRorn0LInhNcXS57J/QGDQxNCagU9EWUMXz5FdeJxpCSQE1sCCgmgcc4Z+oIuQmKyJNHLME+AQWCT3RvS5INwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHEAAAAmCAYAAADz9XSfAAAC00lEQVR4nO2c4XnaMBRF7+NjAEagGzgbOBuQDcgGdAM6QbMBbJBskGwAGyQblA1uf8hNhbAtbPSeGtV3AB0ONu9JnyQApZBckHwlWWsxWphLkgcrXsAuy5dkRfIXXWoVyCVz9YdpwQvYFcl3Y99azZfkmuepk0MumVsfqM0L2Dl8Nyq+TTnZ8TJ1Mkg78zkEavFa+OX4sqnNLUJqUnQlrJWpwQvYi6J86dVmKym6EtbJTM0L2Dl8V33MWwffdA2sJUXyZwyYkhewc/huY8CxA7fWZk0p/p3CR5OC18LeFePLntqsJcXzKXx6qX52X7//er6M1GYNKV5O4dNK9bNz+Q5iDhk8WptTS/H6EjZO6t/zjfb7tsyvGHgB4BnA6A83NA3zFUBlxQzYOwArY+Zo31lk8ArAAbYPsAbwjjwPsIL7Mi0fYIUbfTsfIsk1nNBy7OBDQ3LTMBdWTI+9hvGvv2EeoOE7tjZ3pL6CN2QKH83/5jsPB4f927iE67m5+p91v18ise9nOWWC2jw0JFdw5SRX/8vR75P7zprB19CqzR0huYV7I3P1vwMK6fdzkjsA69QDd4UZpvABvzjf3iXGlK+RmYg8Ani0AorISUQeAPywYgb8XL7ftRizBrQHcAfgpAUKIyJbAA+WTI+9h/P9MGQ+AbiHgu9nORWRI4BvAI6pIV0RkRe4L9OM6bGPDfvNkPkGBd+zntj89O8APKWE9EVEPuDe0L0V02OfROQepfpyxJZIR+oBzGt2zqP5Qr6Dt9naEoMM2pzsyNVSDTN2huU2qbjvkA3gFL7+Gd1R6V1iZOwbpr3ZYx/hSt2LMfMm3+g60esbZksCrzfvrZgB23QJZDoX4XQ8w8pX53iGB5kOSpXgy+nIYjm+nA4PW/jqHB4OINMxfn1fvWP8HmS6UFOCL6erbeX4crpkWhswdS6ZBpDpurc+s1b3ZWl/RBBnZ/P9DWNXeLt4JWYKAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAgCAYAAADud3N8AAABr0lEQVRIib3WsWsUQRTH8c/OnTZRBIkWOUFLG0FjFUgrpLOz0NZ/QNDeXhQbQSxSCVrY2KSwUIgWIgqBNEoOxYhaGS8RxEIuFrsLlzV3mbm97A9esfB+7/tmZuftZuKU4SzmcRodtPEXX/Eer7CC7ciaQzWNm1gviu0V60X+9DiwFm5gKxJWja3C34oFHsfymLBqLBf1RuoEuhMCltEt6u6qQ1iNLHQfl3AvMn+1qP+fFiMLfKr4Pkb6FqvAuYTt+jnQ9RQ2Erxzg9ClBGN5Tg+xluhbKoEd9BPN40YfnYAF+cRpQhkWAmYTjZuFuYzNRP9skG9vk+oEHG4YOhXQaxj6I8gvd5P6HvC6YegbOILf4u9a9Th6Cd4+ZoL8lX+0b+vaqef4Vj6cwp/Ibuus9GK1i+sJ5t5AxHre2WXyZXiSUCR15u74wgzqIJ7uA/T2MGCpFm6Z3JfnJQ7sBS01j7c1gV0ciwWWynABj/ErEfgZJ1OBVbVxDldwTT7JhgE/GPEHWEd3hwBf4OgoY5hwI3fkx7ExKqk9IdgXXMWzmOS6K93GA5yJBdbVZZwfx/gPjrmEGhKRqqEAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAZCAYAAADNAiUZAAABn0lEQVRIic2WwXHCMBBFnzM0QAu04JSQlAAlQAlwk3SDElAJSQmhBFwCtOAS4CAJ1kISdkxm8mc8I9kr/d2V9nsr0pgDS+DDzy2wShkarW5jpc0MOInPG+DbaHWWa94S+6yBL0E4Blvg6J15SvpKTHGZu2ESGcy8UcAG2PXd3aexAlDa/HDPVi3t4khn0dz2JUzgkNs3lV6JdgSpXCuz95T0T1AiHRNlcX3pTEuke+ACXJQ2F6VNqrx6p1fesqZA2gdSEKbSMUm69M9LSH35SOJtEIkJLqWnaE3DgPosYAEc/bgGTkobW2VIq767Su1NQWmzxslhgM3d3mPm/SAobeqIEHBnGqRL/kVquuf7W+zFuAHejVYrGamlK3uj/jI+SlkNK6NVA48lI29srMNDIWuzDYQp0k5tFTZc0hWHlINZofl32luKNMYgnX4FaWu0SpHK9cUe6RzNc2VjuSvWIf6otHloUSTiduWMS1Xwcu+fuBuceodaQZ7qBgM6Op5Kbx/NneMi/JSlkEFL1PbkSBck0iZgvc0zwh1OhTrHdgUMPHWH6hjEpwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABKUlEQVRIieWVzW3DMAxGn4Au4BW8QlbwClnBK2SFrpAV2hG8QlZQR/AKzKEMKsQ0TCoSeggBHgxIfvz7KPgnS+WHiPSBpHQGRuAb+NkcEJGmDsxABkR9erA+OmQ3KHDWLE1rBi6AF2A4Ov8yOKU0KuzsAZoW7N8IXPnrn8cnA+sD6+UlCBQN0q6IY0KjwIz2vPiPD8xWEh6/AfPO//bBWpJLBfAKTAeVM+0BXAOwFfgERueM2EkHPGsbBg+wBXg5KmdrcPaWs0fGK78zUB3AK6UuJ/jUClyzlRZ2NFuj4xPxPbzZUmFwcajmIVj1jjkHLrCxySKLRYAvnqQXAjdYpRmdgyrwUxA1j0f9e7wTgFcJ7cBFAB4ptgc7pdgPfCDF/mBDCYtW403tDn5nUb6eK9JxAAAAAElFTkSuQmCC\"","// @flow\nimport React from 'react';\nimport { Provider } from 'react-redux'\nimport { Route, Switch } from 'react-router-dom'\nimport { ConnectedRouter} from 'connected-react-router'\n\nimport createAppStore, { history } from './store';\nimport Editor from './containers/Editor';\n\nimport { openModule } from './actions/router';\n\nconst store = createAppStore(history)\n\nconst App = () => {\n  return (\n    <Provider store={store}>\n      <ConnectedRouter history={history}>\n        <Switch>\n          <Route exact path=\"/\" component={Editor} />\n        </Switch>\n      </ConnectedRouter>\n    </Provider>\n  );\n}\n\nconst dispatchLocationChange = location => {\n  if(location.hash.charAt(0) === '#'){\n    store.dispatch(openModule(location.hash.slice(1)));\n  }\n}\n\nhistory.listen(dispatchLocationChange);\n\ndispatchLocationChange(history.location);\n\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css'\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// Do not use service workers because they cause unexpected behavior and we\n// are not interested in offline modes currently. Unregister to clear out\n// previous registered service workers for people that have already visited\n// the app.\nserviceWorker.unregister();\n"],"sourceRoot":""}