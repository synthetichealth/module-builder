(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,n){},114:function(e,t,n){},123:function(e,t){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},138:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(12),i=n.n(o),s=(n(87),n(26)),l=n(33),c=n(25),d=n(22),u=n(20),p=n(48),m=n(56),h=n(9);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach(function(t){Object(h.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E={modules:{},analysis:{}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_LIBRARY":return g({},e,{modules:g({},t.data),location:t.location});default:return e}},y=n(16),f=n(8),C=n.n(f);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach(function(t){Object(h.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x(e){var t=e.split("."),n=t.shift(),a=t.join("."),r=null;switch(n){case"Type":r=A;break;case"Attribute":r=k;break;case"Transition":r=j;break;case"State":r=S;break;case"Contained":r=_;break;case"Structure":r=M;break;case"Module":r=D}return 0===a.length?r:C.a.cloneDeep(C.a.get(r,a))}var A={Date:{Year:2e3,Month:12,Day:25,Hour:0,Minute:0,Second:0,Millisecond:0},Code:{Snomed:{system:"SNOMED-CT",code:"1234",display:"SNOMED Code"},Loinc:{system:"LOINC",code:"1234",display:"LOINC Code"},RxNorm:{system:"RxNorm",code:"1234",display:"RxNorm Code"},Nubc:{system:"NUBC",code:"1234",display:"NUBC Code"},DicomDCM:{system:"DICOM-DCM",code:"XX",display:"DICOM Modality Code"},DicomSOP:{system:"DICOM-SOP",code:"1.2.3.4.5.6.7.8",display:"DICOM Subject-Object Pair Code"}},Condition:{Gender:{condition_type:"Gender",gender:"F"},Age:{condition_type:"Age",operator:">",quantity:0,unit:"years"},Date:{condition_type:"Date",operator:">",year:2e3},"Active Condition":{condition_type:"Active Condition",codes:[{system:"SNOMED-CT",code:"1234",display:"SNOMED Code"}]},"Socioeconomic Status":{condition_type:"Socioeconomic Status",category:"Middle"},Race:{condition_type:"Race",race:"Hispanic"},Symptom:{condition_type:"Symptom",symptom:"Chest Pain",operator:">=",value:50},Observation:{condition_type:"Observation",codes:[{system:"LOINC",code:"72107-6",display:"Mini Mental State Examination"}],operator:"==",value:0},"Vital Sign":{condition_type:"Vital Sign",vital_sign:"Systolic Blood Pressure",operator:">",value:120},"Active Medication":{condition_type:"Active Medication",codes:[{system:"RxNorm",code:"849727",display:"Naproxen sodium 220 MG [Aleve]"}]},"Active CarePlan":{condition_type:"Active CarePlan",codes:[{system:"SNOMED-CT",code:"698360004",display:"Diabetes self management plan"}]},PriorState:{condition_type:"PriorState",name:""},Attribute:{condition_type:"Attribute",attribute:"opiod_prescription",operator:"==",value:"Vicodin"},And:{condition_type:"And",conditions:[{condition_type:"Gender",gender:"M"},{condition_type:"Age",operator:">=",quantity:40,unit:"years"}]},Or:{condition_type:"Or",conditions:[{condition_type:"Gender",gender:"M"},{condition_type:"Age",operator:">=",quantity:40,unit:"years"}]},"At Least":{condition_type:"At Least",minimum:2,conditions:[{condition_type:"Gender",gender:"M"},{condition_type:"Age",operator:">=",quantity:40,unit:"years"},{condition_type:"Active CarePlan",codes:[{system:"SNOMED-CT",code:"698360004",display:"Diabetes self management plan"}]}]},"At Most":{condition_type:"At Most",maximum:2,conditions:[{condition_type:"Gender",gender:"M"},{condition_type:"Age",operator:">=",quantity:40,unit:"years"},{condition_type:"Active CarePlan",codes:[{system:"SNOMED-CT",code:"698360004",display:"Diabetes self management plan"}]}]},Not:{condition_type:"Not",condition:{condition_type:"Gender",gender:"M"}},True:{condition_type:"True"},False:{condition_type:"False"}}},k={Exact:{quantity:1},ExactWithUnit:{quantity:1,unit:"days"},Range:{low:1,high:2},RangeWithUnit:{low:1,high:2,unit:"days"},Prescription:{dosage:{amount:1,frequency:1,period:1,unit:"days"},duration:{quantity:1,unit:"days"}},Goal:{addresses:["text"]},Observation:{codes:[N({},A.Code.Loinc)],operator:"==",value:1},Since:" ",Within:{quantity:1,unit:"days"},UnnamedDistribution:1,NamedDistribution:{attribute:"attribute",default:1},ImagingStudy:{Instance:{title:"Title of this image",sop_class:N({},A.Code.DicomSOP)},Series:{body_site:N({},A.Code.Snomed),modality:N({},A.Code.DicomDCM),instances:[{title:"Title of this image",sop_class:N({},A.Code.DicomSOP)}]}}},j={Direct:"Initial",Conditional:[{transition:"Initial",condition:N({},A.Condition.Age)}],Distributed:[{transition:"Initial",distribution:1}],Complex:[{condition:N({},A.Condition.Age),distributions:[{transition:"Initial",distribution:1}]}]},S={Initial:{type:"Initial"},Terminal:{type:"Terminal"},Simple:{type:"Simple"},Guard:{type:"Guard",allow:N({},A.Condition.Age)},Delay:{type:"Delay",exact:N({},k.ExactWithUnit)},SetAttribute:{type:"SetAttribute",attribute:""},Counter:{type:"Counter",attribute:"",action:"increment"},CallSubmodule:{type:"CallSubmodule",submodule:""},Encounter:{type:"Encounter",encounter_class:"ambulatory",reason:"",codes:[N({},A.Code.Snomed)]},EncounterEnd:{type:"EncounterEnd"},ConditionOnset:{type:"ConditionOnset",assign_to_attribute:"",target_encounter:"",codes:[N({},A.Code.Snomed)]},ConditionEnd:{type:"ConditionEnd"},AllergyOnset:{type:"AllergyOnset",target_encounter:"",codes:[N({},A.Code.Snomed)]},AllergyEnd:{type:"AllergyEnd"},MedicationOrder:{type:"MedicationOrder",codes:[N({},A.Code.RxNorm)]},MedicationEnd:{type:"MedicationEnd"},CarePlanStart:{type:"CarePlanStart",codes:[N({},A.Code.Snomed)]},CarePlanEnd:{type:"CarePlanEnd"},Procedure:{type:"Procedure",codes:[N({},A.Code.Snomed)],duration:{low:30,high:30,unit:"minutes"}},VitalSign:{type:"VitalSign",vital_sign:"",unit:"",exact:N({},k.Exact)},Observation:{type:"Observation",category:"vital-signs",unit:"",codes:[N({},A.Code.Loinc)],exact:N({},k.Exact)},MultiObservation:{type:"MultiObservation",category:"vital-signs",number_of_observations:0,codes:[N({},A.Code.Loinc)]},DiagnosticReport:{type:"DiagnosticReport",codes:[N({},A.Code.Loinc)],observations:[]},ImagingStudy:{type:"ImagingStudy",procedure_code:N({},A.Code.Snomed),series:[N({},k.ImagingStudy.Series)]},Symptom:{type:"Symptom",symptom:"",cause:"",probability:1,exact:N({},k.Exact)},Death:{type:"Death",exact:N({},k.ExactWithUnit)}},_={Observation:{category:"laboratory",unit:"",codes:[N({},A.Code.Loinc)],exact:N({},k.Exact)}},M={CheckYearly:{CheckYearly:N({},S.Delay,{exact:N({},A.exact,{quantity:1,unit:"years"}),conditional_transition:[{transition:"HasCondition",condition:N({},A.Condition.ActiveCondition)},{transition:"CheckYearly"}]}),HasCondition:N({},S.Simple,{direct_transition:"Terminal"})},ConditionIncidence:{RiskPerMonth:N({},S.Delay,{exact:N({},A.exact,{quantity:1,unit:"months"}),distributed_transition:[{distribution:.99,transition:"RiskPerMonth"},{distribution:.01,transition:"AcquireCondition"}]}),AcquireCondition:N({},S.ConditionOnset,{codes:[{system:"SNOMED-CT",code:"",display:""}],direct_transition:"Terminal"})},GenderDifference:{GenderDifference:N({},S.Simple,{conditional_transition:[{condition:N({},A.Condition.Gender,{gender:"M"}),transition:"Male"},{condition:N({},A.Condition.Gender,{gender:"F"}),transition:"Female"}]}),Male:N({},S.Simple,{direct_transition:"Common"}),Female:N({},S.Simple,{direct_transition:"Common"}),Common:N({},S.Simple,{direct_transition:"Terminal"})},ConditionVariation:{VariantDistribution:N({},S.Simple,{distributed_transition:[{distribution:.25,transition:"Condition1"},{distribution:.35,transition:"Condition2"},{distribution:.4,transition:"Condition3"}]}),Condition1:N({},S.ConditionOnset,{codes:[{system:"SNOMED-CT",code:"",display:""}],direct_transition:"Join"}),Condition2:N({},S.ConditionOnset,{codes:[{system:"SNOMED-CT",code:"",display:""}],direct_transition:"Join"}),Condition3:N({},S.ConditionOnset,{codes:[{system:"SNOMED-CT",code:"",display:""}],direct_transition:"Join"}),Join:N({},S.Simple,{direct_transition:"Terminal"})},MedicationVariation:{VariantDistribution:N({},S.Simple,{distributed_transition:[{distribution:.25,transition:"Medication1"},{distribution:.35,transition:"Medication2"},{distribution:.4,transition:"Medication3"}]}),Medication1:N({},S.MedicationOrder,{codes:[{system:"RxNorm",code:"",display:""}],direct_transition:"Join"}),Medication2:N({},S.MedicationOrder,{codes:[{system:"RxNorm",code:"",display:""}],direct_transition:"Join"}),Medication3:N({},S.MedicationOrder,{codes:[{system:"RxNorm",code:"",display:""}],direct_transition:"Join"}),Join:N({},S.Simple,{direct_transition:"Terminal"})},ChildrensDose:{DosageDecision:N({},S.Simple,{conditional_transition:[{condition:N({},A.Condition.Age,{operator:">=",quantity:18,unit:"years"}),transition:"AdultDose"},{transition:"ChildrensDose"}]}),AdultDose:N({},S.MedicationOrder,{codes:[{system:"RxNorm",code:"",display:""}],direct_transition:"Join"}),ChildrensDose:N({},S.MedicationOrder,{codes:[{system:"RxNorm",code:"",display:""}],direct_transition:"Join"}),Join:N({},S.Simple,{direct_transition:"Terminal"})},MedicationsByYear:{VariantsByYear:N({},S.Simple,{conditional_transition:[{condition:N({},A.Condition.Date,{operator:">=",year:2007}),transition:"Medication1"},{condition:N({},A.Condition.Date,{operator:">=",year:1992}),transition:"Medication2"},{condition:N({},A.Condition.Date,{operator:">=",year:1978}),transition:"Medication3"},{transition:"Medication4"}]}),Medication1:N({},S.MedicationOrder,{codes:[{system:"RxNorm",code:"",display:""}],direct_transition:"Join"}),Medication2:N({},S.MedicationOrder,{codes:[{system:"RxNorm",code:"",display:""}],direct_transition:"Join"}),Medication3:N({},S.MedicationOrder,{codes:[{system:"RxNorm",code:"",display:""}],direct_transition:"Join"}),Medication4:N({},S.MedicationOrder,{codes:[{system:"RxNorm",code:"",display:""}],direct_transition:"Join"}),Join:N({},S.Simple,{direct_transition:"Terminal"})},ProcedureVariation:{BeginEncounter:N({},S.Encounter,{codes:[{system:"SNOMED-CT",code:"",display:""}],distributed_transition:[{distribution:.25,transition:"Procedure1"},{distribution:.35,transition:"Procedure2"},{distribution:.4,transition:"Procedure3"}]}),Procedure1:N({},S.Procedure,{codes:[{system:"LOINC",code:"",display:""}],direct_transition:"Observation1"}),Observation1:N({},S.Observation,{codes:[{system:"SNOMED-CT",code:"",display:""}],direct_transition:"Join"}),Procedure2:N({},S.Procedure,{codes:[{system:"LOINC",code:"",display:""}],direct_transition:"Observation2"}),Observation2:N({},S.Observation,{codes:[{system:"SNOMED-CT",code:"",display:""}],direct_transition:"Join"}),Procedure3:N({},S.Procedure,{codes:[{system:"LOINC",code:"",display:""}],direct_transition:"Observation3"}),Observation3:N({},S.Observation,{codes:[{system:"SNOMED-CT",code:"",display:""}],direct_transition:"Join"}),Join:N({},S.Simple,{direct_transition:"Terminal"})}},D={Blank:{name:"Untitled",remarks:["A blank module"],states:{Initial:N({},S.Initial,{direct_transition:"Terminal"}),Terminal:N({},S.Terminal)}},Yearly:{name:"Yearly Check for Condition",remarks:["Check yearly for patient to have a condition"],states:N({},M.CheckYearly,{Initial:N({},S.Initial,{direct_transition:"CheckYearly"}),Terminal:N({},S.Terminal)})},DeadAt40:{name:"Dead At 40",remarks:["This module is an example of writing a template"],states:{Initial:N({},S.Initial,{direct_transition:"DelayUntil40"}),DelayUntil40:N({},S.Delay,{exact:N({},A.exact,{quantity:40,unit:"years"}),direct_transition:"Death"}),Death:N({},S.Death,{direct_transition:"Terminal"}),Terminal:N({},S.Terminal)}}};function I(e,t){return Object.keys(t).reduce(function(e,n){return e.split(n).join(t[n])},e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach(function(t){Object(h.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var T={selectedStateKey:null,selectedStateTransition:null,selectedModuleKey:null,loadModuleVisible:!1,downloadVisible:!1,selectedModulePanel:"info",modulePanelVisible:!0,modules:{},history:[],clipboard:null,historyIndex:-1,refreshCodeFlag:!1},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0,n=R({},e);switch(t.type){case"SELECT_NODE":var a=e.selectedModulePanel;return t.data.key?"info"!==a&&e.selectedStateKey!==t.data.key||(a="state"):"state"===a&&(a="info"),(n=R({},n,{selectedModulePanel:a,selectedStateKey:t.data.key,selectedStateTransition:t.data.transitionIndex})).history=Object(y.a)(n.history),n.history[0]=R({},n.history[0],{selectedStateKey:t.data.key,selectedStateTransition:t.data.transitionIndex}),n;case"COPY_NODE":return n.clipboard=C.a.cloneDeep(e.modules[t.data.targetModuleKey].states[t.data.targetNode.name]),n;case"ADD_NODE":if(n.modules=R({},n.modules),n.modules[t.data.currentModuleKey].states=R({},n.modules[t.data.currentModuleKey].states,Object(h.a)({},t.data.stateKey,t.data.state)),t.data.selectedState&&"number"===typeof t.data.selectedStateTransition){var r=C.a.cloneDeep(n.modules[t.data.currentModuleKey].states[t.data.selectedState]);if(r.direct_transition&&0===t.data.selectedStateTransition){var o=r.direct_transition;r.direct_transition=t.data.stateKey,n.modules[t.data.currentModuleKey].states[t.data.stateKey].direct_transition=o,n.modules[t.data.currentModuleKey].states[t.data.selectedState]=r}else if(r.distributed_transition){var i=r.distributed_transition[t.data.selectedStateTransition].transition;r.distributed_transition=Object(y.a)(r.distributed_transition),r.distributed_transition[t.data.selectedStateTransition]=R({},r.distributed_transition[t.data.selectedStateTransition],{transition:t.data.stateKey}),n.modules[t.data.currentModuleKey].states[t.data.stateKey].direct_transition=i,n.modules[t.data.currentModuleKey].states[t.data.selectedState]=r}else if(r.conditional_transition){var s=r.conditional_transition[t.data.selectedStateTransition].transition;r.conditional_transition=Object(y.a)(r.conditional_transition),r.conditional_transition[t.data.selectedStateTransition]=R({},r.conditional_transition[t.data.selectedStateTransition],{transition:t.data.stateKey}),n.modules[t.data.currentModuleKey].states[t.data.stateKey].direct_transition=s,n.modules[t.data.currentModuleKey].states[t.data.selectedState]=r}else if(r.complex_transition){r=R({},r,{complex_transition:C.a.cloneDeep(r.complex_transition)});var l={},c=0,d=null;r.complex_transition.forEach(function(e,a){if(void 0!==e.transition){var r=e.transition;if(void 0===l[r]){if(l[r]=!0,c===t.data.selectedStateTransition||r===d){d=r;var o=e.transition;e.transition=t.data.stateKey,n.modules[t.data.currentModuleKey].states[t.data.stateKey].direct_transition=o}c++}else if(r===d){var i=e.transition;e.transition=t.data.stateKey,n.modules[t.data.currentModuleKey].states[t.data.stateKey].direct_transition=i}}else e.distributions.forEach(function(e){var a=e.transition;if(void 0===l[a]){if(l[a]=!0,c===t.data.selectedStateTransition){d=a;var r=e.transition;e.transition=t.data.stateKey,n.modules[t.data.currentModuleKey].states[t.data.stateKey].direct_transition=r}c++}else if(a==d){var o=e.transition;e.transition=t.data.stateKey,n.modules[t.data.currentModuleKey].states[t.data.stateKey].direct_transition=o}})}),n.modules[t.data.currentModuleKey].states[t.data.selectedState]=r}n.selectedStateTransition=0}else if(t.data.selectedState){var u=C.a.cloneDeep(n.modules[t.data.currentModuleKey].states[t.data.selectedState]);delete n.modules[t.data.currentModuleKey].states[t.data.stateKey].direct_transition,delete n.modules[t.data.currentModuleKey].states[t.data.stateKey].conditional_transition,delete n.modules[t.data.currentModuleKey].states[t.data.stateKey].distributed_transition,delete n.modules[t.data.currentModuleKey].states[t.data.stateKey].complex_transition,u.direct_transition?n.modules[t.data.currentModuleKey].states[t.data.stateKey].direct_transition=u.direct_transition:u.distributed_transition?(n.modules[t.data.currentModuleKey].states[t.data.stateKey].distributed_transition=C.a.cloneDeep(u.distributed_transition),delete u.distributed_transition):u.conditional_transition?(n.modules[t.data.currentModuleKey].states[t.data.stateKey].conditional_transition=C.a.cloneDeep(u.conditional_transition),delete u.conditional_transition):u.complex_transition&&(n.modules[t.data.currentModuleKey].states[t.data.stateKey].complex_transition=C.a.cloneDeep(u.complex_transition),delete u.complex_transition),u.direct_transition=t.data.stateKey,n.modules[t.data.currentModuleKey].states[t.data.selectedState]=u}return n.selectedStateKey=t.data.stateKey,n.selectedModulePanel="state",n.selectedStateTransition=null,K(n),n;case"INSERT_NODE":return n.modules=R({},n.modules),n.modules[t.data.currentModuleKey].states=R({},n.modules[t.data.currentModuleKey].states,Object(h.a)({},t.data.stateKey,t.data.state)),n.selectedStateKey=t.data.stateKey,n.selectedModulePanel="state",n.selectedStateTransition=null,K(n),R({},n);case"ADD_STRUCTURE":return n.modules[t.data.currentModuleKey].states=R({},n.modules[t.data.currentModuleKey].states,{},x("Structure.".concat(t.data.structureName))),n.selectedStateTransition=null,K(n),R({},n);case"OPEN_MODULE":var p=e.selectedModuleKey;if(p=t.data.key,t.data.libraryModule){delete n.modules[t.data.key];var m={};m[t.data.key]=C.a.cloneDeep(t.data.libraryModule),n.modules=R({},m,{},n.modules)}return n.modules[t.data.key]||(p=null),n.selectedModuleKey=p,n.selectedStateKey=null,n.selectStateTransition=null,n.loadModuleVisible=!1,n.history=[],n.historyIndex=0,n.selectedModulePanel="info",K(n),R({},n);case"NEW_MODULE":var b=R({},e.modules);delete b[t.data.key];var g={};return g[t.data.key]=t.data.module,n.history=[],n.historyIndex=0,K(n),R({},n,{modules:R({},g,{},b),selectedStateKey:null,selectedStateTransition:null,selectedModuleKey:t.data.key});case"JSON_EDIT":return n.modules=R({},n.modules),n.modules[e.selectedModuleKey]=C.a.cloneDeep(t.data.module),K(n),R({},n);case"EDIT_NODE":var E=t.data.path.join("."),v=Object.values(t.data.update)[0];if("object"===typeof v&&(v=v.id),null!==v&&void 0!==v){C.a.set(n.modules,E,function(e){return"string"!==typeof e?e:(e=e.trim(),/^-?\d*[\.]?\d+$/.test(e)&&(parseFloat(e)||0===parseFloat(e))&&(e=parseFloat(e)),/^(true|false)$/i.test(e)&&(e="true"===e.toLowerCase()),e)}(v));var f=[];if("operator"===(f=Array.isArray(E)?E.join(".").split("."):E.split("."))[f.length-1]){var O=C.a.get(n.modules,f.slice(0,-1).join("."));"is nil"===O.operator||"is not nil"===O.operator?C.a.unset(n.modules,f.slice(0,-1).join(".")+".value"):void 0===O.operator.value&&C.a.set(n.modules,f.slice(0,-1).join(".")+".value",0)}}else{C.a.unset(n.modules,E);var N=Object(y.a)(t.data.path).splice(0,t.data.path.length-1).join("."),A=C.a.get(n.modules,N);Array.isArray(A)&&C.a.set(n.modules,N,A.filter(function(e){return e}));var k=[];if(3===(k=Array.isArray(E)?E.join(".").split("."):E.split(".")).length&&"states"===k[1]){var j=k[2];B(n.modules[k[0]],j,null),k[2]==n.selectedStateKey&&(n.selectedStateKey=null)}}return K(n),n;case"ADD_TRANSITION":var S={Conditional:"conditional_transition",Distributed:"distributed_transition",Direct:"direct_transition",Complex:"complex_transition"},_=S[t.data.transitionType],M=null;null!=t.data.nodeName.transition&&(M=S[t.data.nodeName.transition.type]);var D=Object.values(S);for(var I in D)delete n.modules[t.data.currentModuleKey].states[t.data.nodeName.name][D[I]];n.modules[t.data.currentModuleKey].states[t.data.nodeName.name][_]=x("Transition.".concat(t.data.transitionType));var w=null;switch(M){case"direct_transition":w=C.a.get(t,"data.nodeName.transition.to",null);break;case"distributed_transition":case"conditional_transition":w=C.a.get(t,"data.nodeName.transition.transition[0].to",null);break;case"complex_transition":w=C.a.get(t,"data.nodeName.transition.transition[0].distributions[0].to",null)}if(null!==w)switch(_){case"direct_transition":n.modules[t.data.currentModuleKey].states[t.data.nodeName.name][_]=w;break;case"distributed_transition":case"conditional_transition":n.modules[t.data.currentModuleKey].states[t.data.nodeName.name][_][0].transition=w;break;case"complex_transition":n.modules[t.data.currentModuleKey].states[t.data.nodeName.name][_][0].distributions[0].transition=w}return K(n),n;case"RENAME_NODE":var P=t.data.targetNode.name,L=t.data.newName.name,W=C.a.cloneDeep(e.modules[t.data.targetModuleKey]),V=W.states[P];return void 0===V&&(V=W.states[""],P=""),void 0===V?n:(delete W.states[P],V.name=L,W.states[L]=V,B(W,P,L),n.modules[t.data.targetModuleKey]=W,n.selectedStateKey=t.data.newName.name,K(n),n);case"EDIT_MODULE_NAME":return n.modules[t.data.targetModuleKey].name=t.data.newName,K(n),n;case"EDIT_MODULE_REMARKS":return n.modules[t.data.targetModuleKey].remarks=t.data.newRemarks?t.data.newRemarks.split("\n"):null,null===n.modules[t.data.targetModuleKey].remarks&&delete n.modules[t.data.targetModuleKey].remarks,K(n),n;case"CHANGE_STATE_TYPE":var U=t.data.newType.type.id;return n.modules[t.data.targetModuleKey].states[t.data.targetNode.name]=R({},x("State.".concat(U)),{},C.a.pick(n.modules[t.data.targetModuleKey].states[t.data.targetNode.name],["direct_transition","conditional_transition","distributed_transition","complex_transition","remarks"]),{type:x("State.".concat(U)).type}),K(n),n;case"LOAD_JSON":return n.history=[],n.historyIndex=0,K(n),R({},n,{selectedModuleKey:t.data.selectedModuleKey,selectedStateKey:null,selectedStateTransition:null});case"CLOSE_MODULE":return delete n.modules[t.data.selectedModuleKey],n.history=[],n.historyIndex=0,K(n),R({},n);case"SHOW_LOAD_MODULE":return R({},n,{loadModuleVisible:!0});case"HIDE_LOAD_MODULE":return R({},n,{loadModuleVisible:!1});case"SHOW_DOWNLOAD":return R({},n,{downloadVisible:!0});case"HIDE_DOWNLOAD":return R({},n,{downloadVisible:!1});case"CHANGE_MODULE_PANEL":return R({},n,{selectedModulePanel:t.data.targetPanel,modulePanelVisible:"hide"!==t.data.targetPanel});case"REFRESH_CODE_FLAG":return R({},n,{refreshCodeFlag:t.data.flag});case"UNDO":return n.history.length>n.historyIndex+1&&(n.historyIndex++,n.modules=R({},n.modules),n.modules[n.selectedModuleKey]=C.a.cloneDeep(n.history[n.historyIndex].module),n.selectedStateKey=n.history[n.historyIndex].selectedStateKey,n.selectedStateTransition=n.history[n.historyIndex].selectedStateTransition),R({},n);case"REDO":return n.historyIndex>0&&(n.historyIndex--,n.modules=R({},n.modules),n.modules[n.selectedModuleKey]=C.a.cloneDeep(n.history[n.historyIndex].module),n.selectedStateKey=n.history[n.historyIndex].selectedStateKey,n.selectedStateTransition=n.history[n.historyIndex].selectedStateTransition),R({},n);default:return n}},B=function(e,t,n){Object.keys(e.states).map(function(t){return e.states[t]}).forEach(function(e){e.direct_transition===t?null===n?delete e.direct_transition:e.direct_transition=n:e.distributed_transition?e.distributed_transition.forEach(function(e){e.transition===t&&(null===n?delete e.transition:e.transition=n)}):e.conditional_transition?e.conditional_transition.forEach(function(e){e.transition===t&&(null===n?delete e.transition:e.transition=n),e.condition&&"PriorState"===e.condition.condition_type&&e.condition.name===t&&(null===n?delete e.condition.name:e.condition.name=n)}):e.complex_transition&&e.complex_transition.forEach(function(e){e.transition===t&&(null===n?delete e.transition:e.transition=n),e.condition&&"PriorState"===e.condition.condition_type&&e.condition.name===t&&(null===n?delete e.condition.name:e.condition.name=n),e.distributions&&e.distributions.forEach(function(e){e.transition===t&&(null===n?delete e.transition:e.transition=n)})}),e.reason===t&&(null===n?delete e.reason:e.reason=n),e.target_encounter===t&&(e.target_encounter=null===n?"":n),e.condition_onset===t&&(null===n?delete e.condition_onset:e.condition_onset=n),e.allergy_onset===t&&(null===n?delete e.allergy_onset:e.allergy_onset=n),e.medication_order===t&&(null===n?delete e.medication_order:e.medication_order=n),e.careplan===t&&(null===n?delete e.careplan:e.careplan=n),e.allow&&"PriorState"===e.allow.condition_type&&e.allow.name===t&&(null===n?delete e.allow.name:e.allow.name=n)})},K=function(e){var t=e.selectedStateKey,n=e.selectedStateTransition;if(e.historyIndex>0){for(;e.historyIndex>0&&e.history.length>0;)e.historyIndex--,e.history.shift();e.historyIndex=0}e.history=[{selectedStateKey:t,selectedStateTransition:n,module:C.a.cloneDeep(e.modules[e.selectedModuleKey])}].concat(e.history),e.history.splice(20)};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach(function(t){Object(h.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var V={libraryModuleCodes:{},warnings:[],libraryRelatedModules:{},relatedModules:[],attributes:[]},U={};Object.keys(x("Type").Code).map(function(e){return x("Type").Code[e]}).forEach(function(e){U["".concat(e.code,"-").concat(e.system,"-").concat(e.display)]=!0});var F=function(e,t){var n=[["MedicationOrder","MedicationEnd"],["ConditionOnset","ConditionEnd"],["CarePlanStart","CarePlanEnd"],["AllergyOnset","AllergyEnd"]],a=function(e){return function(t){return a=t.state.type,r=e.type,!(a===r||n.filter(function(e){return e[0]===a&&e[1]===r||e[0]===r&&e[1]===a}).length>0)&&"Death"!==t.state.type&&"Death"!==e.type;var a,r}},r=[];return Object.keys(e.states).forEach(function(n){var o=e.states[n];o.codes&&o.codes.forEach(function(e){if(t[e.code]){var i=t[e.code].filter(a(o));i.length>0&&r.push({stateName:n,message:"Code collision with state "+i[0].stateName+" in module "+i[0].moduleKey+". "})}})}),r},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,n=W({},e);switch(t.type){case"ANALYZE":return n.warnings=[].concat(Object(y.a)(F(t.data.module,n.libraryModuleCodes)),Object(y.a)(function(e){var t=[],n=Object.keys(e.states).reduce(function(e,t){return e[t]=!1,e},{}),a=[];e.states.Initial&&a.push("Initial");for(var r=function(){var r=a.pop(),o=e.states[r];n[r]=!0,o.direct_transition?e.states[o.direct_transition]?n[o.direct_transition]||a.push(o.direct_transition):t.push({stateName:r,message:"Transition to state that does not exist: "+o.direct_transition}):o.distributed_transition?o.distributed_transition.forEach(function(o){e.states[o.transition]?n[o.transition]||a.push(o.transition):t.push({stateName:r,message:"Transition to state that does not exist: "+o.transition})}):o.conditional_transition?o.conditional_transition.forEach(function(o){e.states[o.transition]?n[o.transition]||a.push(o.transition):t.push({stateName:r,message:"Transition to state that does not exist: "+o.transition})}):o.complex_transition&&o.complex_transition.forEach(function(o){o.transition&&(e.states[o.transition]?n[o.transition]||a.push(o.transition):t.push({stateName:r,message:"Transition to state that does not exist: "+o.transition})),o.distributions&&o.distributions.forEach(function(o){e.states[o.transition]?n[o.transition]||a.push(o.transition):t.push({stateName:r,message:"Transition to state that does not exist: "+o.transition})})})};a.length>0;)r();var o=Object.keys(n).map(function(e){return{state:e,visited:n[e]}}).filter(function(e){return!e.visited}).map(function(e){return{stateName:e.state,message:"State cannot be reached."}});return[].concat(t,Object(y.a)(o))}(t.data.module)),Object(y.a)(function(e){var t=[];return Object.keys(e.states).forEach(function(n){var a=e.states[n];switch(a.codes&&a.codes.forEach(function(e){U["".concat(e.code,"-").concat(e.system,"-").concat(e.display)]&&t.push({stateName:n,message:"Code uses an invalid template code: "+e.system+"["+e.code+"]"})}),a.type){case"MultiObservation":case"DiagnosticReport":a.observations&&a.observations.forEach(function(e){e.codes&&e.codes.forEach(function(e){U["".concat(e.code,"-").concat(e.system,"-").concat(e.display)]&&t.push({stateName:n,message:"Code in observation uses an invalid template code: "+e.system+"["+e.code+"]"})})});break;case"ImagingStudy":a.procedure_code&&U["".concat(a.procedure_code.code,"-").concat(a.procedure_code.system,"-").concat(a.procedure_code.display)]&&t.push({stateName:n,message:"Code in procedure code uses an invalid template code: "+a.procedure_code.system+"["+a.procedure_code.code+"]"}),a.series&&a.series.forEach(function(e){e.body_site&&U["".concat(e.body_site.code,"-").concat(e.body_site.system,"-").concat(e.body_site.display)]&&t.push({stateName:n,message:"Code in imaging series uses an invalid template code: "+e.body_site.system+"["+e.body_site.code+"]"}),e.modality&&U["".concat(e.modality.code,"-").concat(e.modality.system,"-").concat(e.modality.display)]&&t.push({stateName:n,message:"Code in imaging series uses an invalid template code: "+e.modality.system+"["+e.modality.code+"]"}),e.instances&&e.instances.forEach(function(e){e.sop_class&&U["".concat(e.sop_class.code,"-").concat(e.sop_class.system,"-").concat(e.sop_class.display)]&&t.push({stateName:n,message:"Code in imaging series uses an invalid template code: "+e.sop_class.system+"["+e.sop_class.code+"]"})})})}}),t}(t.data.module))),n.relatedModules=Object(y.a)(function(e,t,n){var a=[];return n[e]&&(a=C.a.cloneDeep(n[e])),Object.keys(t.states).forEach(function(e){var n=t.states[e];"CallSubmodule"===n.type&&a.push({type:"submodule",module:n.submodule,stateName:e})}),a}(t.data.moduleKey,t.data.module,n.libraryRelatedModules)),n.attributes=function(e){var t=[];return Object.keys(e.states).forEach(function(n){var a=e.states[n];"SetAttribute"===a.type?t.push({attribute:a.attribute,stateName:a.name,stateType:a.type}):a.assign_to_attribute&&t.push({attribute:a.assign_to_attribute,stateName:a.name,stateType:a.type})}),t.sort(function(e,t){var n=e.attribute.toLowerCase(),a=t.attribute.toLowerCase();return n<a?-1:n>a?1:0})}(t.data.module),n;case"LOAD_LIBRARY":return n.libraryModuleCodes=function(e){var t={};return Object.keys(e).forEach(function(n){var a=e[n];Object.keys(a.states).forEach(function(e){var r=a.states[e];r.codes&&r.codes.forEach(function(a){t[a.code]||(t[a.code]=[]),t[a.code].push(W({},a,{moduleKey:n,stateName:e,state:r}))})})}),t}(t.data),n.libraryRelatedModules=function(e){var t={};return Object.keys(e).forEach(function(n){var a=e[n];Object.keys(a.states).forEach(function(e){var r=a.states[e];"CallSubmodule"===r.type&&(t[n]=t[e]||[],t[n].push({type:"submodule",moduleKey:r.submodule,stateName:e}),t[r.submodule]=t[r.submodule]||[],t[r.submodule].push({type:"submodule",moduleKey:n,stateName:e}))})}),t}(t.data),n;default:return e}},q={},H=[],G=[],Y=Object(d.a)(),J=function(e){G.push(Object(p.a)(e)),G.push(m.a);var t=u.d.apply(void 0,[u.a.apply(void 0,G)].concat(H));return Object(u.e)(function(e){return Object(u.c)({router:Object(c.b)(e),library:v,editor:P,analysis:Q})}(e),q,t)},Z=n(3),z=n(4),X=n(6),$=n(5),ee=n(15),te=n(7),ne=n(13),ae=n(58),re=n(44),oe=n.n(re),ie=n(62),se=n.n(ie),le=n(2),ce=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.code,t=this.props.system;return r.a.createElement("div",null,"System: ",t,r.a.createElement("br",null),"Code: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:e.code,propName:"code",change:this.props.onChange("code")}),r.a.createElement("br",null),"Display: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:e.display,propName:"display",change:this.props.onChange("display")}))}}]),t}(a.Component),de=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.codes)return null;var t=this.props.system,n={"SNOMED-CT":x("Type.Code.Snomed"),LOINC:x("Type.Code.Loinc"),RxNorm:x("Type.Code.RxNorm"),NUBC:x("Type.Code.Nubc"),"DICOM-DCM":x("Type.Code.DicomDCM"),"DICOM-SOP":x("Type.Code.DicomSOP")};return r.a.createElement("div",null,this.props.codes.map(function(n,a){return r.a.createElement("div",{className:"section",key:a},r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){return e.props.onChange("[".concat(a,"]"))({val:{id:null}})}},"remove"),r.a.createElement(ce,{onChange:e.props.onChange(a),code:n,system:t}))}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("[".concat(e.props.codes.length,"]"))({val:{id:C.a.cloneDeep(n[t])}})}},"+"))}}]),t}(a.Component),ue=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.value;return r.a.createElement("div",null,this.props.label,": ",r.a.createElement(le.RIEInput,{className:"editable-text",value:e,propName:"value",change:this.props.onChange}),r.a.createElement("br",null))}}]),t}(a.Component),pe=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this;return this.props.values?r.a.createElement("div",null,this.props.values.map(function(t,n){return r.a.createElement("div",{className:"section",key:n},r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){return e.props.onChange("[".concat(n,"]"))({val:{id:null}})}},"remove"),r.a.createElement(ue,{onChange:e.props.onChange(n),value:t,label:e.props.label}))}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("[".concat(e.props.values.length,"]"))({val:{id:"text"}})}},"+")):null}}]),t}(a.Component),me=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.goal;return r.a.createElement("div",null,this.renderObservation(),this.renderText(),r.a.createElement("div",{className:"section"},"Addresses",r.a.createElement("br",null),r.a.createElement(pe,{values:e.addresses,label:"Address",onChange:this.props.onChange("addresses")}),r.a.createElement("br",null)))}},{key:"renderObservation",value:function(){var e=this,t=this.props.goal;if(t.observation){var n=r.a.createElement("div",null,"Goal Observation Value: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.observation.value,propName:"value",change:this.props.onChange("observation.value")}));return"is nil"!==t.observation.operator&&"is not nil"!==t.observation.operator||(n=r.a.createElement("div",null)),r.a.createElement("div",{className:"section"},"Observation",r.a.createElement("br",null),r.a.createElement("div",{className:"section"},"Codes",r.a.createElement("br",null),r.a.createElement(de,{codes:t.observation.codes,system:"LOINC",onChange:this.props.onChange("observation.codes")}),r.a.createElement("br",null)),"Goal Observation Operator: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.observation.operator,text:t.observation.operator},propName:"operator",change:this.props.onChange("observation.operator"),options:[{id:"==",text:"=="},{id:"!=",text:"!="},{id:"<",text:"<"},{id:"<=",text:"<="},{id:">",text:">"},{id:">=",text:">="},{id:"is nil",text:"is nil"},{id:"is not nil",text:"is not nil"}]}),n,r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("observation")({val:{id:null}})}},"Remove Observation"),r.a.createElement("br",null))}return r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("observation")({val:{id:x("Attribute.Observation")}})}},"Add Observation"),r.a.createElement("br",null))}},{key:"renderText",value:function(){var e=this,t=this.props.goal;return t.text?r.a.createElement("div",null,"Goal Text: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:t.text,propName:"text",change:this.props.onChange("text")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("text")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("text")({val:{id:"text"}})}},"Add Text"),r.a.createElement("br",null))}}]),t}(a.Component),he=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this;return this.props.goals?r.a.createElement("div",null,this.props.goals.map(function(t,n){return r.a.createElement("div",{className:"section",key:n},r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){return e.props.onChange("[".concat(n,"]"))({val:{id:null}})}},"remove"),r.a.createElement(me,{onChange:e.props.onChange(n),goal:t}))}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("[".concat(e.props.goals.length,"]"))({val:{id:x("Attribute.Goal")}})}},"+")):null}}]),t}(a.Component),be=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.title,t=this.props.sop_class;return r.a.createElement("div",null,"Title: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:e,propName:"title",change:this.props.onChange("title")}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,"SOP Class:"),r.a.createElement("br",null),r.a.createElement(ce,{code:t,system:"DICOM-SOP",onChange:this.props.onChange("sop_class")}))}}]),t}(a.Component),ge=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this;return this.props.instances?r.a.createElement("div",null,this.props.instances.map(function(t,n){return r.a.createElement("div",{className:"section",key:n},r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){return e.props.onChange("[".concat(n,"]"))({val:{id:null}})}},"remove"),r.a.createElement(be,{onChange:e.props.onChange(n),title:t.title,sop_class:t.sop_class}))}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("[".concat(e.props.instances.length,"]"))({val:{id:x("Attribute.ImagingStudy.Instance")}})}},"+")):null}}]),t}(a.Component),Ee=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.body_site,t=this.props.modality,n=this.props.instances;return r.a.createElement("div",{className:"section"},r.a.createElement("b",null,"Body Site:"),r.a.createElement("br",null),r.a.createElement(ce,{code:e,system:"SNOMED-CT",onChange:this.props.onChange("body_site")}),r.a.createElement("br",null),r.a.createElement("b",null,"Modality:"),r.a.createElement("br",null),r.a.createElement(ce,{code:t,system:"DICOM-DCM",onChange:this.props.onChange("modality")}),r.a.createElement("br",null),r.a.createElement("b",null,"Instances:"),r.a.createElement(ge,{instances:n,onChange:this.props.onChange("instances")}))}}]),t}(a.Component),ve=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this;return this.props.series?r.a.createElement("div",null,this.props.series.map(function(t,n){return r.a.createElement("div",{className:"section",key:n},r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){return e.props.onChange("[".concat(n,"]"))({val:{id:null}})}},"remove"),r.a.createElement("br",null),r.a.createElement(Ee,{onChange:e.props.onChange(n),body_site:t.body_site,modality:t.modality,instances:t.instances}))}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("[".concat(e.props.series.length,"]"))({val:{id:x("Attribute.ImagingStudy.Series")}})}},"+")):null}}]),t}(a.Component),ye=[{id:"years",text:"years"},{id:"months",text:"months"},{id:"weeks",text:"weeks"},{id:"days",text:"days"},{id:"hours",text:"hours"},{id:"minutes",text:"minutes"},{id:"seconds",text:"seconds"}],fe=[{id:"years",text:"years"},{id:"months",text:"months"},{id:"weeks",text:"weeks"},{id:"days",text:"days"},{id:"hours",text:"hours"},{id:"minutes",text:"minutes"},{id:"seconds",text:"seconds"}],Ce=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"renderConditionalType",value:function(){switch(this.props.conditional.condition_type){case"Gender":return r.a.createElement(Oe,this.props);case"Age":return r.a.createElement(Ne,this.props);case"Date":return r.a.createElement(xe,this.props);case"Socioeconomic Status":return r.a.createElement(Ae,this.props);case"Race":return r.a.createElement(ke,this.props);case"Symptom":return r.a.createElement(je,this.props);case"Observation":return r.a.createElement(Se,this.props);case"Vital Sign":return r.a.createElement(_e,this.props);case"Active Condition":return r.a.createElement(Me,this.props);case"Active Medication":return r.a.createElement(De,this.props);case"Active CarePlan":return r.a.createElement(Ie,this.props);case"PriorState":return r.a.createElement(we,this.props);case"Attribute":return r.a.createElement(Re,this.props);case"And":return r.a.createElement(Te,this.props);case"Or":return r.a.createElement(Pe,this.props);case"At Least":return r.a.createElement(Be,this.props);case"At Most":return r.a.createElement(Ke,this.props);case"Not":return r.a.createElement(Le,this.props);default:return this.props.conditional.condition_type}}},{key:"render",value:function(){var e=this;if(!this.props.conditional)return null;var t=x("Type.Condition"),n=Object.keys(t).sort().map(function(e){return{id:e,text:e}});return r.a.createElement("div",null,"Condition Type: ",r.a.createElement(le.RIESelect,{className:"editable-text",propName:"condition",value:{id:this.props.conditional.condition_type,text:this.props.conditional.condition_type},change:function(n){return e.props.onChange({condition:{id:t[n.condition.id]}})},options:n}),r.a.createElement("br",null),this.renderConditionalType())}}]),t}(a.Component),Oe=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.conditional;return r.a.createElement("label",null," Gender:",r.a.createElement(le.RIESelect,{className:"editable-text",propName:"gender",value:{id:e.gender,text:e.gender},change:this.props.onChange("gender"),options:[{id:"M",text:"M"},{id:"F",text:"F"}]}))}}]),t}(a.Component),Ne=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.conditional;return r.a.createElement("label",null," Age:",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:e.operator,text:e.operator},propName:"operator",change:this.props.onChange("operator"),options:[{id:"==",text:"=="},{id:"!=",text:"!="},{id:"<",text:"<"},{id:"<=",text:"<="},{id:">",text:">"},{id:">=",text:">="}]}),r.a.createElement(le.RIENumber,{className:"editable-text",value:e.quantity,propName:"quantity",change:this.props.onChange("quantity")}),r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:e.unit,text:e.unit},propName:"unit",change:this.props.onChange("unit"),options:fe}))}}]),t}(a.Component),xe=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.conditional;return r.a.createElement("label",null,r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:e.operator,text:e.operator},propName:"operator",change:this.props.onChange("operator"),options:[{id:"==",text:"=="},{id:"!=",text:"!="},{id:"<",text:"<"},{id:"<=",text:"<="},{id:">",text:">"},{id:">=",text:">="}]}),this.renderType(),this.renderWarning())}},{key:"renderType",value:function(){var e=this,t=this.props.conditional;if(t.month){var n=r.a.createElement(le.RIENumber,{className:"editable-text",value:t.month,propName:"month",change:this.props.onChange("month")});return r.a.createElement("div",null,"Month:",n,r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("year")({val:{id:x("Type.Date.Year")}}),e.props.onChange("month")({val:{id:null}}),e.props.onChange("date")({val:{id:null}})}},"Change to Year"),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("date.year")({val:{id:x("Type.Date.Year")}}),e.props.onChange("date.month")({val:{id:x("Type.Date.Month")}}),e.props.onChange("date.day")({val:{id:x("Type.Date.Day")}}),e.props.onChange("date.hour")({val:{id:x("Type.Date.Hour")}}),e.props.onChange("date.minute")({val:{id:x("Type.Date.Minute")}}),e.props.onChange("date.second")({val:{id:x("Type.Date.Second")}}),e.props.onChange("date.millisecond")({val:{id:x("Type.Date.Millisecond")}}),e.props.onChange("month")({val:{id:null}}),e.props.onChange("year")({val:{id:null}})}},"Change to Date"))}if(t.date){var a=r.a.createElement(le.RIENumber,{className:"editable-text",value:t.date.year,propName:"date.year",change:this.props.onChange("date.year")}),o=r.a.createElement(le.RIENumber,{className:"editable-text",value:t.date.month,propName:"date.month",change:this.props.onChange("date.month")}),i=r.a.createElement(le.RIENumber,{className:"editable-text",value:t.date.day,propName:"date.day",change:this.props.onChange("date.day")}),s=r.a.createElement(le.RIENumber,{className:"editable-text",value:t.date.hour,propName:"date.hour",change:this.props.onChange("date.hour")}),l=r.a.createElement(le.RIENumber,{className:"editable-text",value:t.date.minute,propName:"date.minute",change:this.props.onChange("date.minute")}),c=r.a.createElement(le.RIENumber,{className:"editable-text",value:t.date.second,propName:"date.second",change:this.props.onChange("date.second")}),d=r.a.createElement(le.RIENumber,{className:"editable-text",value:t.date.millisecond,propName:"date.millisecond",change:this.props.onChange("date.millisecond")});return r.a.createElement("div",null,"Date:",r.a.createElement("br",null),a,"/",o,"/",i," ",s,":",l,":",c,".",d,r.a.createElement("br",null),"(yyyy/MM/dd HH:mm:ss.SSS)",r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("year")({val:{id:x("Type.Date.Year")}}),e.props.onChange("month")({val:{id:null}}),e.props.onChange("date")({val:{id:null}})}},"Change to Year"),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("month")({val:{id:x("Type.Date.Month")}}),e.props.onChange("date")({val:{id:null}}),e.props.onChange("year")({val:{id:null}})}},"Change to Month"))}var u=r.a.createElement(le.RIENumber,{className:"editable-text",value:t.year,propName:"year",change:this.props.onChange("year")});return r.a.createElement("div",null,"Year:",u,r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("month")({val:{id:x("Type.Date.Month")}}),e.props.onChange("year")({val:{id:null}}),e.props.onChange("date")({val:{id:null}})}},"Change to Month"),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("date.year")({val:{id:x("Type.Date.Year")}}),e.props.onChange("date.month")({val:{id:x("Type.Date.Month")}}),e.props.onChange("date.day")({val:{id:x("Type.Date.Day")}}),e.props.onChange("date.hour")({val:{id:x("Type.Date.Hour")}}),e.props.onChange("date.minute")({val:{id:x("Type.Date.Minute")}}),e.props.onChange("date.second")({val:{id:x("Type.Date.Second")}}),e.props.onChange("date.millisecond")({val:{id:x("Type.Date.Millisecond")}}),e.props.onChange("year")({val:{id:null}}),e.props.onChange("month")({val:{id:null}})}},"Change to Date"))}},{key:"renderWarning",value:function(){return this.props.conditional.year<1?r.a.createElement("label",{className:"warning"},"Invalid Year."):this.props.conditional.month<1||this.props.conditional.month>12?r.a.createElement("label",{className:"warning"},"Invalid Month. Must be between 1 and 12."):this.props.conditional.date?this.props.conditional.date.year<1?r.a.createElement("label",{className:"warning"},"Invalid Year"):this.props.conditional.date.month<1||this.props.conditional.date.month>12?r.a.createElement("label",{className:"warning"},"Invalid Month. Must be between 1 and 12."):this.props.conditional.date.day<1||this.props.conditional.date.day>31?r.a.createElement("label",{className:"warning"},"Invalid Day. Must at least 1 and never greater than 31."):this.props.conditional.date.hour<0||this.props.conditional.date.hour>24?r.a.createElement("label",{className:"warning"},"Invalid Hour. Must be between 0 and 24."):this.props.conditional.date.minute<0||this.props.conditional.date.minute>60?r.a.createElement("label",{className:"warning"},"Invalid Minute. Must be between 0 and 60."):this.props.conditional.date.second<0||this.props.conditional.date.second>60?r.a.createElement("label",{className:"warning"},"Invalid Second. Must be between 0 and 60."):this.props.conditional.date.millisecond<0||this.props.conditional.date.millisecond>999?r.a.createElement("label",{className:"warning"},"Invalid Millisecond. Must be between 0 and 999."):null:null}}]),t}(a.Component),Ae=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.conditional;return r.a.createElement("label",null," Socioeconomic Status:",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:e.category,text:e.category},propName:"category",change:this.props.onChange("category"),options:[{id:"Low",text:"Low"},{id:"Middle",text:"Middle"},{id:"High",text:"High"}]}))}}]),t}(a.Component),ke=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.conditional;return r.a.createElement("label",null," Race:",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:e.race,text:e.race},propName:"race",change:this.props.onChange("race"),options:[{id:"White",text:"White"},{id:"Native",text:"Native"},{id:"Hispanic",text:"Hispanic"},{id:"Black",text:"Black"},{id:"Asian",text:"Asian"},{id:"Other",text:"Other"}]}))}}]),t}(a.Component),je=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.conditional;return r.a.createElement("label",null," Symptom:",r.a.createElement(le.RIEInput,{className:"editable-text",value:e.symptom,propName:"symptom",change:this.props.onChange("symptom")}),r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:e.operator,text:e.operator},propName:"operator",change:this.props.onChange("operator"),options:[{id:"==",text:"=="},{id:"!=",text:"!="},{id:"<",text:"<"},{id:"<=",text:"<="},{id:">",text:">"},{id:">=",text:">="}]}),r.a.createElement(le.RIENumber,{className:"editable-text",value:e.value,propName:"value",change:this.props.onChange("value")}))}}]),t}(a.Component),Se=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.conditional,t=[];return t=e.value_code?[{id:"==",text:"=="},{id:"!=",text:"!="},{id:"is nil",text:"is nil"},{id:"is not nil",text:"is not nil"}]:[{id:"==",text:"=="},{id:"!=",text:"!="},{id:"<",text:"<"},{id:"<=",text:"<="},{id:">",text:">"},{id:">=",text:">="},{id:"is nil",text:"is nil"},{id:"is not nil",text:"is not nil"}],r.a.createElement("label",null," Observation:",r.a.createElement(de,{system:x("Type.Code.Loinc.system"),codes:e.codes,onChange:this.props.onChange("codes")}),r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:e.operator,text:e.operator},propName:"operator",change:this.props.onChange("operator"),options:t}),this.renderValueOrCodeValue())}},{key:"renderValueOrCodeValue",value:function(){var e=this,t=this.props.conditional,n=r.a.createElement(ce,{className:"editable-text",system:x("Type.Code.Snomed.display"),code:t.value_code,onChange:this.props.onChange("value_code")}),a=t.value;"boolean"===typeof a&&(a=String(a));var o=r.a.createElement(le.RIEInput,{className:"editable-text",value:a,propName:"value",change:this.props.onChange("value")});return"is nil"!==t.operator&&"is not nil"!==t.operator&&"is nil"!==t.operator.id&&"is not nil"!==t.operator.id?t.value_code?r.a.createElement("div",null,"Value Code:",r.a.createElement("div",{className:"section"},n),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("value")({val:{id:"0"}}),e.props.onChange("value_code")({val:{id:null}})}},"Change to Numeric Value")):r.a.createElement("div",null,"Value:",o,r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("value_code")({val:{id:x("Type.Code.Snomed")}}),e.props.onChange("value")({val:{id:null}})}},"Change to Value Code"),r.a.createElement("br",null)):r.a.createElement("div",null,"No value needed for '",t.operator,"'")}}]),t}(a.Component),_e=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.conditional;return r.a.createElement("label",null," Vital Sign:",r.a.createElement(le.RIEInput,{className:"editable-text",value:e.vital_sign,propName:"vital_sign",change:this.props.onChange("vital_sign")}),r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:e.operator,text:e.operator},propName:"operator",change:this.props.onChange("operator"),options:[{id:"==",text:"=="},{id:"!=",text:"!="},{id:"<",text:"<"},{id:"<=",text:"<="},{id:">",text:">"},{id:">=",text:">="}]}),r.a.createElement(le.RIENumber,{className:"editable-text",value:e.value,propName:"value",change:this.props.onChange("value")}))}}]),t}(a.Component),Me=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.conditional;return r.a.createElement("label",null," Active Condition:",r.a.createElement(de,{system:x("Type.Code.Snomed.system"),codes:e.codes,onChange:this.props.onChange("codes")}))}}]),t}(a.Component),De=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.conditional;return r.a.createElement("label",null," ActiveMedication:",r.a.createElement(de,{system:x("Type.Code.RxNorm.system"),codes:e.codes,onChange:this.props.onChange("codes")}))}}]),t}(a.Component),Ie=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.conditional;return r.a.createElement("label",null," ActiveCarePlan:",r.a.createElement(de,{system:x("Type.Code.Snomed.system"),codes:e.codes,onChange:this.props.onChange("codes")}))}}]),t}(a.Component),we=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.conditional,t=this.props.options.map(function(e){return{id:e.name,text:e.name}}),n=e.name;return r.a.createElement("label",null,"Prior State Name: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:n,text:n},propName:"name",change:this.props.onChange("name"),options:t}),r.a.createElement("br",null),this.renderSince(),r.a.createElement("br",null),this.renderWithin())}},{key:"renderSince",value:function(){var e=this,t=this.props.conditional;if(null==t.since)return r.a.createElement("label",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("since")({val:{id:x("Attribute.Since")}})}},"Add Since"));var n=this.props.options.map(function(e){return{id:e.name,text:e.name}}),a=t.since;return r.a.createElement("label",null,"Prior State Since: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:a,text:a},propName:"since",change:this.props.onChange("since"),options:n}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("since")({val:{id:null}})}}," (remove)"))}},{key:"renderWithin",value:function(){var e=this,t=this.props.conditional;return null==t.within?r.a.createElement("label",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("within")({val:{id:x("Attribute.Within")}})}},"Add Within"),r.a.createElement("br",null)):r.a.createElement("label",null,"Prior State Within Quantity: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.within.quantity,propName:"quantity",change:this.props.onChange("within.quantity")}),r.a.createElement("br",null),"Prior State Within Unit: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.within.unit,text:t.within.unit},propName:"unit",change:this.props.onChange("within.unit"),options:ye}),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("within")({val:{id:null}})}},"Remove Within"))}}]),t}(a.Component),Re=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.conditional,t=e.value;"boolean"===typeof t&&(t=String(t));var n=r.a.createElement("div",null);return"is nil"!==e.operator&&"is not nil"!==e.operator&&"is nil"!==e.operator.id&&"is not nil"!==e.operator.id&&(n=r.a.createElement(le.RIEInput,{className:"editable-text",value:t||0,propName:"value",change:this.props.onChange("value")})),r.a.createElement("label",null,r.a.createElement(le.RIEInput,{className:"editable-text",value:e.attribute,propName:"attribute",change:this.props.onChange("attribute")}),r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:e.operator,text:e.operator},propName:"operator",change:this.props.onChange("operator"),options:[{id:"==",text:"=="},{id:"!=",text:"!="},{id:"<",text:"<"},{id:"<=",text:"<="},{id:">",text:">"},{id:">=",text:">="},{id:"is nil",text:"is nil"},{id:"is not nil",text:"is not nil"}]}),n)}}]),t}(a.Component),Te=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this,t=this.props.conditional;return r.a.createElement("label",null," And:",t.conditions.map(function(t,n){return r.a.createElement("div",{className:"section",key:n},r.a.createElement(Ce,Object.assign({},e.props,{conditional:t,onChange:e.props.onChange("conditions.".concat(n))})))}))}}]),t}(a.Component),Pe=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this,t=this.props.conditional;return r.a.createElement("label",null," Or:",t.conditions.map(function(t,n){return r.a.createElement("div",{className:"section",key:n},r.a.createElement(Ce,Object.assign({},e.props,{conditional:t,onChange:e.props.onChange("conditions.".concat(n))})))}))}}]),t}(a.Component),Be=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this,t=this.props.conditional;return r.a.createElement("label",null," At Least",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.minimum||0,propName:"minimum",change:this.props.onChange("minimum")}),":",t.conditions.map(function(t,n){return r.a.createElement("div",{className:"section",key:n},r.a.createElement(Ce,Object.assign({},e.props,{conditional:t,onChange:e.props.onChange("conditions.".concat(n))})))}))}}]),t}(a.Component),Ke=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this,t=this.props.conditional;return r.a.createElement("label",null," At Most",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.maximum||0,propName:"maximum",change:this.props.onChange("maximum")}),":",t.conditions.map(function(t,n){return r.a.createElement("div",{className:"section",key:n},r.a.createElement(Ce,Object.assign({},e.props,{conditional:t,onChange:e.props.onChange("conditions.".concat(n))})))}))}}]),t}(a.Component),Le=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.conditional;return r.a.createElement("label",null," Not:",r.a.createElement("div",{className:"section"},r.a.createElement(Ce,Object.assign({},this.props,{conditional:e.condition,onChange:this.props.onChange("condition")}))))}}]),t}(a.Component),We=Ce,Ve=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.options.map(function(e){return{id:e.name,text:e.name}});return r.a.createElement("label",null,"Transition To:",r.a.createElement(le.RIESelect,{className:"editable-text",propName:"to",value:{id:this.props.transition.to,text:this.props.transition.to},change:this.props.onChange,options:e}))}}]),t}(a.Component),Ue=(n(35),function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this,t=[];if(this.props.transition&&(t=this.props.transition.transition),!this.props.transition)return null;var n=this.props.options.map(function(e){return{id:e.name,text:e.name}});return r.a.createElement("label",null,"Distributed Transition:",t.map(function(t,a){return r.a.createElement("div",{key:a,className:"transition-option"},r.a.createElement("label",null,"To:",r.a.createElement(le.RIESelect,{className:"editable-text",propName:"transition",value:{id:t.to,text:t.to},change:e.props.onChange("[".concat(a,"].transition")),options:n})),r.a.createElement("br",null),e.renderDistribution(t.distribution,a),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){return e.props.onChange("[".concat(a,"]"))({val:{id:null}})}},"remove"))}),r.a.createElement("a",{className:"editable-text add-button",onClick:function(){return e.props.onChange("[".concat(t.length,"]"))({val:{id:x("Transition.Distributed[0]")}})}},"+"),r.a.createElement("br",null),this.renderWarning())}},{key:"renderDistribution",value:function(e,t){var n=this,a=this.props.transition.transition.reduce(function(e,t){return e+("object"===typeof t.distribution?t.distribution.default:t.distribution)},0),o=0;if("object"===typeof e){o=1-(a-e.default);var i=null;return 1!=a&&(i=r.a.createElement("a",{className:"editable-text",onClick:function(){return n.props.onChange("[".concat(t,"].distribution.default"))({val:o})}},"(Change to Remainder)")),r.a.createElement("label",null,"Attribute: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:e.attribute,propName:"attribute",change:this.props.onChange("[".concat(t,"].distribution.attribute"))}),r.a.createElement("br",null),"Default Weight: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:e.default,propName:"default",editProps:{step:.01,min:0,max:1},format:this.formatAsPercentage,validate:this.checkInRange,change:this.props.onChange("[".concat(t,"].distribution.default"))}),i,r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){return n.props.onChange("[".concat(t,"].distribution"))({val:{id:x("Attribute.UnnamedDistribution")}})}},"Change to Unnamed Distribution"))}o=1-(a-e);var s=null;return 1!=a&&(s=r.a.createElement("a",{className:"editable-text",onClick:function(){return n.props.onChange("[".concat(t,"].distribution"))({val:o})}},"(Change to Remainder)")),r.a.createElement("label",null," Weight:",r.a.createElement(le.RIENumber,{className:"editable-text",value:e,propName:"distribution",editProps:{step:.01,min:0,max:1},format:this.formatAsPercentage,validate:this.checkInRange,change:this.props.onChange("[".concat(t,"].distribution"))}),s,r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){return n.props.onChange("[".concat(t,"].distribution"))({val:{id:x("Attribute.NamedDistribution")}})}},"Change to Named Distribution"))}},{key:"renderWarning",value:function(){return this.props.transition?1!==this.props.transition.transition.reduce(function(e,t){return e+("object"===typeof t.distribution?t.distribution.default:t.distribution)},0)?r.a.createElement("label",{className:"warning"},"Weights do not add up to 100%."):void 0:null}},{key:"formatAsPercentage",value:function(e){return 100*e+"%"}},{key:"checkInRange",value:function(e){return e>=0&&e<=1}}]),t}(a.Component)),Fe=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"swapItems",value:function(e,t){var n=this;if(e>=0&&e<this.props.transition.transition.length){var a={transition:this.props.transition.transition[e].to,condition:C.a.clone(this.props.transition.transition[e].condition)},r={transition:this.props.transition.transition[t].to,condition:C.a.clone(this.props.transition.transition[t].condition)};return function(){n.props.onChange(e)({val:{id:r}}),n.props.onChange(t)({val:{id:a}})}}return function(){}}},{key:"renderUpDown",value:function(e){if(this.props.transition&&this.props.transition.transition){if(e<this.props.transition.transition.length-1&&e>0)return r.a.createElement("span",null,r.a.createElement("a",{className:"editable-text delete-button",onClick:this.swapItems(e-1,e)},"move up")," |",r.a.createElement("a",{className:"editable-text delete-button",onClick:this.swapItems(e,e+1)},"move down"));if(e<this.props.transition.transition.length-1)return r.a.createElement("a",{className:"editable-text delete-button",onClick:this.swapItems(e,e+1)},"move down");if(e>0)return r.a.createElement("a",{className:"editable-text delete-button",onClick:this.swapItems(e-1,e)},"move up")}}},{key:"renderIf",value:function(e,t){var n=this;return!this.props.transition.transition[e].condition&&t&&0!==e?r.a.createElement("span",null,"Else: ",r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){n.props.onChange("[".concat(e,"].condition"))({val:{id:x("Type.Condition.Age")}})}},"(add condition)")):this.props.transition.transition[e].condition?0!==e||this.props.transition.transition[e].condition?0===e?r.a.createElement("span",null,"If:"):t?r.a.createElement("span",null,"Else If: ",r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){n.props.onChange("[".concat(e,"].condition"))({val:{id:null}})}},"(remove condition)")):r.a.createElement("span",null,"Else If:"):r.a.createElement("span",null,"If: ",r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){n.props.onChange("[".concat(e,"].condition"))({val:{id:x("Type.Condition.Age")}})}},"(add condition)")):r.a.createElement("span",null,r.a.createElement("a",{className:"editable-text delete-button editable-error",onClick:function(){n.props.onChange("[".concat(e,"].condition"))({val:{id:x("Type.Condition.Age")}})}},"Add Condition"))}},{key:"render",value:function(){var e=this,t=[];return this.props.transition&&(t=this.props.transition.transition),this.props.transition?r.a.createElement("label",null,"Conditional Transition To:",t.map(function(n,a){var o=e.props.options.map(function(e){return{id:e.name,text:e.name}});return r.a.createElement("div",{key:a,className:"transition-option"},r.a.createElement("label",null,e.renderIf(a,a===t.length-1),r.a.createElement(We,Object.assign({},e.props,{conditional:n.condition,onChange:e.props.onChange("".concat(a,".condition"))}))),r.a.createElement("br",null),r.a.createElement("label",null,"Transition To: ",r.a.createElement(le.RIESelect,{className:"editable-text",propName:"to",value:{id:n.to,text:n.to},change:e.props.onChange("".concat(a,".transition")),options:o})),r.a.createElement("br",null),e.renderUpDown(a),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){return e.props.onChange("[".concat(a,"]"))({val:{id:null}})}},"remove"))}),r.a.createElement("a",{className:"editable-text add-button",onClick:function(){return e.props.onChange("[".concat(t.length,"]"))({val:{id:x("Transition.Conditional[0]")}})}},"+")):null}}]),t}(a.Component);function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(n,!0).forEach(function(t){Object(h.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var He=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"swapItems",value:function(e,t){var n=this;if(e>=0&&e<this.props.transition.transition.length){var a={},r={};return this.props.transition.transition[e].condition&&(a.condition=C.a.clone(this.props.transition.transition[e].condition)),this.props.transition.transition[e].distributions&&(a.distributions=C.a.clone(this.props.transition.transition[e].distributions.map(function(e){return{distribution:e.distribution,transition:e.to}}))),this.props.transition.transition[e].transition.to&&(a.transition=this.props.transition.transition[e].transition.to),this.props.transition.transition[t].condition&&(r.condition=C.a.clone(this.props.transition.transition[t].condition)),this.props.transition.transition[t].distributions&&(r.distributions=C.a.clone(this.props.transition.transition[t].distributions.map(function(e){return{distribution:e.distribution,transition:e.to}}))),this.props.transition.transition[t].transition.to&&(r.transition=this.props.transition.transition[t].transition.to),function(){n.props.onChange(e)({val:{id:r}}),n.props.onChange(t)({val:{id:a}})}}return function(){}}},{key:"renderUpDown",value:function(e){if(this.props.transition&&this.props.transition.transition){if(e<this.props.transition.transition.length-1&&e>0)return r.a.createElement("span",null,r.a.createElement("a",{className:"editable-text delete-button",onClick:this.swapItems(e-1,e)},"move up")," |",r.a.createElement("a",{className:"editable-text delete-button",onClick:this.swapItems(e,e+1)},"move down"));if(e<this.props.transition.transition.length-1)return r.a.createElement("a",{className:"editable-text delete-button",onClick:this.swapItems(e,e+1)},"move down");if(e>0)return r.a.createElement("a",{className:"editable-text delete-button",onClick:this.swapItems(e-1,e)},"move up")}}},{key:"renderIf",value:function(e,t){var n=this;return!this.props.transition.transition[e].condition&&t&&0!==e?r.a.createElement("span",null,"Else: ",r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){n.props.onChange("[".concat(e,"].condition"))({val:{id:x("Type.Condition.Age")}})}},"(add condition)")):this.props.transition.transition[e].condition?0!==e||this.props.transition.transition[e].condition?0===e?r.a.createElement("span",null,"If:"):t?r.a.createElement("span",null,"Else If: ",r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){n.props.onChange("[".concat(e,"].condition"))({val:{id:null}})}},"(remove condition)")):r.a.createElement("span",null,"Else If:"):r.a.createElement("span",null,"If: ",r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){n.props.onChange("[".concat(e,"].condition"))({val:{id:x("Type.Condition.Age")}})}},"(add condition)")):r.a.createElement("span",null,r.a.createElement("a",{className:"editable-text delete-button editable-error",onClick:function(){n.props.onChange("[".concat(e,"].condition"))({val:{id:x("Type.Condition.Age")}})}},"Add Condition"))}},{key:"renderTransition",value:function(e,t,n){var a=this,o=null;if(void 0!==e.transition.to){var i=qe({},e,{distributions:[{distribution:1,transition:e.transition.to}]});delete i.transition,o=r.a.createElement("div",null,r.a.createElement(Ve,{transition:e.transition,options:this.props.options,onChange:this.props.onChange("[".concat(t,"].transition"))}),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){a.props.onChange("[".concat(t,"]"))({val:{id:i}})}},"Change to Distributed Transition"))}else{var s="Initial";e.distributions.length>0&&(s=e.distributions[0].to);var l=qe({},e,{distributions:[],transition:s});o=r.a.createElement("div",null,r.a.createElement(Ue,{transition:{transition:e.distributions},options:this.props.options,onChange:this.props.onChange("[".concat(t,"].distributions"))}),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){a.props.onChange("[".concat(t,"]"))({val:{id:l}})}},"Change to Direct Transition"))}return r.a.createElement("div",{className:"transition-option",key:t},r.a.createElement("label",null,this.renderIf(t,n)," ",r.a.createElement(We,Object.assign({},this.props,{conditional:e.condition,onChange:this.props.onChange("".concat(t,".condition"))}))),r.a.createElement("br",null),r.a.createElement("label",null,o),r.a.createElement("br",null),this.renderUpDown(t),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){return a.props.onChange("[".concat(t,"]"))({val:{id:null}})}},"remove"))}},{key:"render",value:function(){var e=this,t=[];if(this.props.transition&&(t=this.props.transition.transition),!this.props.transition)return null;this.props.options,this.props.options.map(function(e){return{id:e.name,text:e.name}});return r.a.createElement("label",null,"Complex Transition:",t.map(function(n,a){return e.renderTransition(n,a,a===t.length-1)}),r.a.createElement("a",{className:"editable-text add-button",onClick:function(){return e.props.onChange("[".concat(t.length,"]"))({val:{id:x("Transition.Complex[0]")}})}},"+"))}}]),t}(a.Component),Ge=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){if(this.props.transition)switch(this.props.transition.type){case"Direct":return r.a.createElement(Ve,Object.assign({},this.props,{onChange:this.props.onChange("direct_transition")}));case"Distributed":return r.a.createElement(Ue,Object.assign({},this.props,{onChange:this.props.onChange("distributed_transition")}));case"Conditional":return r.a.createElement(Fe,Object.assign({},this.props,{onChange:this.props.onChange("conditional_transition")}));case"Complex":return r.a.createElement(He,Object.assign({},this.props,{onChange:this.props.onChange("complex_transition")}));case"None":return r.a.createElement("div",null," No transition ");default:return r.a.createElement("div",null," ",this.props.transition.type," Transition is not supported at this time ")}return r.a.createElement("div",null," No Transition ")}}]),t}(a.Component),Ye=[{title:"Create Module",selector:".Editor-top-open :nth-child(1)",text:"Create a new module"},{title:"Open Module",selector:".Editor-top-open :nth-child(2)",text:"Open a module by selecting Open Module"},{title:"Download Module",selector:".Editor-top-open :nth-child(3)",text:"Download module by selecting Download"},{title:"Edit Node",selector:"#node_Initial",text:"To edit a node you can click on it in the graph"},{title:"Module Remarks",selector:".ModuleProperties-remarks",text:"This is a place to put any remarks or citations for this module."},{title:"Adding a State",selector:".navbar-nav :nth-child(4)",text:"This will add a new state to the module, it can then be edited like any other state."},{title:"Adding a Structure",selector:".navbar-nav :nth-child(5)",text:"We have a few commonly used structures, this will allow you to add them to your module. This feature is not yet available."}],Je=[{title:"Change State Name",selector:".State h3",text:"This text is editable, you can change the name of this state here."},{title:"Change State Type",selector:".State :nth-child(2)",text:"You can change the type of this state here, you can find a listing of state types at <a href='https://github.com/synthetichealth/synthea/wiki/Generic-Module-Framework%3A-States' target='_blank'> the wiki </a>."},{title:"State Editor",selector:".State-Editor",text:"Here is a context aware editor, depending on what your state has it will list the various attributes."},{title:"Delete State",selector:"div.State > a.delete-button",text:"This will remove the currently selected state from the editor."},{title:"Transition Type",selector:".Transition-Type",text:"You can change the type of the transition the module has here, <a href='https://github.com/synthetichealth/synthea/wiki/Generic-Module-Framework%3A-Transitions' target='_blank'> here </a> is a list of transition types."}];n(113);function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var ze=[{id:"years",text:"years"},{id:"months",text:"months"},{id:"weeks",text:"weeks"},{id:"days",text:"days"},{id:"hours",text:"hours"},{id:"minutes",text:"minutes"},{id:"seconds",text:"seconds"}],Xe=function(e){function t(){var e,n;Object(Z.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(X.a)(this,(e=Object($.a)(t)).call.apply(e,[this].concat(r)))).updateRemarks=function(e){var t=e.remarks?e.remarks.split("\n"):null;n.props.onChange("states.".concat(n.props.state.name,".remarks"))({remarks:{id:t}})},n}return Object(te.a)(t,e),Object(z.a)(t,[{key:"renderStateType",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(n,!0).forEach(function(t){Object(h.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props);switch(e.state.name=e.state.name||"Unnamed_State",e.onChange=this.props.onChange("states.".concat(e.state.name)),this.props.state.type){case"Initial":return r.a.createElement($e,e);case"Terminal":return r.a.createElement(et,e);case"Simple":return r.a.createElement(tt,e);case"Guard":return r.a.createElement(nt,e);case"Delay":return r.a.createElement(at,e);case"SetAttribute":return r.a.createElement(rt,e);case"Counter":return r.a.createElement(ot,e);case"CallSubmodule":return r.a.createElement(it,e);case"Encounter":return r.a.createElement(st,e);case"EncounterEnd":return r.a.createElement(lt,e);case"ConditionOnset":return r.a.createElement(ct,e);case"ConditionEnd":return r.a.createElement(dt,e);case"AllergyOnset":return r.a.createElement(ut,e);case"AllergyEnd":return r.a.createElement(pt,e);case"MedicationOrder":return r.a.createElement(mt,e);case"MedicationEnd":return r.a.createElement(ht,e);case"CarePlanStart":return r.a.createElement(bt,e);case"CarePlanEnd":return r.a.createElement(gt,e);case"Procedure":return r.a.createElement(Et,e);case"VitalSign":return r.a.createElement(vt,e);case"Observation":return r.a.createElement(yt,e);case"MultiObservation":return r.a.createElement(ft,e);case"DiagnosticReport":return r.a.createElement(Ct,e);case"ImagingStudy":return r.a.createElement(Ot,e);case"Symptom":return r.a.createElement(Nt,e);case"Death":return r.a.createElement(xt,e);default:return this.props.state.type}}},{key:"render",value:function(){var e,t,n,a=this;if(!this.props.state)return null;var o=Object.keys(x("State")).sort().map(function(e){return{id:e,text:e}}),i=this.props.state.remarks||"";i=Array.isArray(i)?i.join("\n"):i;var s=(this.props.state.transition||{}).type;return r.a.createElement("div",{className:"State"},r.a.createElement("div",{className:"Editor-panel-title"},"State Editor"),r.a.createElement("h3",null,r.a.createElement(le.RIEInput,(e={className:"editable-text"},Object(h.a)(e,"className","editable-text"),Object(h.a)(e,"propName","name"),Object(h.a)(e,"value",this.props.state.name),Object(h.a)(e,"change",this.props.renameNode),e))),"State Type: ",r.a.createElement(le.RIESelect,(t={className:"editable-text"},Object(h.a)(t,"className","editable-text"),Object(h.a)(t,"value",{id:this.props.state.type,text:this.props.state.type}),Object(h.a)(t,"propName","type"),Object(h.a)(t,"change",this.props.changeType),Object(h.a)(t,"options",o),t)),r.a.createElement("hr",null),r.a.createElement(le.RIETextArea,{className:"editable-text",value:i,propName:"remarks",change:this.updateRemarks}),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("div",{className:"State-Editor"},this.renderStateType()),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("div",{className:"Transition-Type"},"Transition Type:",r.a.createElement(le.RIESelect,(n={className:"editable-text"},Object(h.a)(n,"className","editable-text"),Object(h.a)(n,"value",{id:s,text:s}),Object(h.a)(n,"propName","transition"),Object(h.a)(n,"change",function(e){return a.props.addTransition(e.transition.id)}),Object(h.a)(n,"options",[{id:"None",text:"None"},{id:"Direct",text:"Direct"},{id:"Distributed",text:"Distributed"},{id:"Conditional",text:"Conditional"},{id:"Complex",text:"Complex"}]),n)))),r.a.createElement("div",{className:"Transition"},r.a.createElement(Ge,{options:this.props.otherStates.sort(function(e,t){return e.name>t.name?1:-1}),transition:this.props.state.transition,onChange:this.props.onChange("states.".concat(this.props.state.name))})),r.a.createElement("br",null),r.a.createElement("a",{onClick:this.props.helpFunction(Je)},"Help"))}}]),t}(a.Component),$e=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){this.props.state;return null}}]),t}(a.Component),et=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){this.props.state;return null}}]),t}(a.Component),tt=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){this.props.state;return null}}]),t}(a.Component),nt=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.state;return r.a.createElement("div",null,r.a.createElement(We,Object.assign({},this.props,{conditional:e.allow,options:this.props.otherStates,onChange:this.props.onChange("allow")})))}}]),t}(a.Component),at=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){this.props.state;return r.a.createElement("div",null,this.renderExactOrRange())}},{key:"renderExactOrRange",value:function(){var e=this,t=this.props.state;return t.exact?r.a.createElement("div",null,"Exact Quantity: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.exact.quantity,propName:"quantity",change:this.props.onChange("exact.quantity")}),r.a.createElement("br",null),"Exact Unit: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.exact.unit,text:t.exact.unit},propName:"unit",change:this.props.onChange("exact.unit"),options:ze}),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("range")({val:{id:x("Attribute.RangeWithUnit")}}),e.props.onChange("exact")({val:{id:null}})}},"Change to Range"),r.a.createElement("br",null)):r.a.createElement("div",null,"Range Low: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.range.low,propName:"low",change:this.props.onChange("range.low")}),r.a.createElement("br",null),"Range High: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.range.high,propName:"high",change:this.props.onChange("range.high")}),r.a.createElement("br",null),"Range Unit: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.range.unit,text:t.range.unit},propName:"unit",change:this.props.onChange("range.unit"),options:ze}),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("exact")({val:{id:x("Attribute.ExactWithUnit")}}),e.props.onChange("range")({val:{id:null}})}},"Change to Exact"),r.a.createElement("br",null))}}]),t}(a.Component),rt=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.state;return r.a.createElement("div",null,"Attribute: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:e.attribute,propName:"attribute",change:this.props.onChange("attribute")}),r.a.createElement("br",null),this.renderValue())}},{key:"renderValue",value:function(){var e=this,t=this.props.state;if(null==t.value)return r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("value")({val:{id:"text"}})}},"Add Value"),r.a.createElement("br",null));var n=t.value;return"boolean"===typeof n&&(n=String(n)),r.a.createElement("div",null,"Value: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:n,propName:"value",change:this.props.onChange("value")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("value")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null))}}]),t}(a.Component),ot=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.state;return r.a.createElement("div",null,"Attribute: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:e.attribute,propName:"attribute",change:this.props.onChange("attribute")}),r.a.createElement("br",null),"Action: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:e.action,text:e.action},propName:"action",change:this.props.onChange("action"),options:[{id:"increment",text:"increment"},{id:"decrement",text:"decrement"}]}))}}]),t}(a.Component),it=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.state;return r.a.createElement("div",null,"Submodule: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:e.submodule,propName:"submodule",change:this.props.onChange("submodule")}),r.a.createElement("br",null),r.a.createElement("a",{href:"".concat(window.location.href.replace(window.location.hash,""),"#").concat(e.submodule),target:"_blank"},"View Submodule"))}}]),t}(a.Component),st=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.state;return null==e.wellness?r.a.createElement("div",null,this.renderWellness(),"Encounter Class: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:e.encounter_class,text:e.encounter_class},propName:"encounter_class",change:this.props.onChange("encounter_class"),options:[{id:"emergency",text:"emergency"},{id:"inpatient",text:"inpatient"},{id:"ambulatory",text:"ambulatory"}]}),r.a.createElement("br",null),this.renderReason(),r.a.createElement("div",{className:"section"},"Codes",r.a.createElement("br",null),r.a.createElement(de,{codes:e.codes,system:"SNOMED-CT",onChange:this.props.onChange("codes")}))):r.a.createElement("div",null,this.renderWellness(),this.renderReason())}},{key:"renderWellness",value:function(){var e=this;return null==this.props.state.wellness?r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("wellness")({val:{id:!0}}),e.props.onChange("codes")({val:{id:null}}),e.props.onChange("encounter_class")({val:{id:null}})}},"Add Wellness"),r.a.createElement("br",null)):r.a.createElement("div",null,"Wellness",r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("wellness")({val:{id:null}}),e.props.onChange("codes")({val:{id:[x("Type.Code.Snomed")]}})}},"(remove)"),r.a.createElement("br",null))}},{key:"renderReason",value:function(){var e=this,t=this.props.state;if(t.reason){var n=this.props.otherStates.filter(function(e){return"ConditionOnset"===e.type}).map(function(e){return{id:e.name,text:e.name}}).concat([{id:"*Input Attribute*",text:"*Input Attribute*"}]),a=r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.reason,text:t.reason},propName:"reason",change:this.props.onChange("reason"),options:n});if("*Input Attribute*"===t.reason){var o=r.a.createElement(le.RIEInput,{className:"editable-text",value:t.reason,propName:"reason",change:this.props.onChange("reason")});return r.a.createElement("div",null,"Reason: ",a,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("reason")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null),"Attribute: ",o,r.a.createElement("br",null))}return r.a.createElement("div",null,"Reason: ",a,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("reason")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null))}return r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("reason")({val:{id:"Select Condition/Enter Attribute"}})}},"Add Reason"),r.a.createElement("br",null))}}]),t}(a.Component),lt=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){this.props.state;return r.a.createElement("div",null,this.renderDischargeDisposition())}},{key:"renderDischargeDisposition",value:function(){var e=this,t=this.props.state;return t.discharge_disposition?r.a.createElement("div",null,r.a.createElement(ce,{code:t.discharge_disposition,system:"NUBC",onChange:this.props.onChange("discharge_disposition")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("discharge_disposition")({val:{id:null}})}},"Remove Discharge Disposition"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("discharge_disposition")({val:{id:x("Type.Code.Nubc")}})}},"Add Discharge Disposition"),r.a.createElement("br",null))}}]),t}(a.Component),ct=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.state;return r.a.createElement("div",null,this.renderTargetEncounter(),this.renderAssignToAttribute(),r.a.createElement("div",{className:"section"},"Codes",r.a.createElement("br",null),r.a.createElement(de,{codes:e.codes,system:"SNOMED-CT",onChange:this.props.onChange("codes")})))}},{key:"renderTargetEncounter",value:function(){var e=this,t=this.props.state,n=this.props.otherStates.filter(function(e){return"Encounter"===e.type}).map(function(e){return{id:e.name,text:e.name}}),a=r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.target_encounter,text:t.target_encounter},propName:"target_encounter",change:this.props.onChange("target_encounter"),options:n});return t.target_encounter?r.a.createElement("div",null,"Target Encounter: ",a,r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("target_encounter")({val:{id:null}})}},"(remove to diagnose immediately)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("target_encounter")({val:{id:"text"}})}},"Add Target Encounter"),r.a.createElement("br",null))}},{key:"renderAssignToAttribute",value:function(){var e=this,t=this.props.state;return t.assign_to_attribute?r.a.createElement("div",null,"Assign to Attribute: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:t.assign_to_attribute,propName:"assign_to_attribute",change:this.props.onChange("assign_to_attribute")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("assign_to_attribute")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("assign_to_attribute")({val:{id:"text"}})}},"Add Assign to Attribute"),r.a.createElement("br",null))}}]),t}(a.Component),dt=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){this.props.state;return r.a.createElement("div",null,this.renderConditionOnset(),this.renderReferencedByAttribute(),this.renderCodes())}},{key:"renderConditionOnset",value:function(){var e=this,t=this.props.state,n=this.props.otherStates.filter(function(e){return"ConditionOnset"===e.type}).map(function(e){return{id:e.name,text:e.name}});return t.condition_onset?r.a.createElement("div",null,"Condition Onset: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.condition_onset,text:t.condition_onset},propName:"condition_onset",change:this.props.onChange("condition_onset"),options:n}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("condition_onset")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("condition_onset")({val:{id:"text"}})}},"Add Condition Onset"),r.a.createElement("br",null))}},{key:"renderReferencedByAttribute",value:function(){var e=this,t=this.props.state;return t.referenced_by_attribute?r.a.createElement("div",null,"Referenced by Attribute: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:t.referenced_by_attribute,propName:"referenced_by_attribute",change:this.props.onChange("referenced_by_attribute")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("referenced_by_attribute")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("referenced_by_attribute")({val:{id:"text"}})}},"Add Referenced by Attribute"),r.a.createElement("br",null))}},{key:"renderCodes",value:function(){var e=this,t=this.props.state;return t.codes?r.a.createElement("div",{className:"section"},"Codes",r.a.createElement("br",null),r.a.createElement(de,{codes:t.codes,system:"SNOMED-CT",onChange:this.props.onChange("codes")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("codes")({val:{id:null}})}},"Remove Codes"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("codes")({val:{id:[x("Type.Code.Snomed")]}})}},"Add Codes"),r.a.createElement("br",null))}}]),t}(a.Component),ut=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.state,t=this.props.otherStates.filter(function(e){return"Encounter"===e.type}).map(function(e){return{id:e.name,text:e.name}});return r.a.createElement("div",null,"Target Encounter: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:e.target_encounter,text:e.target_encounter},propName:"target_encounter",change:this.props.onChange("target_encounter"),options:t}),r.a.createElement("br",null),this.renderAssignToAttribute(),r.a.createElement("div",{className:"section"},"Codes",r.a.createElement("br",null),r.a.createElement(de,{codes:e.codes,system:"SNOMED-CT",onChange:this.props.onChange("codes")})))}},{key:"renderAssignToAttribute",value:function(){var e=this,t=this.props.state;return t.assign_to_attribute?r.a.createElement("div",null,"Assign to Attribute: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:t.assign_to_attribute,propName:"assign_to_attribute",change:this.props.onChange("assign_to_attribute")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("assign_to_attribute")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("assign_to_attribute")({val:{id:"text"}})}},"Add Assign to Attribute"),r.a.createElement("br",null))}}]),t}(a.Component),pt=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){this.props.state;return r.a.createElement("div",null,this.renderAllergyOnset(),this.renderReferencedByAttribute(),this.renderCodes())}},{key:"renderAllergyOnset",value:function(){var e=this,t=this.props.state,n=this.props.otherStates.filter(function(e){return"AllergyOnset"===e.type}).map(function(e){return{id:e.name,text:e.name}});return t.allergy_onset?r.a.createElement("div",null,"Allergy Onset: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.allergy_onset,text:t.allergy_onset},propName:"allergy_onset",change:this.props.onChange("allergy_onset"),options:n}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("allergy_onset")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("allergy_onset")({val:{id:"text"}})}},"Add Allergy Onset"),r.a.createElement("br",null))}},{key:"renderReferencedByAttribute",value:function(){var e=this,t=this.props.state;return t.referenced_by_attribute?r.a.createElement("div",null,"Referenced by Attribute: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:t.referenced_by_attribute,propName:"referenced_by_attribute",change:this.props.onChange("referenced_by_attribute")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("referenced_by_attribute")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("referenced_by_attribute")({val:{id:"text"}})}},"Add Referenced by Attribute"),r.a.createElement("br",null))}},{key:"renderCodes",value:function(){var e=this,t=this.props.state;return t.codes?r.a.createElement("div",{className:"section"},"Codes",r.a.createElement("br",null),r.a.createElement(de,{codes:t.codes,system:"SNOMED-CT",onChange:this.props.onChange("codes")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("codes")({val:{id:null}})}},"Remove Codes"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("codes")({val:{id:[x("Type.Code.Snomed")]}})}},"Add Codes"),r.a.createElement("br",null))}}]),t}(a.Component),mt=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.state;return r.a.createElement("div",null,this.renderAssignToAttribute(),this.renderReason(),r.a.createElement("div",{className:"section"},"Codes",r.a.createElement("br",null),r.a.createElement(de,{codes:e.codes,system:"RxNorm",onChange:this.props.onChange("codes")}),r.a.createElement("br",null)),this.renderPrescription(),this.renderChronicMed(),this.renderCreateAdministration())}},{key:"renderChronicMed",value:function(){var e=this,t=this.props.state;return r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",checked:t.chronic,onChange:function(){return e.props.onChange("chronic")({val:{id:!t.chronic}})}})," Chronic Medication.")}},{key:"renderCreateAdministration",value:function(){var e=this,t=this.props.state;return r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",checked:t.administration,onChange:function(){return e.props.onChange("administration")({val:{id:!t.administration}})}})," Administration of the medication.")}},{key:"renderAssignToAttribute",value:function(){var e=this,t=this.props.state;return t.assign_to_attribute?r.a.createElement("div",null,"Assign to Attribute: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:t.assign_to_attribute,propName:"assign_to_attribute",change:this.props.onChange("assign_to_attribute")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("assign_to_attribute")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("assign_to_attribute")({val:{id:"text"}})}},"Add Assign to Attribute"),r.a.createElement("br",null))}},{key:"renderReason",value:function(){var e=this,t=this.props.state;if(t.reason){var n=this.props.otherStates.filter(function(e){return"ConditionOnset"===e.type}).map(function(e){return{id:e.name,text:e.name}}).concat([{id:"*Input Attribute*",text:"*Input Attribute*"}]),a=r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.reason,text:t.reason},propName:"reason",change:this.props.onChange("reason"),options:n});if("*Input Attribute*"===t.reason){var o=r.a.createElement(le.RIEInput,{className:"editable-text",value:t.reason,propName:"reason",change:this.props.onChange("reason")});return r.a.createElement("div",null,"Reason: ",a,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("reason")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null),"Attribute: ",o,r.a.createElement("br",null))}return r.a.createElement("div",null,"Reason: ",a,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("reason")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null))}return r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("reason")({val:{id:"Select Condition/Enter Attribute"}})}},"Add Reason"),r.a.createElement("br",null))}},{key:"renderPrescription",value:function(){var e=this;return this.props.state.prescription?r.a.createElement("div",{className:"section"},"Prescription",this.renderRefills(),this.renderAsNeeded(),this.renderDosage(),this.renderDuration(),this.renderInstructions(),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("prescription")({val:{id:null}})}}," Remove Prescription")):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("prescription")({val:{id:x("Attribute.Prescription")}})}},"Add Prescription"),r.a.createElement("br",null))}},{key:"renderRefills",value:function(){var e=this,t=this.props.state;return t.prescription.refills?r.a.createElement("div",null,"Prescription Refills: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.prescription.refills,propName:"refills",change:this.props.onChange("prescription.refills")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("prescription.refills")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("prescription.refills")({val:{id:1}})}},"Add Prescription Refills"),r.a.createElement("br",null))}},{key:"renderAsNeeded",value:function(){var e=this;return null==this.props.state.prescription.as_needed?r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("prescription.as_needed")({val:{id:!0}})}},"Add Prescription As Needed"),r.a.createElement("br",null)):r.a.createElement("div",null,"Prescription As Needed",r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("prescription.as_needed")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null))}},{key:"renderDosage",value:function(){var e=this.props.state;return e.prescription.dosage?r.a.createElement("div",{className:"section"},"Dosage Amount: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:e.prescription.dosage.amount,propName:"amount",change:this.props.onChange("prescription.dosage.amount")}),r.a.createElement("br",null),"Dosage Frequency: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:e.prescription.dosage.frequency,propName:"frequency",change:this.props.onChange("prescription.dosage.frequency")}),r.a.createElement("br",null),"Dosage Period: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:e.prescription.dosage.period,propName:"period",change:this.props.onChange("prescription.dosage.period")}),r.a.createElement("br",null),"Dosage Unit: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:e.prescription.dosage.unit,text:e.prescription.dosage.unit},propName:"unit",change:this.props.onChange("prescription.dosage.unit"),options:ze}),r.a.createElement("br",null)):null}},{key:"renderDuration",value:function(){var e=this.props.state;return e.prescription.duration?r.a.createElement("div",{className:"section"},"Duration Quantity: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:e.prescription.duration.quantity,propName:"quantity",change:this.props.onChange("prescription.duration.quantity")}),r.a.createElement("br",null),"Duration Unit: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:e.prescription.duration.unit,text:e.prescription.duration.unit},propName:"unit",change:this.props.onChange("prescription.duration.unit"),options:ze}),r.a.createElement("br",null)):null}},{key:"renderInstructions",value:function(){var e=this,t=this.props.state;return t.prescription.instructions?r.a.createElement("div",{className:"section"},"Instructions",r.a.createElement("br",null),r.a.createElement(de,{codes:t.prescription.instructions,system:"SNOMED-CT",onChange:this.props.onChange("prescription.instructions")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("prescription.instructions")({val:{id:null}})}},"Remove Instructions"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("prescription.instructions")({val:{id:[x("Type.Code.Snomed")]}})}},"Add Instructions"),r.a.createElement("br",null))}}]),t}(a.Component),ht=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){this.props.state;return r.a.createElement("div",null,this.renderMedicationOrder(),this.renderReferencedByAttribute(),this.renderCodes())}},{key:"renderMedicationOrder",value:function(){var e=this,t=this.props.state,n=this.props.otherStates.filter(function(e){return"MedicationOrder"===e.type}).map(function(e){return{id:e.name,text:e.name}});return t.medication_order?r.a.createElement("div",null,"Medication Order: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.medication_order,text:t.medication_order},propName:"medication_order",change:this.props.onChange("medication_order"),options:n}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("medication_order")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("medication_order")({val:{id:"text"}})}},"Add Medication Order"),r.a.createElement("br",null))}},{key:"renderReferencedByAttribute",value:function(){var e=this,t=this.props.state;return t.referenced_by_attribute?r.a.createElement("div",null,"Referenced by Attribute: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:t.referenced_by_attribute,propName:"referenced_by_attribute",change:this.props.onChange("referenced_by_attribute")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("referenced_by_attribute")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("referenced_by_attribute")({val:{id:"text"}})}},"Add Referenced by Attribute"),r.a.createElement("br",null))}},{key:"renderCodes",value:function(){var e=this,t=this.props.state;return t.codes?r.a.createElement("div",{className:"section"},"Codes",r.a.createElement("br",null),r.a.createElement(de,{codes:t.codes,system:"SNOMED-CT",onChange:this.props.onChange("codes")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("codes")({val:{id:null}})}},"Remove Codes"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("codes")({val:{id:[x("Type.Code.RxNorm")]}})}},"Add Codes"),r.a.createElement("br",null))}}]),t}(a.Component),bt=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.state;return r.a.createElement("div",null,this.renderAssignToAttribute(),this.renderReason(),r.a.createElement("div",{className:"section"},"Codes",r.a.createElement("br",null),r.a.createElement(de,{codes:e.codes,system:"SNOMED-CT",onChange:this.props.onChange("codes")}),r.a.createElement("br",null)),this.renderActivities(),this.renderGoals())}},{key:"renderAssignToAttribute",value:function(){var e=this,t=this.props.state;return t.assign_to_attribute?r.a.createElement("div",null,"Assign to Attribute: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:t.assign_to_attribute,propName:"assign_to_attribute",change:this.props.onChange("assign_to_attribute")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("assign_to_attribute")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("assign_to_attribute")({val:{id:"text"}})}},"Add Assign to Attribute"),r.a.createElement("br",null))}},{key:"renderReason",value:function(){var e=this,t=this.props.state;if(t.reason){var n=this.props.otherStates.filter(function(e){return"ConditionOnset"===e.type}).map(function(e){return{id:e.name,text:e.name}}).concat([{id:"*Input Attribute*",text:"*Input Attribute*"}]),a=r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.reason,text:t.reason},propName:"reason",change:this.props.onChange("reason"),options:n});if("*Input Attribute*"===t.reason){var o=r.a.createElement(le.RIEInput,{className:"editable-text",value:t.reason,propName:"reason",change:this.props.onChange("reason")});return r.a.createElement("div",null,"Reason: ",a,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("reason")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null),"Attribute: ",o,r.a.createElement("br",null))}return r.a.createElement("div",null,"Reason: ",a,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("reason")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null))}return r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("reason")({val:{id:"Select Condition/Enter Attribute"}})}},"Add Reason"),r.a.createElement("br",null))}},{key:"renderActivities",value:function(){var e=this,t=this.props.state;return t.activities?r.a.createElement("div",{className:"section"},"Activities",r.a.createElement("br",null),r.a.createElement(de,{codes:t.activities,system:"SNOMED-CT",onChange:this.props.onChange("activities")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("activities")({val:{id:null}})}},"Remove Activities"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("activities")({val:{id:[x("Type.Code.Snomed")]}})}},"Add Activities"),r.a.createElement("br",null))}},{key:"renderGoals",value:function(){var e=this,t=this.props.state;return t.goals?r.a.createElement("div",{className:"section"},"Goals",r.a.createElement("br",null),r.a.createElement(he,{goals:t.goals,onChange:this.props.onChange("goals")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("goals")({val:{id:null}})}},"Remove Goals"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("goals")({val:{id:[x("Attribute.Goal")]}})}},"Add Goals"),r.a.createElement("br",null))}}]),t}(a.Component),gt=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){this.props.state;return r.a.createElement("div",null,this.renderCarePlan(),this.renderReferencedByAttribute(),this.renderCodes())}},{key:"renderCarePlan",value:function(){var e=this,t=this.props.state,n=this.props.otherStates.filter(function(e){return"CarePlanStart"===e.type}).map(function(e){return{id:e.name,text:e.name}});return t.careplan?r.a.createElement("div",null,"Care Plan: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.careplan,text:t.careplan},propName:"careplan",change:this.props.onChange("careplan"),options:n}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("careplan")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("careplan")({val:{id:"text"}})}},"Add Care Plan"),r.a.createElement("br",null))}},{key:"renderReferencedByAttribute",value:function(){var e=this,t=this.props.state;return t.referenced_by_attribute?r.a.createElement("div",null,"Referenced by Attribute: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:t.referenced_by_attribute,propName:"referenced_by_attribute",change:this.props.onChange("referenced_by_attribute")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("referenced_by_attribute")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("referenced_by_attribute")({val:{id:"text"}})}},"Add Referenced by Attribute"),r.a.createElement("br",null))}},{key:"renderCodes",value:function(){var e=this,t=this.props.state;return t.codes?r.a.createElement("div",{className:"section"},"Codes",r.a.createElement("br",null),r.a.createElement(de,{codes:t.codes,system:"SNOMED-CT",onChange:this.props.onChange("codes")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("codes")({val:{id:null}})}},"Remove Codes"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("codes")({val:{id:[x("Type.Code.Snomed")]}})}},"Add Codes"),r.a.createElement("br",null))}}]),t}(a.Component),Et=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.state;return r.a.createElement("div",null,this.renderReason(),r.a.createElement("div",{className:"section"},"Codes",r.a.createElement("br",null),r.a.createElement(de,{codes:e.codes,system:"SNOMED-CT",onChange:this.props.onChange("codes")}),r.a.createElement("br",null)),this.renderDuration())}},{key:"renderReason",value:function(){var e=this,t=this.props.state;if(t.reason){var n=this.props.otherStates.filter(function(e){return"ConditionOnset"===e.type}).map(function(e){return{id:e.name,text:e.name}}).concat([{id:"*Input Attribute*",text:"*Input Attribute*"}]),a=r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.reason,text:t.reason},propName:"reason",change:this.props.onChange("reason"),options:n});if("*Input Attribute*"===t.reason){var o=r.a.createElement(le.RIEInput,{className:"editable-text",value:t.reason,propName:"reason",change:this.props.onChange("reason")});return r.a.createElement("div",null,"Reason: ",a,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("reason")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null),"Attribute: ",o,r.a.createElement("br",null))}return r.a.createElement("div",null,"Reason: ",a,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("reason")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null))}return r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("reason")({val:{id:"Select Condition/Enter Attribute"}})}},"Add Reason"),r.a.createElement("br",null))}},{key:"renderDuration",value:function(){var e=this,t=this.props.state;return t.duration?r.a.createElement("div",{className:"section"},"Duration Low: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.duration.low,propName:"low",change:this.props.onChange("duration.low")}),r.a.createElement("br",null),"Duration High: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.duration.high,propName:"high",change:this.props.onChange("duration.high")}),r.a.createElement("br",null),"Duration Unit: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.duration.unit,text:t.duration.unit},propName:"unit",change:this.props.onChange("duration.unit"),options:ze}),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("duration")({val:{id:null}})}},"(remove)")):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("duration")({val:{id:{low:10,high:20,unit:"days"}}})}},"Add Duration"),r.a.createElement("br",null))}}]),t}(a.Component),vt=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.state;return r.a.createElement("div",null,"Vital Sign: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:e.vital_sign,propName:"vital_sign",change:this.props.onChange("vital_sign")}),r.a.createElement("br",null),"Unit: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:e.unit,propName:"unit",change:this.props.onChange("unit")}),r.a.createElement("br",null),this.renderExactOrRange())}},{key:"renderExactOrRange",value:function(){var e=this,t=this.props.state;return t.exact?r.a.createElement("div",{className:"section"},"Exact Quantity: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.exact.quantity,propName:"quantity",change:this.props.onChange("exact.quantity")}),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("range")({val:{id:x("Attribute.Range")}}),e.props.onChange("exact")({val:{id:null}})}},"Change to Range"),r.a.createElement("br",null)):r.a.createElement("div",{className:"section"},"Range Low: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.range.low,propName:"low",change:this.props.onChange("range.low")}),r.a.createElement("br",null),"Range High: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.range.high,propName:"high",change:this.props.onChange("range.high")}),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("exact")({val:{id:x("Attribute.Exact")}}),e.props.onChange("range")({val:{id:null}})}},"Change to Exact"),r.a.createElement("br",null))}}]),t}(a.Component),yt=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.state;return r.a.createElement("div",null,"Category: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:e.category,text:e.category},propName:"category",change:this.props.onChange("category"),options:[{id:"social-history",text:"social-history"},{id:"vital-signs",text:"vital-signs"},{id:"imaging",text:"imaging"},{id:"laboratory",text:"laboratory"},{id:"procedure",text:"procedure"},{id:"survey",text:"survey"},{id:"exam",text:"exam"},{id:"therapy",text:"therapy"}]}),r.a.createElement("br",null),"Unit: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:e.unit,propName:"unit",change:this.props.onChange("unit")}),r.a.createElement("br",null),r.a.createElement("div",{className:"section"},"Codes",r.a.createElement("br",null),r.a.createElement(de,{codes:e.codes,system:"LOINC",onChange:this.props.onChange("codes")}),r.a.createElement("br",null)),this.renderValueContainer())}},{key:"renderValueContainer",value:function(){var e=this.props.state;if(e.exact){var t=e.exact.quantity;return"boolean"===typeof t&&(t=String(t)),r.a.createElement("div",{className:"section"},"Exact Value: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:t,propName:"quantity",change:this.props.onChange("exact.quantity")}),r.a.createElement("br",null),this.renderToggles("exact"))}return e.range?r.a.createElement("div",{className:"section"},"Range Low: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:e.range.low,propName:"low",change:this.props.onChange("range.low")}),r.a.createElement("br",null),"Range High: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:e.range.high,propName:"high",change:this.props.onChange("range.high")}),r.a.createElement("br",null),this.renderToggles("range")):e.attribute?r.a.createElement("div",{className:"section"},"Attribute: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:e.attribute,propName:"attribute",change:this.props.onChange("attribute")}),r.a.createElement("br",null),this.renderToggles("attribute")):e.value_code?r.a.createElement("div",{className:"section"},r.a.createElement(ce,{code:e.value_code,system:"SNOMED-CT",onChange:this.props.onChange("value_code")}),this.renderToggles("value_code")):r.a.createElement("div",{className:"section"},"Vital Sign: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:e.vital_sign,propName:"vital_sign",change:this.props.onChange("vital_sign")}),this.renderToggles("vital_sign"))}},{key:"renderToggles",value:function(e){var t=this;console.log(e);var n=[];return"exact"!==e&&n.push(r.a.createElement("div",{key:"exact"},r.a.createElement("a",{className:"editable-text",onClick:function(){t.props.onChange("exact")({val:{id:x("Attribute.Exact")}}),t.props.onChange("range")({val:{id:null}}),t.props.onChange("attribute")({val:{id:null}}),t.props.onChange("vital_sign")({val:{id:null}}),t.props.onChange("value_code")({val:{id:null}})}},"Change to Exact"),r.a.createElement("br",null))),"range"!==e&&n.push(r.a.createElement("div",{key:"range"},r.a.createElement("a",{className:"editable-text",onClick:function(){t.props.onChange("range")({val:{id:x("Attribute.Range")}}),t.props.onChange("exact")({val:{id:null}}),t.props.onChange("attribute")({val:{id:null}}),t.props.onChange("vital_sign")({val:{id:null}}),t.props.onChange("value_code")({val:{id:null}})}},"Change to Range"),r.a.createElement("br",null))),"attribute"!==e&&n.push(r.a.createElement("div",{key:"attribute"},r.a.createElement("a",{className:"editable-text",onClick:function(){t.props.onChange("attribute")({val:{id:"text"}}),t.props.onChange("exact")({val:{id:null}}),t.props.onChange("range")({val:{id:null}}),t.props.onChange("vital_sign")({val:{id:null}}),t.props.onChange("value_code")({val:{id:null}})}},"Change to Attribute"),r.a.createElement("br",null))),"vital_sign"!==e&&n.push(r.a.createElement("div",{key:"vital_sign"},r.a.createElement("a",{className:"editable-text",onClick:function(){t.props.onChange("vital_sign")({val:{id:"text"}}),t.props.onChange("exact")({val:{id:null}}),t.props.onChange("range")({val:{id:null}}),t.props.onChange("attribute")({val:{id:null}}),t.props.onChange("value_code")({val:{id:null}})}},"Change to Vital Sign"),r.a.createElement("br",null))),"value_code"!==e&&n.push(r.a.createElement("div",{key:"value_code"},r.a.createElement("a",{className:"editable-text",onClick:function(){t.props.onChange("value_code")({val:{id:x("Type.Code.Snomed")}}),t.props.onChange("exact")({val:{id:null}}),t.props.onChange("range")({val:{id:null}}),t.props.onChange("attribute")({val:{id:null}}),t.props.onChange("vital_sign")({val:{id:null}})}},"Change to Value Code"),r.a.createElement("br",null))),n}}]),t}(a.Component),ft=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this,t=this.props.state,n=t.observations&&t.observations.length||0;return r.a.createElement("div",null,"Category: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.category,text:t.category},propName:"category",change:this.props.onChange("category"),options:[{id:"social-history",text:"social-history"},{id:"vital-signs",text:"vital-signs"},{id:"imaging",text:"imaging"},{id:"laboratory",text:"laboratory"},{id:"procedure",text:"procedure"},{id:"survey",text:"survey"},{id:"exam",text:"exam"},{id:"therapy",text:"therapy"}]}),r.a.createElement("br",null),r.a.createElement("div",{className:"section"},"Codes",r.a.createElement("br",null),r.a.createElement(de,{codes:t.codes,system:"LOINC",onChange:this.props.onChange("codes")}),r.a.createElement("br",null)),r.a.createElement("div",{className:"section"},r.a.createElement("b",null,"Observations"),r.a.createElement("br",null),t.observations&&t.observations.map(function(t,n){return r.a.createElement("div",{className:"section",key:n},"Observation #",n+1," (",r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){return e.props.onChange("observations.[".concat(n,"]"))({val:{id:null}})}},"remove"),")",r.a.createElement(yt,{state:t,onChange:e.props.onChange("observations.[".concat(n,"]"))}))}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("observations.[".concat(n,"]"))({val:{id:C.a.cloneDeep(x("Contained.Observation"))}})}},"+")))}}]),t}(a.Component),Ct=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this,t=this.props.state,n=t.observations&&t.observations.length||0;return r.a.createElement("div",null,r.a.createElement("div",{className:"section"},r.a.createElement("b",null,"Codes"),r.a.createElement("br",null),r.a.createElement(de,{codes:t.codes,system:"LOINC",onChange:this.props.onChange("codes")})),r.a.createElement("div",{className:"section"},r.a.createElement("b",null,"Observations"),r.a.createElement("br",null),t.observations&&t.observations.map(function(t,n){return r.a.createElement("div",{className:"section",key:n},"Observation #",n+1," (",r.a.createElement("a",{className:"editable-text delete-button",onClick:function(){return e.props.onChange("observations.[".concat(n,"]"))({val:{id:null}})}},"remove"),")",r.a.createElement(yt,{state:t,onChange:e.props.onChange("observations.[".concat(n,"]"))}))}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("observations.[".concat(n,"]"))({val:{id:C.a.cloneDeep(x("Contained.Observation"))}})}},"+")))}}]),t}(a.Component),Ot=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.state;return r.a.createElement("div",null,r.a.createElement("div",{className:"section"},r.a.createElement("b",null,"Procedure Code:"),r.a.createElement(ce,{code:e.procedure_code,system:"SNOMED-CT",onChange:this.props.onChange("procedure_code")}),r.a.createElement("br",null)),r.a.createElement("div",{className:"section"},r.a.createElement("b",null,"Series:"),r.a.createElement("br",null),r.a.createElement(ve,{series:e.series,onChange:this.props.onChange("series")}),r.a.createElement("br",null)))}}]),t}(a.Component),Nt=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.state;return r.a.createElement("div",null,"Symptom: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:e.symptom,propName:"symptom",change:this.props.onChange("symptom")}),r.a.createElement("br",null),this.renderProbability(),this.renderCause(),this.renderExactOrRange())}},{key:"renderProbability",value:function(){var e=this.props.state;return e.probability?r.a.createElement("div",null,"Probability: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:e.probability,propName:"probability",editProps:{step:.01,min:0,max:1},change:this.props.onChange("probability"),format:this.formatAsPercentage,validate:this.checkInRange,classInvalid:"invalid"})):r.a.createElement("div",null,"Probability: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:1,propName:"probability",editProps:{step:.01,min:0,max:1},change:this.props.onChange("probability"),format:this.formatAsPercentage,validate:this.checkInRange,classInvalid:"invalid"}))}},{key:"checkInRange",value:function(e){return e>=0&&e<=1}},{key:"formatAsPercentage",value:function(e){return 100*e+"%"}},{key:"renderCause",value:function(){var e=this.props.state;return e.cause?r.a.createElement("div",null,"Cause: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:e.cause,propName:"cause",change:this.props.onChange("cause")}),r.a.createElement("br",null)):r.a.createElement("div",null,"Cause: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:this.props.moduleName,propName:"cause",change:this.props.onChange("cause")}),r.a.createElement("br",null))}},{key:"renderExactOrRange",value:function(){var e=this,t=this.props.state;return t.exact?r.a.createElement("div",{className:"section"},"Exact Quantity: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.exact.quantity,propName:"quantity",change:this.props.onChange("exact.quantity")}),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("range")({val:{id:x("Attribute.Range")}}),e.props.onChange("exact")({val:{id:null}})}},"Change to Range"),r.a.createElement("br",null)):r.a.createElement("div",{className:"section"},"Range Low: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.range.low,propName:"low",change:this.props.onChange("range.low")}),r.a.createElement("br",null),"Range High: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.range.high,propName:"high",change:this.props.onChange("range.high")}),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("exact")({val:{id:x("Attribute.Exact")}}),e.props.onChange("range")({val:{id:null}})}},"Change to Exact"),r.a.createElement("br",null))}}]),t}(a.Component),xt=function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){this.props.state;return r.a.createElement("div",null,this.renderExactOrRange(),this.renderCodes(),this.renderConditionOnset(),this.renderReferencedByAttribute())}},{key:"renderExactOrRange",value:function(){var e=this,t=this.props.state;return t.exact?r.a.createElement("div",{className:"section"},"Exact Quantity: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.exact.quantity,propName:"quantity",change:this.props.onChange("exact.quantity")}),r.a.createElement("br",null),"Exact Unit: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.exact.unit,text:t.exact.unit},propName:"unit",change:this.props.onChange("exact.unit"),options:ze}),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("range")({val:{id:x("Attribute.RangeWithUnit")}}),e.props.onChange("exact")({val:{id:null}})}},"Change to Range"),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("range")({val:{id:null}}),e.props.onChange("exact")({val:{id:null}})}},"Remove Exact/Range"),r.a.createElement("br",null)):t.range?r.a.createElement("div",{className:"section"},"Range Low: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.range.low,propName:"low",change:this.props.onChange("range.low")}),r.a.createElement("br",null),"Range High: ",r.a.createElement(le.RIENumber,{className:"editable-text",value:t.range.high,propName:"high",change:this.props.onChange("range.high")}),r.a.createElement("br",null),"Range Unit: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.range.unit,text:t.range.unit},propName:"unit",change:this.props.onChange("range.unit"),options:ze}),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("exact")({val:{id:x("Attribute.ExactWithUnit")}}),e.props.onChange("range")({val:{id:null}})}},"Change to Exact"),r.a.createElement("br",null),r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("range")({val:{id:null}}),e.props.onChange("exact")({val:{id:null}})}},"Remove Exact/Range"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){e.props.onChange("exact")({val:{id:x("Attribute.ExactWithUnit")}}),e.props.onChange("range")({val:{id:null}})}},"Add Exact/Range"),r.a.createElement("br",null))}},{key:"renderCodes",value:function(){var e=this,t=this.props.state;return t.codes?r.a.createElement("div",{className:"section"},"Codes",r.a.createElement("br",null),r.a.createElement(de,{codes:t.codes,system:"SNOMED-CT",onChange:this.props.onChange("codes")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("codes")({val:{id:null}})}},"Remove Codes"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("codes")({val:{id:[x("Type.Code.Snomed")]}})}},"Add Codes"),r.a.createElement("br",null))}},{key:"renderConditionOnset",value:function(){var e=this,t=this.props.state,n=this.props.otherStates.filter(function(e){return"ConditionOnset"===e.type}).map(function(e){return{id:e.name,text:e.name}});return t.condition_onset?r.a.createElement("div",null,"Condition Onset: ",r.a.createElement(le.RIESelect,{className:"editable-text",value:{id:t.condition_onset,text:t.condition_onset},propName:"condition_onset",change:this.props.onChange("condition_onset"),options:n}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("condition_onset")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("condition_onset")({val:{id:"text"}})}},"Add Condition Onset"),r.a.createElement("br",null))}},{key:"renderReferencedByAttribute",value:function(){var e=this,t=this.props.state;return t.referenced_by_attribute?r.a.createElement("div",null,"Referenced by Attribute: ",r.a.createElement(le.RIEInput,{className:"editable-text",value:t.referenced_by_attribute,propName:"referenced_by_attribute",change:this.props.onChange("referenced_by_attribute")}),r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("referenced_by_attribute")({val:{id:null}})}},"(remove)"),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("a",{className:"editable-text",onClick:function(){return e.props.onChange("referenced_by_attribute")({val:{id:"text"}})}},"Add Referenced by Attribute"),r.a.createElement("br",null))}}]),t}(a.Component),At=Xe,kt=(n(114),function(e){function t(e){var n;return Object(Z.a)(this,t),(n=Object(X.a)(this,Object($.a)(t).call(this,e))).onRemarksChange=n.onRemarksChange.bind(Object(ee.a)(n)),n}return Object(te.a)(t,e),Object(z.a)(t,[{key:"onRemarksChange",value:function(e){this.props.onRemarksChange(e)}},{key:"render",value:function(){var e=this,t="No remarks.";return Array.isArray(this.props.module.remarks)&&(t=this.props.module.remarks.join("\n")),r.a.createElement("div",{className:"ModuleProperties"},r.a.createElement("div",{className:"Editor-panel-title"},"Module Remarks"),r.a.createElement("div",{className:"ModuleProperties-remarks"},r.a.createElement(le.RIETextArea,{value:t,propName:"remarks",change:function(t){return e.onRemarksChange(t.remarks)}})))}}]),t}(a.Component)),jt=n(45),St=n.n(jt),_t=n(63),Mt=n.n(_t);function Dt(e,t,n){var a={};return t&&(Object.keys(e.states).forEach(function(n){var r=e.states[n];Bt(e.states[n])[t.name]&&(a[r.name]=!0)}),a=Object.assign({},a,Bt(e.states[t.name]))),["digraph G {",It(e,t,a),wt(e,t,n),"}"].join("\n")}var It=function(e,t,n){return Object.keys(e.states).filter(function(t){return"object"===typeof e.states[t]}).map(function(a){var r=e.states[a];r.name=a;var o={id:"node_"+Lt(a),shape:"record",style:"rounded,filled",fillcolor:"White",fontcolor:"Black"};"Initial"!==r.type&&"Terminal"!==r.type||(o.fillcolor="Grey",o.style="rounded,filled",o.fontcolor="White"),t&&r.name===t.name?(o.fillcolor="White",o.class="node-highlighted"):t&&!n[r.name]&&(o.class="node-muted");var i=Rt(r);0===i.length?o.label=a===r.type?r.name:"{ ".concat(a," | ").concat(r.type," }"):o.label="{ ".concat(a," | { ").concat(r.type," | ").concat(i," } }"),o.label=Vt(o.label);var s=Object.keys(o).map(function(e){return"".concat(e,' = "').concat(o[e],'"')}).join(", ");return'"'.concat(Wt(a),'" [').concat(s,";]")}).join("\n")},wt=function(e,t,n){return Object.keys(e.states).map(function(a){var r=e.states[a],o=Wt(a),i="";if(t&&(i="transition-muted"),t&&t.name===a&&(i="transition-highlighted"),void 0!==r.direct_transition){if(t&&r.direct_transition===t.name&&t.name!==a&&(i=""),0===n&&(i+=" transition-selected"),e.states[r.direct_transition])return'  "'.concat(o,'" -> "').concat(Wt(e.states[r.direct_transition].name),'" [class = "transition transition-index_0 ').concat(i,'"];\n');console.log("NO SUCH NODE TO TRANSITION TO: ".concat(r.direct_transition," FROM ").concat(a))}else{if(void 0!==r.distributed_transition){var s="";return r.distributed_transition.forEach(function(r,l){var c=i,d="";if("object"===typeof r.distribution){if(d="p(".concat(r.distribution.attribute,")"),r.distribution.default){var u=100*r.distribution.default;d+=", default ".concat(u,"%")}}else{var p=100*r.distribution;d="".concat(p,"%")}e.states[r.transition]?(t&&r.transition===t.name&&t.name!==a&&(c=""),n===l&&(c+=" transition-selected"),s+='  "'.concat(o,'" -> "').concat(Wt(e.states[r.transition].name),'" [label = "').concat(d,'", class = "transition transition-index_').concat(l," ").concat(c,'"];\n')):console.log("NO SUCH NODE TO TRANSITION TO: ".concat(r.transition," FROM ").concat(a))}),s}if(void 0!==r.conditional_transition){var l="";return r.conditional_transition.forEach(function(r,s){var c=i,d=void 0!==r.condition?Tt(r.condition):"else";e.states[r.transition]?(t&&r.transition===t.name&&(c=""),n===s&&(c+=" transition-selected"),l+='  "'.concat(o,'" -> "').concat(Wt(e.states[r.transition].name),'" [label = "').concat(s+1,". ").concat(d,'", class = "transition transition-index_').concat(s," ").concat(c,'"];\n')):console.log("NO SUCH NODE TO TRANSITION TO: ".concat(r.transition," FROM ").concat(a,"\n"))}),l}if(void 0!==r.complex_transition){var c={},d={};r.complex_transition.forEach(function(n,r){var i=void 0!==n.condition?Tt(n.condition):"else";if(void 0!==n.transition)if(e.states[n.transition]){var s='  "'.concat(o,'" -> "').concat(n.transition,'"');t&&n.transition===t.name&&(d[s]="standard"),t&&a===t.name&&(d[s]="highlighted"),void 0===c[s]&&(c[s]=[]),c[s].push(i)}else console.log("NO SUCH NODE TO TRANSITION TO: ".concat(n.transition," FROM ").concat(a));else n.distributions.forEach(function(n){if(e.states[n.transition]){var r=100*n.distribution,s='  "'.concat(o,'" -> "').concat(n.transition,'"');t&&n.transition===t.name&&(d[s]="standard"),t&&a===t.name&&(d[s]="highlighted"),void 0===c[s]&&(c[s]=[]),c[s].push("".concat(i,": ").concat(r,"%"))}else console.log("NO SUCH NODE TO TRANSITION TO: ".concat(n.transition," FROM ").concat(a))})});var u="";return Object.keys(c).forEach(function(e,t){var a=i;"standard"===d[e]?a="":"highlighted"===d[e]&&(a="transition-highlighted"),n===t&&(a+=" transition-selected"),u+="".concat(e,' [label = "').concat(c[e].join(",\\n"),'", class = "transition transition-index_').concat(t," ").concat(a,'"]\n')}),u}}return""}).join("")},Rt=function(e){var t="";switch(e.type){case"Initial":case"Terminal":t="";break;case"Guard":t="Allow if "+Tt(e.allow);break;case"Delay":case"Death":if(void 0!==e.range){var n=e.range;t="".concat(n.low," - ").concat(n.high," ").concat(n.unit)}else if(void 0!==e.exact){var a=e.exact;t="".concat(a.quantity," ").concat(a.unit)}break;case"Encounter":e.wellness&&(t="Wait for regularly scheduled wellness encounter\\n");break;case"EncounterEnd":if(t="End the current encounter",e.discharge_disposition){var r=e.discharge_disposition;t+="\\lDischarge Disposition: [".concat(r.code,"] ").concat(r.display)}break;case"SetAttribute":var o=e.value;t="Set '".concat(e.attribute,"' = ").concat(void 0===o||null===o||""===o?"nil":o);break;case"Symptom":var i=e.symptom,s=e.probability;if(void 0!==e.range){var l=e.range;t="".concat(i,": ").concat(l.low," - ").concat(l.high)}else if(void 0!==e.exact){var c=e.exact;t="".concat(i,": ").concat(c.quantity)}if(s&&s<1&&s>0)t+=" (".concat(100*s,"%)");break;case"Observation":var d=e.unit;if(d&&(d="in "+d.replace("{","(").replace("}",")")),void 0!==e.vital_sign)t="Record value from Vital Sign '".concat(e.vital_sign,"' ").concat(d,"\\l");else if(void 0!==e.attribute)t="Record value from Attribute '".concat(e.attribute,"' ").concat(d,"\\l");else if(void 0!==e.range){var u=e.range;t="Record value between: ".concat(u.low," - ").concat(u.high," ").concat(d,"\\l")}else if(void 0!==e.exact){var p=e.exact;t="Record value ".concat(p.quantity," ").concat(d,"\\l")}else if(void 0!==e.value_code){var m=e.value_code;t="Record value ".concat(m.system,"[").concat(m.code,"]: ").concat(m.display,"\\l")}break;case"ImagingStudy":var h=e.series;if(h.length>0){var b=h[0],g=b.modality,E=b.body_site;t="DICOM-DCM[".concat(g.code,"]: ").concat(g.display,"\\l"),t+="SNOMED-CT[".concat(E.code,"]: Body Site: ").concat(E.display,"\\l")}break;case"Counter":t="".concat(e.action," value of attribute '").concat(e.attribute,"' by 1");break;case"VitalSign":var v=e.vital_sign,y=e.unit;if(void 0!==e.range){var f=e.range;t="Set ".concat(v,": ").concat(f.low," - ").concat(f.high," ").concat(y)}else if(void 0!==e.exact){var C=e.exact;t="Set ".concat(v,": ").concat(C.quantity," ").concat(y)}break;case"CallSubmodule":t="Call submodule '".concat(e.submodule,"'");break;case"MultiObservation":case"DiagnosticReport":if(e.observations&&e.observations.length>0){var O=["Type"],N=["Value"],x=["Unit"];e.observations.forEach(function(e,t){var n=e.unit;if(n&&(n=n.replace("{","(").replace("}",")")),O.push(e.codes.map(function(e){return e.display}).join("\\l")),x.push(n),void 0!==e.vital_sign)N.push("Vital Sign: '".concat(e.vital_sign,"'"));else if(void 0!==e.attribute)N.push("Attribute: '".concat(e.attribute,"'"));else if(void 0!==e.range){var a=e.range;N.push("".concat(a.low," - ").concat(a.high))}else if(void 0!==e.exact){var r=e.exact;N.push("".concat(r.quantity))}else if(void 0!==e.value_code){var o=e.value_code;N.push("".concat(o.system,"[").concat(o.code,"]: ").concat(o.display))}}),t+="{".concat(O.map(function(e){return e}).join("|"),"}|"),t+="{".concat(N.map(function(e){return e}).join("|"),"}|"),t+="{".concat(x.map(function(e){return e}).join("|"),"}|")}else t="No Observations\\l"}if(void 0!==e.codes&&e.codes.forEach(function(e){t=t+e.system+"["+e.code+"]: "+e.display+"\\l"}),void 0!==e.target_encounter){var A="Perform";switch(e.type){case"ConditionOnset":case"AllergyOnset":A="Diagnose";break;case"MedicationOrder":A="Prescribe"}t=t+A+" at "+e.target_encounter+"\\l"}if(e.reason&&(t+="Reason: ".concat(e.reason,"\\l")),e.medication_order&&(t+="Prescribed at: ".concat(e.medication_order,"\\l")),e.condition_onset&&(t+="Onset at: ".concat(e.condition_onset,"\\l")),e.allergy_onset&&(t+="Onset at: ".concat(e.allergy_onset,"\\l")),e.careplan&&(t+="Prescribed at: ".concat(e.careplan,"\\l")),e.assign_to_attribute&&(t+="Assign to Attribute: '".concat(e.assign_to_attribute,"'\\l")),e.administration&&(t+="Medication is administered\\l"),e.referenced_by_attribute&&(t+="Referenced By Attribute: '".concat(e.referenced_by_attribute,"'\\l")),e.activities&&(t+="\\lActivities:\\l",e.activities.forEach(function(e){t=t+e.system+"["+e.code+"]: "+e.display+"\\l"})),e.goals&&(t+="\\lGoals:\\l",e.goals.forEach(function(e){if(e.text)t=t+e.text+"\\l";else if(e.codes){var n=e.codes[0];t=t+n.system+"["+n.code+"]: "+n.display+"\\l"}else if(e.observation){var a=e.observation,r=Pt(a);t+="Observation ".concat(r," \\").concat(a.operator).concat(Kt(a.value),"\\l")}})),e.duration){var k=e.duration;t="".concat(t,"\\lDuration: ").concat(k.low," - ").concat(k.high," ").concat(k.unit,"\\l")}return e.category&&(t="".concat(t,"Category: ").concat(e.category,"\\l")),t},Tt=function e(t){switch(t.condition_type){case"And":case"Or":return t.conditions.map(function(t){return"and"===t.condition_type||"or"===t.condition_type?"(\\l"+e(t)+")\\l":e(t)}).join(t.condition_type.toLowerCase()+" ");case"At Least":case"At Most":var n=t.minimum||t.maximum,a=t.conditions.map(function(t){return"and"===t.condition_type||"or"===t.condition_type?"(\\l"+e(t)+")\\l":e(t)});return"".concat(t.condition_type," ").concat(n," of:\\l- ").concat(a.join("- "));case"Not":var r=e(t.condition);return"not ".concat(r);case"Gender":return"gender is '".concat(t.gender,"'\\l");case"Age":return"age \\".concat(t.operator," ").concat(t.quantity," ").concat(t.unit,"\\l");case"Socioeconomic Status":return"".concat(t.category," Socioeconomic Status\\l");case"Race":return"race is '".concat(t.race,"'\\l");case"Date":if(void 0!==t.year)return"Year is \\".concat(t.operator," ").concat(t.year,"\\l");if(void 0!==t.month)return"Month is \\".concat(t.operator," ").concat(t.month,"\\l");if(void 0!==t.date){var o=t.date;return"Date is \\".concat(t.operator," ").concat(o.year,"-").concat(o.month,"-").concat(o.day," ").concat(o.hour,":").concat(o.minute,":").concat(o.second,".").concat(o.millisecond,"\\l")}case"Symptom":return"Symptom: '".concat(t.symptom,"' \\").concat(t.operator," ").concat(t.value,"\\l");case"PriorState":var i="state '".concat(t.name,"' has been processed");return void 0!==t.since&&(i="".concat(i," since ").concat(t.since)),void 0!==t.within&&(i="".concat(i," within ").concat(t.within.quantity," ").concat(t.within.unit)),"".concat(i," \\l");case"Attribute":return"Attribute: '".concat(t.attribute,"' \\").concat(t.operator).concat(Kt(t.value),"\\l");case"Observation":var s=Pt(t);if("is nil"===t.operator||"is not nil"===t.operator||"is nil"===t.operator.id||"is not nil"===t.operator.id)return"Observation ".concat(s," \\").concat(t.operator,"\\l");if(void 0!==t.value)return"Observation ".concat(s," \\").concat(t.operator).concat(Kt(t.value),"\\l");if(void 0!==t.value_code)return"Observation ".concat(s," \\").concat(t.operator," ").concat(t.value_code.system,"[").concat(t.value_code.code,"]: ").concat(t.value_code.display,"\\l");case"Vital Sign":return"Vital Sign ".concat(t.vital_sign," \\").concat(t.operator," ").concat(t.value,"\\l");case"Active Condition":var l=Pt(t);return"Condition ".concat(l," is active\\l");case"Active CarePlan":var c=Pt(t);return"CarePlan ".concat(c," is active\\l");case"Active Medication":var d=Pt(t);return"Medication ".concat(d," is active\\l");case"Active Allergy":var u=Pt(t);return"Allergy ".concat(u," is active\\l");case"True":case"False":return t.condition_type;default:return"Unknown Condition: ".concat(t.condition_type)}},Pt=function(e){if(e.codes){var t=e.codes[0];return"'".concat(t.system," [").concat(t.code,"]: ").concat(t.display,"'")}return e.referenced_by_attribute?"Referenced By Attribute: '".concat(e.referenced_by_attribute,"'"):"Error with referenced types: ".concat(e.condition_type," condition must be specified by code or attribute")},Bt=function e(t,n){if(n||(n={}),!t)return n;if(t instanceof Array){for(var a in t)n=Object.assign({},n,e(t[a],{}));return n}if(t.direct_transition&&(n[t.direct_transition]=!0),t.transition&&(n[t.transition]=!0),"object"===typeof t&&null!==t){var r=Object.keys(t);if(r.length>0)for(var o=0;o<r.length;o++)n=Object.assign({},n,e(t[r[o]],{}))}return n},Kt=function(e){return void 0===e?"":" "+e},Lt=function(e){return I(e,{"?":"",'"':""})},Wt=function(e){return I(e,{'"':"\\"})},Vt=function(e){return I(e,{"&":"&amp;","<":"&lt;",">":"&gt;",'"':'\\"'})},Ut=(n(124),function(e){function t(e){var n;return Object(Z.a)(this,t),(n=Object(X.a)(this,Object($.a)(t).call(this,e))).onPanZoom=n.onPanZoom.bind(Object(ee.a)(n)),n.onMouseUp=n.onMouseUp.bind(Object(ee.a)(n)),n.onMouseDown=n.onMouseDown.bind(Object(ee.a)(n)),n.bold=!1,n.lastDOT="",n}return Object(te.a)(t,e),Object(z.a)(t,[{key:"componentDidMount",value:function(){this.writeSVG(this.props.module),this.mount.addEventListener("mouseup",this.onMouseUp),this.mount.addEventListener("mousedown",this.onMouseDown)}},{key:"componentWillReceiveProps",value:function(e){e.module.name!==this.props.module.name&&(this.panZoomSettings=null),this.writeSVG(e.module,e.selectedState,e.selectedStateTransition),e.fullscreen!==this.props.fullscreen&&(e.fullscreen?(this.svgPanZoom.panBy({x:250,y:0}),this.customPanBy({x:-100,y:0})):(this.svgPanZoom.panBy({x:-250,y:0}),this.customPanBy({x:100,y:0}))),this.panZoomSettings&&(this.blockPanZoomEvent=!0,this.svgPanZoom.zoom(this.panZoomSettings.zoom,!0),this.svgPanZoom.pan(this.panZoomSettings.pan,!0),this.blockPanZoomEvent=!1)}},{key:"customPanBy",value:function(e){var t=this,n=0,a=null,r=e.x/20,o=e.y/20;a=setInterval(function(){n++<20?t.svgPanZoom&&t.svgPanZoom.panBy({x:r,y:o}):clearInterval(a)},15)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{ref:function(t){return e.mount=t},className:"Module "+(this.props.fullscreen?"Module-fullscreen":"Module-standard-screen")},r.a.createElement("svg",{width:"50000px",height:"50000px",xmlns:"http://www.w3.org/2000/svg",style:{opacity:.3}},r.a.createElement("defs",null,r.a.createElement("pattern",{id:"smallGrid",width:"10",height:"10",patternUnits:"userSpaceOnUse"},r.a.createElement("path",{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"#95b4cf",strokeWidth:"0.5"})),r.a.createElement("pattern",{id:"grid",width:"100",height:"100",patternUnits:"userSpaceOnUse"},r.a.createElement("rect",{width:"100",height:"100",fill:"url(#smallGrid)"}),r.a.createElement("path",{d:"M 100 0 L 0 0 0 100",fill:"none",stroke:"#95b4cf",strokeWidth:"1"}))),r.a.createElement("g",null,r.a.createElement("rect",{width:"100%",height:"100%",style:{transform:"translate(-50%, -50%)"},fill:"url(#grid)"}))),r.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},className:"Module-graph"}))}},{key:"onMouseUp",value:function(e){this.fireClickOnMouseUp&&this.props.onClick()}},{key:"onMouseDown",value:function(){this.fireClickOnMouseUp=!0}},{key:"onPanZoom",value:function(){if(!this.blockPanZoomEvent){this.fireClickOnMouseUp=!1,this.panZoomSettings={pan:this.svgPanZoom.getPan(),zoom:this.svgPanZoom.getZoom()},this.mount.children[0].children[1].setAttribute("transform",this.mount.children[1].children[0].children[1].attributes.transform.value);var e=Math.max(this.originalWidth,this.originalHeight)/this.svgPanZoom.getZoom()>1500;e&&!this.bold?(this.bold=!0,this.mount.children[1].className="Module bold-lines"):!e&&this.bold&&(this.bold=!1,this.mount.children[1].className="Module")}}},{key:"writeSVG",value:function(e,t,n){var a=this,r=Dt(e,t,n);if(r!==this.lastDOT){this.lastDOT=r;try{this.mount.children[1].innerHTML=Mt()(r).replace("</svg>",'<defs>\n\n  <filter id="outershadow" height="200%" width="200%" x="-75%" y="-75%" color-interpolation-filters="sRGB">\n    <feMorphology operator="dilate" radius="3" in="SourceAlpha" result="thicken" />\n    <feGaussianBlur in="thicken" stdDeviation="4" result="blurred" />\n    <feFlood flood-color="#336699" result="glowColor" />\n    <feComposite in="glowColor" in2="blurred" operator="in" result="glowComposite" />\n    <feMerge>\n      <feMergeNode in="glowComposite"/>\n      <feMergeNode in="SourceGraphic"/>\n    </feMerge>\n  </filter>\n</defs></svg>')}catch(h){alert("Invalid module: "+h.message),this.mount.children[1].innerHTML='<svg width="10px" height="10px"/>'}var o=this.mount.children[1].children[0];Object.keys(e.states).forEach(function(e){var n=document.getElementById("node_".concat(e.replace("?","")));n&&(n.addEventListener("mouseup",function(t){a.lastDOT=null,t.stopPropagation(),a.props.onClick(e)}),t&&e===t.name?n.children[1].setAttribute("filter","url(#outershadow)"):n.children[1].removeAttribute("filter"))});var i=document.querySelector("svg > g > title");i&&i.remove();var s=document.querySelector("svg > g > polygon");if(s&&s.remove(),document.querySelectorAll(".edge.transition").forEach(function(e){var t=e.querySelector("title").innerHTML.split("-&gt;")[0],n=e.querySelector("path").cloneNode(!0),r=null,o=e.className.baseVal.split(" ").find(function(e){return e.startsWith("transition-index")});if(o)try{r=parseInt(o.split("_")[1])}catch(i){}n.setAttribute("class","transition-hitbox"),n.setAttribute("stroke-width",20),n.setAttribute("opacity",0),e.appendChild(n),e.querySelectorAll("path,text").forEach(function(e){e.addEventListener("mouseup",function(e){a.lastDOT=null,e.stopPropagation(),a.props.onClick(t,r)})})}),document.querySelectorAll("svg .edge text").forEach(function(e){return e.setAttribute("x",parseFloat(e.getAttribute("x"))+5)}),"function"===typeof St.a){this.originalWidth=o.attributes.width.value.match(/\d+/g).map(Number)[0],this.originalHeight=o.attributes.height.value.match(/\d+/g).map(Number)[0];var l=this.mount.children[1].getBoundingClientRect().x,c=this.mount.children[1].getBoundingClientRect().y,d=this.mount.children[1].getBoundingClientRect().width-l,u=this.mount.children[1].getBoundingClientRect().height-c;this.mount.children[1].children[0].setAttribute("width","100%"),this.mount.children[1].children[0].setAttribute("height","100%");var p=1;p=this.originalWidth/this.originalHeight>d/u?d/this.originalWidth:u/this.originalHeight,this.svgPanZoom=St()(this.mount.children[1].children[0],{controlIconsEnabled:!1,minZoom:.1,onPan:this.onPanZoom,onZoom:this.onPanZoom});var m=document.getElementById("svg-pan-zoom-controls");m&&(m.setAttribute("transform","translate(".concat(d-100," ").concat(u-150,") scale(.75)")),document.getElementById("svg-pan-zoom-zoom-in").addEventListener("mouseup",function(e){a.svgPanZoom.zoomIn()}),document.getElementById("svg-pan-zoom-zoom-out").addEventListener("mouseup",function(e){a.svgPanZoom.zoomOut()}),document.getElementById("svg-pan-zoom-reset-pan-zoom").addEventListener("mouseup",function(e){e.stopPropagation(),a.svgPanZoom.pan({x:a.svgPanZoom.getPan().x-l/2,y:50},!0),a.svgPanZoom.zoom(Math.pow(.8,p),!0)})),this.panZoomSettings||(this.svgPanZoom.pan({x:this.svgPanZoom.getPan().x-l/2,y:50},!0),this.svgPanZoom.zoom(Math.pow(.8,p),!0))}}}}]),t}(a.Component)),Ft=(n(125),n(81));function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var qt={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"25px",borderWidth:2,borderRadius:"5px",marginBottom:"15px",borderColor:"#666666",borderStyle:"dashed",backgroundColor:"#ffffff",outline:"none",transition:"border .15s ease-in-out"},Ht={borderColor:"#336699",backgroundColor:"#dceaef",color:"#336699"},Gt={borderColor:"#339999",cursor:"hand"},Yt={borderColor:"#ff1744",backgroundColor:"#ffeeee",cursor:"no-drop"};var Jt=function(e){var t=Object(Ft.a)({accept:"application/json",onDrop:e.onDrop}),n=t.getRootProps,o=t.getInputProps,i=t.isDragActive,s=t.isDragAccept,l=t.isDragReject,c=Object(a.useMemo)(function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(n,!0).forEach(function(t){Object(h.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},qt,{},i?Ht:{},{},s?Gt:{},{},l?Yt:{})},[i,l]);return r.a.createElement("div",{className:"LoadModule-dropzone"},r.a.createElement("div",n({style:c}),r.a.createElement("input",o()),r.a.createElement("p",null,"Drop files here or click to open saved modules.")))};function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(n,!0).forEach(function(t){Object(h.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Xt=function(e){function t(e){var n;return Object(Z.a)(this,t),(n=Object(X.a)(this,Object($.a)(t).call(this,e))).loadModule=function(e){try{var t=JSON.parse(e);if(void 0===t.name)throw new Error("Module must have a name.");if(void 0===t.states||0===Object.keys(t.states).length)throw new Error("Module must have at least one state.");Dt(t);n.props.newModule(t),n.setState(zt({},n.state,{json:"",selectedOption:"core"}))}catch(a){alert("Error creating module: "+a.message)}},n.onClick=function(e){return function(){n.setState(zt({},n.state,{json:"",selectedOption:"core"})),n.props.push("#"+e)}},n.onDrop=function(e){e.forEach(function(e){var t=new FileReader;t.onload=function(){n.loadModule(t.result)},t.readAsText(e)})},n.onLoadJSON=function(){n.loadModule(n.state.json)},n.onOptionClick=function(e){return function(){n.setState(zt({},n.state,{selectedOption:e}))}},n.updateJson=function(e){n.setState(zt({},n.state,{json:e.target.value}))},n.renderFooter=function(){var e=r.a.createElement("span",null);"json"===n.state.selectedOption&&(e=r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:n.onLoadJSON},"Load"));var t=r.a.createElement("span",null);return n.props.welcome||(t=r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:n.props.onHide},"Close")),r.a.createElement("div",{className:"modal-footer",style:{height:69}},e,t)},n.renderDetails=function(){switch(n.state.selectedOption){case"core":return r.a.createElement("ul",{className:"LoadModule-list"},Object.keys(n.props.library).filter(function(e){return-1===e.indexOf("/")}).map(function(e,t){var a=n.props.library[e];return r.a.createElement("li",{key:e},r.a.createElement("button",{className:"btn btn-link",onClick:n.onClick(e)},a.name))}));case"submodules":return r.a.createElement("ul",{className:"LoadModule-list"},Object.keys(n.props.library).filter(function(e){return e.indexOf("/")>-1}).map(function(e,t){var a=n.props.library[e];return r.a.createElement("li",{key:e},r.a.createElement("button",{className:"btn btn-link",onClick:n.onClick(e)},e.split("/")[0]+": "+a.name))}));case"my":return r.a.createElement("ul",{className:"LoadModule-list"},Object.keys(n.props.modules).map(function(e,t){var a=n.props.modules[e];return r.a.createElement("li",{key:e},r.a.createElement("button",{className:"btn btn-link",onClick:n.onClick(e)},a.name," (",e,")"))}));case"json":return r.a.createElement("textarea",{id:"loadJSON",value:n.state.json,onChange:n.updateJson});case"git":var e=null,t=null;return n.state.Modules&&(e=r.a.createElement("div",{className:"col-4 nopadding"},r.a.createElement("ul",{className:"LoadModule-list"},n.state.Folders,n.state.Modules)),n.state.Submodules&&(t=r.a.createElement("div",{className:"col-4 nopadding"},r.a.createElement("ul",{className:"LoadModule-list"},n.state.Submodules)))),r.a.createElement("div",{className:"row"},r.a.createElement("ul",{className:"LoadModule-list"},n.state.Branches),e,t);default:return}},n.renderWelcomeMessage=function(){return n.props.welcome?r.a.createElement("div",null,"Welcome to Synthea Module Builder.  Please visit the documentation first."):r.a.createElement("div",null)},n.state={json:"",selectedOption:"core"},n}return Object(te.a)(t,e),Object(z.a)(t,[{key:"changeColor",value:function(e,t){document.getElementById(e).style.backgroundColor="#ddd";var n=null;switch(t){case"branch":n=this.state.Branches;break;case"module":n=this.state.Modules;break;case"folder":n=this.state.Folders}n.forEach(function(t){t.props.id!==e&&(document.getElementById(t.props.id).style.backgroundColor="#eee")})}},{key:"fetchBranchList",value:function(){var e=this;fetch("https://api.github.com/repos/synthetichealth/synthea/branches").then(function(e){return e.json()}).then(function(t){e.setState({Branches:t.map(function(t,n){return r.a.createElement("li",{key:n,id:t.name},r.a.createElement("button",{className:"btn btn-link",onClick:function(){e.changeColor(t.name,"branch"),e.fetchModuleList(t.name)}},t.name))})})}).catch(function(e){return console.log("error: ",e)})}},{key:"fetchModuleList",value:function(e){var t=this;this.setState({currentBranch:e}),fetch("https://api.github.com/repos/synthetichealth/synthea/contents/src/main/resources/modules?ref="+e).then(function(e){return e.json()}).then(function(e){var n=e.filter(function(e){return!e.name.includes(".json")}),a=e.filter(function(e){return e.name.includes(".json")});t.setState({Folders:n.map(function(e,n){return r.a.createElement("li",{key:n,id:e.name},r.a.createElement("button",{className:"btn btn-link",onClick:function(){t.changeColor(e.name,"folder"),t.fetchModule(e.name)}},e.name,"/"))}),Modules:a.map(function(e,n){return r.a.createElement("li",{key:n,id:e.name},r.a.createElement("button",{className:"btn btn-link",onClick:function(){t.changeColor(e.name,"module"),t.fetchModule(e.name)}},e.name))})})}).catch(function(e){return console.log("error: ",e)})}},{key:"fetchModule",value:function(e){var t=this;this.setState({currentModule:e}),e.includes(".json")?fetch("https://raw.githubusercontent.com/synthetichealth/synthea/"+this.state.currentBranch+"/src/main/resources/modules/"+e).then(function(e){return e.text()}).then(function(e){return t.loadModule(e)}).then(this.setState({Modules:null})).catch(function(e){return console.log("error: ",e)}):fetch("https://api.github.com/repos/synthetichealth/synthea/contents/src/main/resources/modules/"+e+"?ref="+this.state.currentBranch).then(function(e){return e.json()}).then(function(e){return t.setState({Submodules:e.map(function(e,n){return r.a.createElement("li",{key:n,id:e.name},r.a.createElement("button",{className:"btn btn-link",onClick:function(){t.fetchSubmodule(e.name)}},e.name))})})}).catch(function(e){return console.log("error: ",e)})}},{key:"fetchSubmodule",value:function(e){var t=this;fetch("https://raw.githubusercontent.com/synthetichealth/synthea/"+this.state.currentBranch+"/src/main/resources/modules/"+this.state.currentModule+"/"+e).then(function(e){return e.text()}).then(function(e){return t.loadModule(e)}).then(this.setState({Submodules:null,Modules:null})).catch(function(e){return console.log("error: ",e)})}},{key:"componentDidUpdate",value:function(e,t){"git"===this.state.selectedOption&&"git"!==t.selectedOption&&this.fetchBranchList()}},{key:"render",value:function(){var e=" hide",t={display:"none"};return this.props.visible&&(e=" show",t={display:"block"}),r.a.createElement("div",null,r.a.createElement("div",{className:"modal "+e,style:t},r.a.createElement("div",{className:"modal-content",style:{width:"900px",marginLeft:"15%",marginRight:"15%",marginTop:50}},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},this.props.welcome?"Synthea Module Builder":"Load Module"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.onHide,style:{display:this.props.welcome?"none":""}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body LoadModule-body"},r.a.createElement(Jt,{onDrop:this.onDrop.bind(this)}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3 nopadding"},r.a.createElement("ul",{className:"LoadModule-options"},r.a.createElement("li",{className:"core"===this.state.selectedOption?"selected":""},r.a.createElement("button",{className:"btn btn-link",onClick:this.onOptionClick("core")},"Core Modules")),r.a.createElement("li",{className:"submodules"===this.state.selectedOption?"selected":""},r.a.createElement("button",{className:"btn btn-link",onClick:this.onOptionClick("submodules")},"Submodules")),Object.keys(this.props.modules).length>0?r.a.createElement("li",{className:"my"===this.state.selectedOption?"selected":""},r.a.createElement("button",{className:"btn btn-link",onClick:this.onOptionClick("my")},"My Modules")):"",r.a.createElement("li",{className:"json"===this.state.selectedOption?"selected":""},r.a.createElement("button",{className:"btn btn-link",onClick:this.onOptionClick("json")},"Paste JSON")),r.a.createElement("li",{className:"git"===this.state.selectedOption?"selected":""},r.a.createElement("button",{className:"btn btn-link",onClick:this.onOptionClick("git")},"GitHub Modules")))),r.a.createElement("div",{className:"col-9 nopadding"},this.renderDetails())))),this.renderFooter())),r.a.createElement("div",{className:"modal-backdrop ".concat(e),style:t}))}}]),t}(a.Component),$t=n(65),en=n.n($t),tn=(n(126),function(e){function t(e){var n;return Object(Z.a)(this,t),(n=Object(X.a)(this,Object($.a)(t).call(this,e))).onDownload=n.onDownload.bind(Object(ee.a)(n)),n}return Object(te.a)(t,e),Object(z.a)(t,[{key:"onDownload",value:function(){var e=new Blob([this.refs.codeInput.value],{type:"text/plain;charset=utf-8"}),t=this.props.module.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();en.a.saveAs(e,"".concat(t,".json"),!0)}},{key:"prepareJSON",value:function(){var e=C.a.cloneDeep(this.props.module);return Object.keys(e.states).map(function(t){return e.states[t]}).forEach(function(e){void 0!==e.name&&delete e.name}),JSON.stringify(e,null,2)}},{key:"render",value:function(){var e="hide",t={display:"none"};return this.props.visible&&(e="show",t={display:"block"}),r.a.createElement("div",{className:"Download"},r.a.createElement("div",{className:"modal ".concat(e),style:t},r.a.createElement("div",{className:"modal-dialog modal-lg",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},"Download Module"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.onHide},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body Download-body"},r.a.createElement("textarea",{ref:"codeInput",disabled:!0,value:this.prepareJSON()})),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:this.onDownload},"Download"),r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:this.props.onHide},"Close"))))),r.a.createElement("div",{className:"modal-backdrop ".concat(e),style:t}))}}]),t}(a.Component)),nn=(n(127),n(66)),an=n.n(nn),rn=function(e){function t(e){var n;return Object(Z.a)(this,t),(n=Object(X.a)(this,Object($.a)(t).call(this,e))).onClick=function(e){return e===n.props.selectedModuleKey?function(){}:function(){return n.props.onChangeModule(e)}},n.onClose=function(e){return function(){return n.props.onCloseModule(e)}},n}return Object(te.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"NavTabs"},r.a.createElement("ul",null,Object.keys(this.props.modules).map(function(t){return r.a.createElement("li",{key:t,className:t===e.props.selectedModuleKey?"NavTabs-active":""},r.a.createElement("button",{onClick:e.onClick(t)},t,".json"),r.a.createElement("img",{className:"NavTabs-close",src:an.a,onClick:e.onClose(t),alt:"Close"}))})))}}]),t}(a.Component),on=n(67),sn=n.n(on);function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function cn(e){return e?Object.keys(e.states).map(function(t){return function(e,t){var n=function(e){if(e.direct_transition)return dn(e.direct_transition);if(e.distributed_transition)return un(e.distributed_transition);if(e.conditional_transition)return{type:"Conditional",transition:e.conditional_transition.map(function(e){return{condition:e.condition,to:e.transition}})};if(e.complex_transition)return function(e){return{type:"Complex",transition:e.map(function(e){return{condition:e.condition,distributions:un(e.distributions||[]).transition,transition:dn(e.transition)}})}}(e.complex_transition);return null}(t),a=sn.a.create().toString(),r=t.type;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(n,!0).forEach(function(t){Object(h.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({name:e,transition:n,id:a,type:r},t)}(t,e.states[t])}):[]}function dn(e){return{to:e,type:"Direct"}}function un(e){return{type:"Distributed",transition:e.map(function(e){return{distribution:e.distribution,to:e.transition}})}}function pn(e,t){var n=t.reduce(function(e,t){return e[t]=!0,e},{}),a=e,r=1,o=/_(\d+)$/g.exec(e);for(o&&o.length>1&&(r=parseInt(o[1]),e=a=a.replace(o[0],""));n[a];)a=e+"_"+ ++r;return a}function mn(e){return e.replace(/[^A-Z0-9]/gi,"_")}var hn={example_module:{name:"Examplitis",remarks:["Examplitis is a painful condition that affects only males. Most patients ","can be cured with Examplitol or an Examplotomy but some never recover."],states:{Initial:{type:"Initial",conditional_transition:[{condition:{condition_type:"Gender",gender:"M"},transition:"Age_Guard"},{transition:"Terminal"}]},Age_Guard:{type:"Guard",allow:{condition_type:"Age",operator:">",quantity:40,unit:"years"},distributed_transition:[{distribution:.1,transition:"Pre_Examplitis"},{distribution:.9,transition:"Terminal"}]},Pre_Examplitis:{type:"Delay",range:{low:0,high:10,unit:"years"},direct_transition:"Examplitis"},Examplitis:{type:"ConditionOnset",target_encounter:"Wellness_Encounter",codes:[{system:"SNOMED-CT",code:"123",display:"Examplitis"}],direct_transition:"Wellness_Encounter"},Wellness_Encounter:{type:"Encounter",wellness:!0,direct_transition:"Examplitol"},Examplitol:{type:"MedicationOrder",reason:"Examplitis",codes:[{system:"RxNorm",code:"456",display:"Examplitol"}],distributed_transition:[{distribution:.2,transition:"Pre_Examplotomy"},{distribution:.1,transition:"Last_Days"},{distribution:.7,transition:"Terminal"}]},Pre_Examplotomy:{type:"Delay",range:{low:18,high:36,unit:"months"},direct_transition:"Examplotomy_Encounter"},Examplotomy_Encounter:{type:"Encounter",encounter_class:"ambulatory",codes:[{system:"SNOMED-CT",code:"ABC",display:"Examplotomy Encounter"}],direct_transition:"Examplotomy"},Examplotomy:{type:"Procedure",duration:{low:2,high:3,unit:"hours"},codes:[{system:"SNOMED-CT",code:"789",display:"Examplotomy"}],reason:"Examplitis",direct_transition:"End_Examplotomy_Encounter"},End_Examplotomy_Encounter:{type:"EncounterEnd",distributed_transition:[{distribution:.1,transition:"Death"},{distribution:.9,transition:"Terminal"}]},Last_Days:{type:"Delay",range:{low:8,high:20,unit:"years"},direct_transition:"Death"},Death:{type:"Death",direct_transition:"Terminal"},Terminal:{type:"Terminal"}}}},bn=(n(128),n(129),n(68)),gn=(n(130),n(69)),En=n.n(gn),vn=(n(131),function(e){function t(e){var n;return Object(Z.a)(this,t),(n=Object(X.a)(this,Object($.a)(t).call(this,e))).onChange=n.onChange.bind(Object(ee.a)(n)),n}return Object(te.a)(t,e),Object(z.a)(t,[{key:"onChange",value:function(e){var t=this;this.clearTimeout&&clearTimeout(this.clearTimeout),this.clearTimeout=setTimeout(function(){try{Dt(e);t.props.onChange(e)}catch(n){}},1e3)}},{key:"render",value:function(){return this.props.refreshCodeFlag?r.a.createElement("div",null):r.a.createElement("div",{className:"JsonEditor"},r.a.createElement(bn.a,{value:this.props.module,mode:"code",ace:En.a,onChange:this.onChange}))}}]),t}(a.Component)),yn=(n(133),n(32)),fn=n.n(yn),Cn=function(e){function t(e){var n;return Object(Z.a)(this,t),(n=Object(X.a)(this,Object($.a)(t).call(this,e))).state={search:""},n}return Object(te.a)(t,e),Object(z.a)(t,[{key:"onClick",value:function(e){var t=this;return function(){t.props.onClick(e.name)}}},{key:"onChange",value:function(e){this.setState({search:e.target.value})}},{key:"clearSearch",value:function(){this.setState({search:""})}},{key:"stateFilter",value:function(e){return e.name.toLowerCase().includes(this.state.search.toLowerCase())||e.type.toLowerCase().includes(this.state.search.toLowerCase())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"StateList"},r.a.createElement("div",{className:"Editor-panel-title"},"State List"),r.a.createElement("div",{className:"btn-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Find",value:this.state.search,onChange:this.onChange.bind(this)}),r.a.createElement("img",{className:"search-clear",src:fn.a,onClick:this.clearSearch.bind(this)})),r.a.createElement("table",{className:"table table-sm table-hover"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"State"),r.a.createElement("th",{scope:"col"},"Type"))),r.a.createElement("tbody",null,this.props.states.filter(this.stateFilter.bind(this)).map(function(t,n){return r.a.createElement("tr",{key:n,onClick:e.onClick(t),className:e.props.selectedState&&t.name===e.props.selectedState.name?"table-info":""},r.a.createElement("th",{scope:"row"},t.name),r.a.createElement("td",null,t.type))}))))}}]),t}(a.Component),On=(n(134),function(e){function t(e){var n;return Object(Z.a)(this,t),(n=Object(X.a)(this,Object($.a)(t).call(this,e))).state={search:""},n}return Object(te.a)(t,e),Object(z.a)(t,[{key:"onClick",value:function(e){var t=this;return function(){t.props.onClick(e.stateName)}}},{key:"onChange",value:function(e){this.setState({search:e.target.value})}},{key:"clearSearch",value:function(){this.setState({search:""})}},{key:"attributeFilter",value:function(e){return e.attribute.toLowerCase().includes(this.state.search.toLowerCase())||e.stateName.toLowerCase().includes(this.state.search.toLowerCase())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"AttributeList"},r.a.createElement("div",{className:"Editor-panel-title"},"Attribute List"),r.a.createElement("div",{className:"btn-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Find",value:this.state.search,onChange:this.onChange.bind(this)}),r.a.createElement("img",{className:"search-clear",src:fn.a,onClick:this.clearSearch.bind(this)})),r.a.createElement("div",null,"Note: This currently only displays attributes being written in this module.  It does not include referenced attributes or attributes written in other modules."),r.a.createElement("table",{className:"table table-sm table-hover"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Attribute"),r.a.createElement("th",{scope:"col"},"State"))),r.a.createElement("tbody",null,this.props.attributes.filter(this.attributeFilter.bind(this)).map(function(t,n){return r.a.createElement("tr",{key:n,onClick:e.onClick(t),className:e.props.selectedState&&t.stateName===e.props.selectedState.name?"table-info":""},r.a.createElement("th",{scope:"row"},t.attribute),r.a.createElement("td",null,t.stateName))}))))}}]),t}(a.Component)),Nn=(n(135),function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"onClick",value:function(e){var t=this;return function(){t.props.onClick(e.stateName)}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"WarningList"},r.a.createElement("div",{className:"Editor-panel-title"},"Warnings"),r.a.createElement("table",{className:"table table-sm table-hover"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Warning"),r.a.createElement("th",{scope:"col"},"State"))),r.a.createElement("tbody",null,this.props.warnings.map(function(t,n){return r.a.createElement("tr",{key:n,onClick:e.onClick(t),className:e.props.selectedState&&t.stateName===e.props.selectedState.name?"table-info":""},r.a.createElement("th",{scope:"row"},t.message),r.a.createElement("td",null,t.stateName))}))))}}]),t}(a.Component)),xn=(n(136),function(e){function t(){return Object(Z.a)(this,t),Object(X.a)(this,Object($.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(z.a)(t,[{key:"onClick",value:function(e){var t=this;return function(){t.props.onClick(e.stateName)}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"RelatedList"},r.a.createElement("div",{className:"Editor-panel-title"},"Related Modules"),r.a.createElement("div",null,"This currently only displays relationships based on submodules.  Additional relationships are in progress."),r.a.createElement("table",{className:"table table-sm table-hover"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Type"),r.a.createElement("th",{scope:"col"},"Module"),r.a.createElement("th",{scope:"col"},"State"))),r.a.createElement("tbody",null,this.props.related.map(function(t,n){return r.a.createElement("tr",{key:n,onClick:e.onClick(t),className:e.props.selectedState&&t.stateName===e.props.selectedState.name?"table-info":""},r.a.createElement("th",{scope:"row"},t.type),r.a.createElement("td",null,t.moduleKey),r.a.createElement("td",null,t.stateName))}))))}}]),t}(a.Component)),An=n(70),kn=n.n(An),jn=n(71),Sn=n.n(jn),_n=n(72),Mn=n.n(_n),Dn=n(73),In=n.n(Dn),wn=n(74),Rn=n.n(wn),Tn=n(75),Pn=n.n(Tn),Bn=n(76),Kn=n.n(Bn),Ln=n(77),Wn=n.n(Ln),Vn=n(78),Un=n.n(Vn),Fn=n(79),Qn=n.n(Fn),qn=n(80),Hn=n.n(qn),Gn=function(e,t){return{type:"ANALYZE",data:{moduleKey:e,module:t}}},Yn=function(e){return function(t,n){t(e);var a=n().editor.selectedModuleKey,r=n().editor.modules[a];r&&t(Gn(a,r)),"JSON_EDIT"!==e.type&&t(ba())}},Jn=function(e,t){return{type:"SELECT_NODE",data:{key:e,transitionIndex:t}}},Zn=function(e,t,n,a,r){return Yn({type:"ADD_NODE",data:{currentModuleKey:e,stateKey:t,state:n,selectedState:a,selectedStateTransition:r}})},zn=function(e,t){return Yn({type:"ADD_STRUCTURE",data:{currentModuleKey:e,structureName:t}})},Xn=function(e,t,n){return Yn({type:"ADD_TRANSITION",data:{currentModuleKey:e,nodeName:t,transitionType:n}})},$n=function(e,t){return Yn({type:"EDIT_NODE",data:{update:e,path:t}})},ea=function(e,t,n){return Yn({type:"RENAME_NODE",data:{targetModuleKey:e,targetNode:t,newName:n}})},ta=function(e,t,n){return{type:"COPY_NODE",data:{targetModuleKey:e,targetNode:t}}},na=function(e){return Yn({type:"JSON_EDIT",data:{module:e}})},aa=function(e){return function(t,n){return Object.keys(n().editor.modules).length>1?Object.keys(n().editor.modules)[0]===e?t(Object(ne.d)("#"+Object.keys(n().editor.modules)[1])):t(Object(ne.d)("#"+Object.keys(n().editor.modules)[0])):(t({type:"OPEN_MODULE",data:{}}),t(Object(ne.d)("#"))),t({type:"CLOSE_MODULE",data:{selectedModuleKey:e}})}},ra=function(e,t){return Yn({type:"NEW_MODULE",data:{key:e,module:t}})},oa=function(e,t){return{type:"EDIT_MODULE_NAME",data:{newName:t,targetModuleKey:e}}},ia=function(e,t){return{type:"EDIT_MODULE_REMARKS",data:{newRemarks:t,targetModuleKey:e}}},sa=function(e,t,n){return Yn({type:"CHANGE_STATE_TYPE",data:{targetModuleKey:e,targetNode:t,newType:n}})},la=function(){return Yn({type:"UNDO"})},ca=function(){return Yn({type:"REDO"})},da=function(){return{type:"SHOW_LOAD_MODULE"}},ua=function(){return{type:"HIDE_LOAD_MODULE"}},pa=function(){return{type:"SHOW_DOWNLOAD"}},ma=function(){return{type:"HIDE_DOWNLOAD"}},ha=function(e){return{type:"CHANGE_MODULE_PANEL",data:{targetPanel:e}}},ba=function(){return function(e){e({type:"REFRESH_CODE_FLAG",data:{flag:!0}}),setTimeout(function(){e({type:"REFRESH_CODE_FLAG",data:{flag:!1}})},250)}},ga=function(e){return function(t,n){var a={type:"OPEN_MODULE",data:{key:e}};!n().editor.modules[e]&&n().library.modules[e]&&(a.data.libraryModule=n().library.modules[e]),t(a),n().editor.modules[e]&&t(Gn(e,n().editor.modules[e]))}},Ea=function(e){return function(t,n){t({type:"LOAD_LIBRARY",data:e}),"#"===n().router.location.hash.charAt(0)&&t(ga(n().router.location.hash.slice(1)))}};function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?va(n,!0).forEach(function(t){Object(h.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var fa=function(e){function t(){var e;return Object(Z.a)(this,t),(e=Object(X.a)(this,Object($.a)(t).call(this))).onChange=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("object"!==typeof t)return function(a){return e.onChange(a,[].concat(n,[t]))};e.props.editNode(t,n)},e.renameNode=function(t,n){return function(a){a.name=I(a.name,{".":"","\\":"","|":""}),e.props.renameNode(t,n,a)}},e.copyNode=function(t,n){return function(){e.props.copyNode(t,n)}},e.pasteNode=function(t,n,a,r){return function(){var o=pn(mn(e.props.clipboard.name),n),i=C.a.cloneDeep(e.props.clipboard);e.props.addNode(t,o,i,a,r)}},e.changeStateType=function(t,n){return function(a){e.props.changeStateType(t,n,a)}},e.addTransition=function(t,n){return function(a){e.props.addTransition(t,n,a)}},e.newModule=function(t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("Module.Blank"),a=pn(mn(n.name),t);e.props.newModule(a,n),e.props.push("#"+a)}},e.addNode=function(t,n,a,r){return function(){var o=pn(mn("New State"),n),i=ya({},x("State.Simple"),{direct_transition:o});e.props.addNode(t,o,i,a,r)}},e.startTutorial=function(t){return function(){e.joyride.reset(!0),e.setState({joyride:{run:!0,steps:t}})}},e.renderAddStateButton=function(){return e.props.selectedModuleKey?r.a.createElement("button",{className:"button-clear","data-tip":"Add a state to this graph.",onClick:e.addNode(e.props.selectedModuleKey,Object.keys(e.props.module.states),e.props.selectedStateKey,e.props.selectedStateTransition)}," + Add State "):r.a.createElement("div",null)},e.renderUndoButton=function(){var t="button-clear";return e.props.undoEnabled||(t+=" disabled"),r.a.createElement("button",{className:t,"data-tip":"Undo",onClick:function(){return e.props.undo()}}," Undo")},e.renderRedoButton=function(){var t="button-clear";return e.props.redoEnabled||(t+=" disabled"),r.a.createElement("button",{className:t,"data-tip":"Redo",onClick:function(){return e.props.redo()}}," Redo")},e.renderDownloadButton=function(){},e.renderUndoButton=function(){var t="button-clear";return e.props.undoEnabled||(t+=" disabled"),r.a.createElement("button",{className:t,"data-tip":"Undo",onClick:function(){return e.props.undo()}}," Undo")},e.renderDeleteButton=function(){var t="button-clear";return e.props.selectedStateKey||(t+=" disabled"),r.a.createElement("button",{className:t,"data-tip":"Delete State",onClick:function(){return e.props.selectedStateKey&&e.onChange("".concat(e.props.selectedModuleKey,".states.").concat(e.props.selectedStateKey))({val:{id:null}})}}," Delete State")},e.renderCopyButton=function(){var t="button-clear";return e.props.selectedStateKey||(t+=" disabled"),r.a.createElement("button",{className:t,"data-tip":"Copy State",onClick:e.props.selectedStateKey&&e.copyNode(e.props.selectedModuleKey,e.props.moduleState,Object.keys(e.props.module.states))}," Copy State")},e.renderPasteButton=function(){var t="button-clear";return e.props.clipboard||(t+=" disabled"),r.a.createElement("button",{className:t,"data-tip":"Paste State Here",onClick:e.props.clipboard&&e.pasteNode(e.props.selectedModuleKey,Object.keys(e.props.module.states),e.props.selectedStateKey,e.props.selectedStateTransition)}," Paste State")},e.renderStateEditor=function(){return e.props.module?r.a.createElement(At,{moduleName:e.props.module.name,helpFunction:e.startTutorial,renameNode:e.renameNode(e.props.selectedModuleKey,e.props.moduleState),changeType:e.changeStateType(e.props.selectedModuleKey,e.props.moduleState),copyNode:e.copyNode(e.props.selectedModuleKey,e.props.moduleState,Object.keys(e.props.module.states)),addTransition:e.addTransition(e.props.selectedModuleKey,e.props.moduleState),state:e.props.moduleState,otherStates:e.props.moduleStates,onChange:e.onChange(e.props.selectedModuleKey)}):r.a.createElement("div",null)},e.renderDownload=function(){return e.props.module?r.a.createElement(tn,{module:e.props.module,visible:e.props.downloadVisible,onHide:e.props.hideDownload}):r.a.createElement("div",null)},e.renderLoadModule=function(){return r.a.createElement(Xt,{modules:e.props.modules,library:e.props.library,visible:e.props.loadModuleVisible,onHide:e.props.hideLoadModule,push:e.props.push,welcome:!e.props.module,newModule:e.newModule(Object.keys(e.props.modules))})},e.renderModulePropertiesEditor=function(){return e.props.module?r.a.createElement(kt,{module:e.props.module,onRemarksChange:function(t){return e.props.editModuleRemarks(e.props.selectedModuleKey,t)}}):r.a.createElement("div",null)},e.renderModuleGraph=function(){return e.props.module?r.a.createElement(Ut,{module:e.props.module,fullscreen:!e.props.modulePanelVisible,onClick:e.props.selectNode,selectedState:e.props.moduleState,selectedStateTransition:e.props.selectedStateTransition}):r.a.createElement("div",null)},e.onPanelResize=function(t,n){e.setState(ya({},e.state,{panelWidth:e.state.panelWidth+n.deltaX}))},e.onPanelResizeDone=function(){e.props.refreshCode(),e.state.panelWidth<=250&&(e.setState(ya({},e.state,{panelWidth:250})),e.leftNavClick("hide")())},e.renderPanelContent=function(){switch(e.props.selectedModulePanel){case"info":return e.renderModulePropertiesEditor();case"state":return e.renderStateEditor();case"statelist":return r.a.createElement(Cn,{selectedState:e.props.moduleState,states:e.props.moduleStates,onClick:e.props.selectNode});case"code":return r.a.createElement(vn,{onChange:function(t){e.props.jsonEdit(t)},module:e.props.module,refreshCodeFlag:e.props.refreshCodeFlag});case"attribute":return r.a.createElement(On,{attributes:e.props.attributes,selectedState:e.props.moduleState,modules:e.props.modules,states:e.props.moduleStates,onClick:e.props.selectNode});case"warning":return r.a.createElement(Nn,{warnings:e.props.warnings,selectedState:e.props.moduleState,onClick:e.props.selectNode});case"related":return r.a.createElement(xn,{related:e.props.relatedModules,selectedState:e.props.moduleState,onClick:e.props.selectNode});default:return r.a.createElement("div",null)}},e.renderStateButton=function(){var t="",n=e.leftNavClick("state");"state"===e.props.selectedModulePanel?t="Editor-left-selected":e.props.moduleState||(t="Editor-left-disabled",n=function(){});var a="View currently selected state.";return e.props.moduleStates&&(a+=" Please selected a state in the graph, state list, or attribute list."),r.a.createElement("li",{className:t},r.a.createElement("button",{"data-tip":a,onClick:n},r.a.createElement("img",{src:Pn.a,alt:""})))},e.renderStateListButton=function(){var t=r.a.createElement("span",{className:"Editor-button-count"},"0");return e.props.moduleStates.length>0&&(t=r.a.createElement("span",{className:"Editor-button-count"},e.props.moduleStates.length)),r.a.createElement("li",{className:"statelist"===e.props.selectedModulePanel?"Editor-left-selected":""},r.a.createElement("button",{"data-tip":"Searchable list of states.",onClick:e.leftNavClick("statelist")},r.a.createElement("img",{src:Kn.a,alt:""}),t))},e.renderAttributesButton=function(){var t=r.a.createElement("span",{className:"Editor-button-count"},"0");return e.props.attributes.length>0&&(t=r.a.createElement("span",{className:"Editor-button-count"},e.props.attributes.length)),r.a.createElement("li",{className:"attribute"===e.props.selectedModulePanel?"Editor-left-selected":""},r.a.createElement("button",{"data-tip":"Attributes set in this module.",onClick:e.leftNavClick("attribute")},r.a.createElement("img",{src:Un.a,alt:""}),t))},e.renderWarningButton=function(){var t=r.a.createElement("span",{className:"Editor-button-count"},"0");return e.props.warnings.length>0&&(t=r.a.createElement("span",{className:"Editor-button-count Editor-button-count-warning"},e.props.warnings.length)),r.a.createElement("li",{className:"warning"===e.props.selectedModulePanel?"Editor-left-selected":""},r.a.createElement("button",{"data-tip":"Problems in module that need to be resolved.",onClick:e.leftNavClick("warning")},r.a.createElement("img",{src:Hn.a,alt:""}),t))},e.renderRelatedModulesButton=function(){var t=r.a.createElement("span",{className:"Editor-button-count"},"0");return e.props.relatedModules.length>0&&(t=r.a.createElement("span",{className:"Editor-button-count"},e.props.relatedModules.length)),r.a.createElement("li",{className:"related"===e.props.selectedModulePanel?"Editor-left-selected":""},r.a.createElement("button",{"data-tip":"Related modules, such as those that share attributes. ",onClick:e.leftNavClick("related")},r.a.createElement("img",{src:Qn.a,alt:""}),t))},e.leftNavClick=function(t){return function(){"hide"!==t||"hide"===t&&e.props.modulePanelVisible?e.props.changeModulePanel(t):"hide"===t&&(e.props.selectedStateKey?e.props.changeModulePanel("state"):e.props.changeModulePanel("info"))}},e.renderNav=function(){return r.a.createElement("div",{className:"Editor-top"},r.a.createElement("img",{src:Sn.a,className:"Editor-top-logo",alt:"Synthea Logo"}),r.a.createElement("div",{className:"Editor-top-title"},"Synthea Module Builder"),r.a.createElement("div",{className:"Editor-top-open"},r.a.createElement("button",{className:"button-clear",onClick:e.newModule(Object.keys(e.props.modules)).bind(Object(ee.a)(e),void 0)},"New Module"),r.a.createElement("button",{className:"button-clear",onClick:e.props.showLoadModule},"Open Module"),r.a.createElement("button",{className:"button-clear Editor-top-download",onClick:e.props.showDownload},"Download")),r.a.createElement("button",{className:"button-clear Editor-top-help",onClick:e.startTutorial(Ye)}," ? "),r.a.createElement(rn,{selectedModuleKey:e.props.selectedModuleKey,modules:e.props.modules,onChangeModule:function(t){return e.props.push("#"+t)},onCloseModule:function(t){e.props.closeModule(t)}}))},e.renderMainEditor=function(){return e.props.module?r.a.createElement("div",{className:"Editor-main"},r.a.createElement("div",{className:"Editor-action-bar"},r.a.createElement(le.RIEInput,{className:"Editor-top-module",value:e.props.module&&e.props.module.name||"Untitled",propName:"name",change:function(t){e.props.editModuleName(e.props.selectedModuleKey,t.name)}}),r.a.createElement("div",{className:"Editor-graph-buttons"},e.renderAddStateButton(),e.renderUndoButton(),e.renderRedoButton(),e.renderDeleteButton(),e.renderCopyButton(),e.renderPasteButton(),e.renderDownloadButton())),r.a.createElement("div",{className:"Editor-left"},r.a.createElement("ul",null,r.a.createElement("li",{className:"Editor-left-fullscreen"+(e.props.modulePanelVisible?"":" Editor-left-fullscreen-active")},r.a.createElement("button",{"data-tip":"Show/hide editor panel.",onClick:e.leftNavClick("hide")},r.a.createElement("img",{src:In.a,alt:""}))),r.a.createElement("li",{className:"Editor-left-spacer"}),r.a.createElement("li",{className:"info"===e.props.selectedModulePanel?"Editor-left-selected":""},r.a.createElement("button",{"data-tip":"Module Properties.",onClick:e.leftNavClick("info")},r.a.createElement("img",{src:Rn.a,alt:""}))),e.renderStateButton(),r.a.createElement("li",{className:"Editor-left-spacer"}),r.a.createElement("li",{className:"code"===e.props.selectedModulePanel?"Editor-left-selected":""},r.a.createElement("button",{"data-tip":"Directly edit module JSON.",onClick:e.leftNavClick("code")},r.a.createElement("img",{src:Wn.a,alt:""}))),r.a.createElement("li",{className:"Editor-left-spacer"}),e.renderStateListButton(),e.renderAttributesButton(),e.renderWarningButton(),e.renderRelatedModulesButton())),r.a.createElement("div",{className:"Editor-panel",style:{left:e.props.modulePanelVisible?50:-e.state.panelWidth,width:e.state.panelWidth}},r.a.createElement("div",{className:"Editor-panel-content"},r.a.createElement("button",{className:"Editor-panel-minimize button-clear",onClick:e.leftNavClick("hide")},r.a.createElement("img",{src:Mn.a,alt:""})),e.renderPanelContent()),r.a.createElement(se.a,{axis:"x",onDrag:e.onPanelResize,onStop:e.onPanelResizeDone,bounds:{left:-250,top:0,right:1/0,bottom:0}},r.a.createElement("div",{className:"Editor-panel-resize",style:{left:e.originalPanelWidth-8}}))),e.renderModuleGraph()):r.a.createElement("img",{className:"Editor-loading-logo",src:kn.a,alt:"Loading"})},e.originalPanelWidth=500,e.state={joyride:{run:!1,steps:Ye,stepIndex:0},panelWidth:e.originalPanelWidth},e}return Object(te.a)(t,e),Object(z.a)(t,[{key:"componentDidMount",value:function(){var e=this;n.e(3).then(n.bind(null,140)).then(function(t){e.props.loadLibrary(ya({},hn,{},t.default)),setTimeout(function(){oe.a.rebuild()},1e3)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Editor"},r.a.createElement(oe.a,{className:"react-tooltip-customized",effect:"solid",delayShow:800}),this.renderNav(),this.renderLoadModule(),this.renderDownload(),this.renderMainEditor(),r.a.createElement(ae.a,{ref:function(t){return e.joyride=t},showOverlay:!0,showSkipButton:!0,showStepsProgress:!1,type:"continuous",steps:this.state.joyride.steps,run:this.state.joyride.run,autoStart:!0,debug:!1,allowClicksThruHole:!1,keyboardNavigation:!0}))}}]),t}(a.Component),Ca=Object(s.c)(function(e){var t=e.editor.selectedModuleKey,n=e.editor.loadModuleVisible;t||(n=!0);var a=e.editor.modules[t],r=t&&cn(a),o=r&&r.find(function(t){return t.name===e.editor.selectedStateKey}),i=e.editor.historyIndex<e.editor.history.length-1,s=e.editor.historyIndex>0;return{module:a,modules:e.editor.modules,library:e.library.modules,selectedModuleKey:t,moduleState:o,moduleStates:r,selectedStateKey:e.editor.selectedStateKey,selectedStateTransition:e.editor.selectedStateTransition,loadModuleVisible:n,downloadVisible:e.editor.downloadVisible,selectedModulePanel:e.editor.selectedModulePanel,modulePanelVisible:e.editor.modulePanelVisible,warnings:e.analysis.warnings,relatedModules:e.analysis.relatedModules,attributes:e.analysis.attributes,undoEnabled:i,redoEnabled:s,refreshCodeFlag:e.editor.refreshCodeFlag,clipboard:e.editor.clipboard}},function(e){return Object(u.b)({selectNode:Jn,addNode:Zn,addStructure:zn,addTransition:Xn,editNode:$n,renameNode:ea,copyNode:ta,changeStateType:sa,newModule:ra,loadLibrary:Ea,showLoadModule:da,hideLoadModule:ua,showDownload:pa,hideDownload:ma,refreshCode:ba,editModuleName:oa,editModuleRemarks:ia,changeModulePanel:ha,jsonEdit:na,closeModule:aa,undo:la,redo:ca,push:ne.d},e)})(fa),Oa=J(Y),Na=function(e){"#"===e.hash.charAt(0)&&Oa.dispatch(ga(e.hash.slice(1)))};Y.listen(Na),Na(Y.location);var xa=function(){return r.a.createElement(s.a,{store:Oa},r.a.createElement(c.a,{history:Y},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:Ca}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(137);i.a.render(r.a.createElement(xa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},32:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABTCAYAAADjsjsAAAADZ0lEQVR4nO2dTZKbMBBGnycXYJlljsANQm6RpY6inGS22c0RnJwAHyHL7PANyAJIYRsMgpbUyPqqvoVrPDT9Sn80wpyIr7L3F+ArUPSfl3QBrsBv4E//+eLlDBWrAAzwATRAK+imP67p4yQrQ5eoJLwlD2CTUAFY5FvglhZrOWhr1QLx8FAt+iDOQVWrEqiJD8rFNetWDkFliQ9mj600kC0qOF5rfNZKo42lJfrHRlc3ROj2hvRAjoEaKVBLMh4T0WQjg2teJnKCyQA1CpJLAmiKk81ai05KBa8Lcgx0cdn0tsyS85oDJa6CjsNTfVr4uwW+S5xNAvoMnIBfW/65JH730uhN42cql4nSrueAzXVzS+7ec3Lq7j5m7waoCN/a6z6uj3xWTcrWQ+BhnAlZZRpXgXysk+0SSOlWObXgDQF0qpwmDXSxdVrPIEMAfVaXlAZqZ+KAYKA1l2A+gK4p8EoCbeaCGMGkqoWEBkkCdamUV4K5mqkAkhsEXBKTABo63tgfUwGkDh46wZggB9/ENx4ChEhUA8iWu67ucw+Qr4S1gGy56+q+65XSiWsC2TKa1UNVh6QAaAM5uISw93b2gtAKsqUfN23AgHuAaAbZ0l8NnQMH3QLm3fH7MWqxZyIFdgW6VjH3PtVECuwDqIZNZFGDSwHVAFIFzL1AtYBUA3MrUE0gVcFs6WZtF70rOGeVMHPLjAhSI9DoJ5Bnc0UgB2kAmq+ApPJ5o3vMOLQuwLeVsV2uza/9cWM8Kn2FXDWSsoVcz5SygVxpl/L/TRf5HtA+3+zsyHcn9/nm7qTxFOQl75vnHR37/BA/7zXa5oe9RpB3wW21mQuS92e65zkrK5jYy+8cLoSDTQENse6bAioNspmI8SArnNgYaMgrkjFQaZCLrXKQdOscgFYBQY6BVp7yWV0+tIGTPprtWpCDYlettbp2BQn5qd45zy75nj1v/pfugcvqyXdeTT+An3sOkLt7503d+14+Zvej2Wn2XpKPddpRvObS2FlGQWIxbPajm5ZRkFwSIAeZyAkmA3KQId0xtCHCL2inOCl5mWzWSsNmKSn72Pu0SZb4MPbYSgPZq5LjtdIahb+GPZZF/1jaoLA1zqlAJ9QBooqx0VVaoB4a4pQM+a0r4ipI9H1Ap9ABJ1SSyJuq/gG9HAYxsPsSkQAAAABJRU5ErkJggg=="},35:function(e,t,n){},52:function(e,t){},53:function(e,t){},66:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABTCAYAAADjsjsAAAADZ0lEQVR4nO2dTZKbMBBGnycXYJlljsANQm6RpY6inGS22c0RnJwAHyHL7PANyAJIYRsMgpbUyPqqvoVrPDT9Sn80wpyIr7L3F+ArUPSfl3QBrsBv4E//+eLlDBWrAAzwATRAK+imP67p4yQrQ5eoJLwlD2CTUAFY5FvglhZrOWhr1QLx8FAt+iDOQVWrEqiJD8rFNetWDkFliQ9mj600kC0qOF5rfNZKo42lJfrHRlc3ROj2hvRAjoEaKVBLMh4T0WQjg2teJnKCyQA1CpJLAmiKk81ai05KBa8Lcgx0cdn0tsyS85oDJa6CjsNTfVr4uwW+S5xNAvoMnIBfW/65JH730uhN42cql4nSrueAzXVzS+7ec3Lq7j5m7waoCN/a6z6uj3xWTcrWQ+BhnAlZZRpXgXysk+0SSOlWObXgDQF0qpwmDXSxdVrPIEMAfVaXlAZqZ+KAYKA1l2A+gK4p8EoCbeaCGMGkqoWEBkkCdamUV4K5mqkAkhsEXBKTABo63tgfUwGkDh46wZggB9/ENx4ChEhUA8iWu67ucw+Qr4S1gGy56+q+65XSiWsC2TKa1UNVh6QAaAM5uISw93b2gtAKsqUfN23AgHuAaAbZ0l8NnQMH3QLm3fH7MWqxZyIFdgW6VjH3PtVECuwDqIZNZFGDSwHVAFIFzL1AtYBUA3MrUE0gVcFs6WZtF70rOGeVMHPLjAhSI9DoJ5Bnc0UgB2kAmq+ApPJ5o3vMOLQuwLeVsV2uza/9cWM8Kn2FXDWSsoVcz5SygVxpl/L/TRf5HtA+3+zsyHcn9/nm7qTxFOQl75vnHR37/BA/7zXa5oe9RpB3wW21mQuS92e65zkrK5jYy+8cLoSDTQENse6bAioNspmI8SArnNgYaMgrkjFQaZCLrXKQdOscgFYBQY6BVp7yWV0+tIGTPprtWpCDYlettbp2BQn5qd45zy75nj1v/pfugcvqyXdeTT+An3sOkLt7503d+14+Zvej2Wn2XpKPddpRvObS2FlGQWIxbPajm5ZRkFwSIAeZyAkmA3KQId0xtCHCL2inOCl5mWzWSsNmKSn72Pu0SZb4MPbYSgPZq5LjtdIahb+GPZZF/1jaoLA1zqlAJ9QBooqx0VVaoB4a4pQM+a0r4ipI9H1Ap9ABJ1SSyJuq/gG9HAYxsPsSkQAAAABJRU5ErkJggg=="},70:function(e,t,n){e.exports=n.p+"static/media/synthea-animated-logo.d15f277a.svg"},71:function(e,t,n){e.exports=n.p+"static/media/synthea-logo.81979623.png"},72:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABKUlEQVRIieWVzW3DMAxGn4Au4BW8QlbwClnBK2SFrpAV2hG8QlZQR/AKzKEMKsQ0TCoSeggBHgxIfvz7KPgnS+WHiPSBpHQGRuAb+NkcEJGmDsxABkR9erA+OmQ3KHDWLE1rBi6AF2A4Ov8yOKU0KuzsAZoW7N8IXPnrn8cnA+sD6+UlCBQN0q6IY0KjwIz2vPiPD8xWEh6/AfPO//bBWpJLBfAKTAeVM+0BXAOwFfgERueM2EkHPGsbBg+wBXg5KmdrcPaWs0fGK78zUB3AK6UuJ/jUClyzlRZ2NFuj4xPxPbzZUmFwcajmIVj1jjkHLrCxySKLRYAvnqQXAjdYpRmdgyrwUxA1j0f9e7wTgFcJ7cBFAB4ptgc7pdgPfCDF/mBDCYtW403tDn5nUb6eK9JxAAAAAElFTkSuQmCC"},73:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHEAAAAmCAYAAADz9XSfAAAC00lEQVR4nO2c4XnaMBRF7+NjAEagGzgbOBuQDcgGdAM6QbMBbJBskGwAGyQblA1uf8hNhbAtbPSeGtV3AB0ONu9JnyQApZBckHwlWWsxWphLkgcrXsAuy5dkRfIXXWoVyCVz9YdpwQvYFcl3Y99azZfkmuepk0MumVsfqM0L2Dl8Nyq+TTnZ8TJ1Mkg78zkEavFa+OX4sqnNLUJqUnQlrJWpwQvYi6J86dVmKym6EtbJTM0L2Dl8V33MWwffdA2sJUXyZwyYkhewc/huY8CxA7fWZk0p/p3CR5OC18LeFePLntqsJcXzKXx6qX52X7//er6M1GYNKV5O4dNK9bNz+Q5iDhk8WptTS/H6EjZO6t/zjfb7tsyvGHgB4BnA6A83NA3zFUBlxQzYOwArY+Zo31lk8ArAAbYPsAbwjjwPsIL7Mi0fYIUbfTsfIsk1nNBy7OBDQ3LTMBdWTI+9hvGvv2EeoOE7tjZ3pL6CN2QKH83/5jsPB4f927iE67m5+p91v18ise9nOWWC2jw0JFdw5SRX/8vR75P7zprB19CqzR0huYV7I3P1vwMK6fdzkjsA69QDd4UZpvABvzjf3iXGlK+RmYg8Ani0AorISUQeAPywYgb8XL7ftRizBrQHcAfgpAUKIyJbAA+WTI+9h/P9MGQ+AbiHgu9nORWRI4BvAI6pIV0RkRe4L9OM6bGPDfvNkPkGBd+zntj89O8APKWE9EVEPuDe0L0V02OfROQepfpyxJZIR+oBzGt2zqP5Qr6Dt9naEoMM2pzsyNVSDTN2huU2qbjvkA3gFL7+Gd1R6V1iZOwbpr3ZYx/hSt2LMfMm3+g60esbZksCrzfvrZgB23QJZDoX4XQ8w8pX53iGB5kOSpXgy+nIYjm+nA4PW/jqHB4OINMxfn1fvWP8HmS6UFOCL6erbeX4crpkWhswdS6ZBpDpurc+s1b3ZWl/RBBnZ/P9DWNXeLt4JWYKAAAAAElFTkSuQmCC"},74:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAgCAYAAADud3N8AAABr0lEQVRIib3WsWsUQRTH8c/OnTZRBIkWOUFLG0FjFUgrpLOz0NZ/QNDeXhQbQSxSCVrY2KSwUIgWIgqBNEoOxYhaGS8RxEIuFrsLlzV3mbm97A9esfB+7/tmZuftZuKU4SzmcRodtPEXX/Eer7CC7ciaQzWNm1gviu0V60X+9DiwFm5gKxJWja3C34oFHsfymLBqLBf1RuoEuhMCltEt6u6qQ1iNLHQfl3AvMn+1qP+fFiMLfKr4Pkb6FqvAuYTt+jnQ9RQ2Erxzg9ClBGN5Tg+xluhbKoEd9BPN40YfnYAF+cRpQhkWAmYTjZuFuYzNRP9skG9vk+oEHG4YOhXQaxj6I8gvd5P6HvC6YegbOILf4u9a9Th6Cd4+ZoL8lX+0b+vaqef4Vj6cwp/Ibuus9GK1i+sJ5t5AxHre2WXyZXiSUCR15u74wgzqIJ7uA/T2MGCpFm6Z3JfnJQ7sBS01j7c1gV0ciwWWynABj/ErEfgZJ1OBVbVxDldwTT7JhgE/GPEHWEd3hwBf4OgoY5hwI3fkx7ExKqk9IdgXXMWzmOS6K93GA5yJBdbVZZwfx/gPjrmEGhKRqqEAAAAASUVORK5CYII="},75:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAADF0lEQVRIiZ3WS4iVZRgH8N8cx+N4osuMkqPZFbEb4aIUwkVWEAUtohZR7oISiqJNi0gwsILatLCCcBPZbREFbaTMRYRdKRcVJdaohVE5MzmHUU9NZ74Wz/M535w5M874h5dzznt5/s/l/z7v6XFmNLABd2AT1mApjuN7fIS9+AH/zsNeV1yNl3AMBVoYwV9J1MYkfsIT6D8bkpvxdRI08Rm24i7chs14MSNpYwJv4dKFkFyPb5LkFzyKVah37GuIqJ/H37l/Fy6cD8lyvJuHfsQtWHyGM+emM8dFZE9iyVwHevAA/kkP7+xYX4SLsQ5rk6BEHU+ngwdxw1xEg9idm18xPVXnYwv2YQgH8DKurey5DF/l+a1zRXUjfsUYbq/MN/CMEEVRGRP4Atd1iWovVs5GdB9OCiVdXpnfJCRddBlt7BB3i1DkWEZ9ZWmgVjHWg/PSqzFxZwgh3Jpr3VATl3kgfw9jXKR6SXVTlaiWn+30ttyzqmNvJ1aYUmZ5tifHDKJJUYOJ9L705j8cMrfEj+JUfh8QahwX6p1BBIcxKuqzpuLhBzgyC0khOsKIkP/GdHQoHe+KlfgwD++oRFHDgxlZVQhNvC1SB5fgS5GdbWZ2ktNYlAab4sJWJV4X/e910Z724DFclOt9eEqk+mesn42kxCDeS4+/S7K+ynq/6A6D6M25hugoo6Iu2zvOzIqNopkW+A2P4IKMuIrFoqk+J2pU4BNT9T2N3s6JRFs0SFgtnoO78T6+FYpaIRruPbginWiKbAzNJ5rVeE0U9JAQx4iQfSFe0ZaoRVUYkzn24CYdQijluBx/iFw/jIfS4At4Fp+K/Pcm4Xj+3i+EcQofiza0IceweOpJ9e5Lr9fhXvyeHu40/QE7R4jgGtFE12b6lglZ9+N+cXmLtHmVqNdmmYYW3jH1dO9OgwtFHY+LVJ/Am2l3v0xBmfsCn4t0ni0G8Kqp/xF/4ljN9C49IR60UTOlPF9MiielJWral3MOm66cYbwh7sdCURdCOpK2SpvNXnFflmY0LdHXyrFQ1MQ71BAd4qTIzOj/E7fg3rTP7r4AAAAASUVORK5CYII="},76:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAaCAYAAAAwspV7AAAAs0lEQVRIie3UMQrCQBCF4S9h8SzxRKbQ0lYrxcYL6BXsbPSEQhotNBBCAmuzSbE/TLGzA/uYfbxiWVULXLFGgTsOaOp6BR6Pp5QEXLDr9HZ44dSbfacSVWIz0N+mEjBEOeXjY5S+HupzG+gVqSrg+Du033jHuaumNXwqAhrsfzULQuotxDBLoxfLqhq9nGqLAaOJ3g7lRJcTPZ6c6LHkRI9llkbPif6PqJzoMczS6DnRY/kAyfw0NPNHfbAAAAAASUVORK5CYII="},77:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAZCAYAAADNAiUZAAABn0lEQVRIic2WwXHCMBBFnzM0QAu04JSQlAAlQAlwk3SDElAJSQmhBFwCtOAS4CAJ1kISdkxm8mc8I9kr/d2V9nsr0pgDS+DDzy2wShkarW5jpc0MOInPG+DbaHWWa94S+6yBL0E4Blvg6J15SvpKTHGZu2ESGcy8UcAG2PXd3aexAlDa/HDPVi3t4khn0dz2JUzgkNs3lV6JdgSpXCuz95T0T1AiHRNlcX3pTEuke+ACXJQ2F6VNqrx6p1fesqZA2gdSEKbSMUm69M9LSH35SOJtEIkJLqWnaE3DgPosYAEc/bgGTkobW2VIq767Su1NQWmzxslhgM3d3mPm/SAobeqIEHBnGqRL/kVquuf7W+zFuAHejVYrGamlK3uj/jI+SlkNK6NVA48lI29srMNDIWuzDYQp0k5tFTZc0hWHlINZofl32luKNMYgnX4FaWu0SpHK9cUe6RzNc2VjuSvWIf6otHloUSTiduWMS1Xwcu+fuBuceodaQZ7qBgM6Op5Kbx/NneMi/JSlkEFL1PbkSBck0iZgvc0zwh1OhTrHdgUMPHWH6hjEpwAAAABJRU5ErkJggg=="},78:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAYCAYAAAB0kZQKAAABmklEQVRIibWWy3HCMBCGv3HSgFtwC0kJaYEWSAlQgiiBXHNzSoBrbqQEuOZmX7mRA1q0XkvyiJh/RjO2tI9f2ocEY6yAC1BH1v4DsdsBLznBNy+4m5kAQAMcFZEmJXicEpiBSEdmo84vugcREEhYLlxPfoDOj7lzIQYJyzbGbhvT8HB+/aKGPTWn1nIJqJP0hh2J4zEOnJKVIY7sfC60DSYkMtElFGI4GEc6zjvCca8yNgYyS8rLUnSE/NTOY2hFpyIk4qnAwAfQ+2/R3wPrAhvir6kIPaGEBMCX+S8hAGET6JMoxT5ltBTVvYqMk255p53+XhKOcQ9YFNq45WIVmYxhSdhpSziFNSEMDfmStJBN9BC6XKpEdWPRQ7qrM/NCdkU+RFLaDYSaTzWrGInWyBwiMrm+IU+GI8AzIctrv2iz/gS8E0r5h3F5vhqHPbBJEIAQioGd6K32QIi/QXLrW+3RV/mCeEipmXjxzAjJn+g1r2/CklIrgfjIXnT6TVDafKYgVXawC0/m/xM4c62Ab+B3ZiJwrbSznvgDPlufbtfHeLcAAAAASUVORK5CYII="},79:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAbCAYAAAAULC3gAAABYElEQVRIie2XTU7DMBCFP1dZItFLVGHFujs2CAmxZMdFKBdo4TBhxx04AItyiqgpe7OwKyZR4njCgCrEk0aa+PfZHr+JIWABVMAO8Ea2i2MuALz3WQZQArUhka7VQKkhVP0gmYNVuYQcsAdO4tG9AS/Y4Bo4j37jvT/N7ShXsjIiA7CRY+fu0MyQgAn+PiF5W6bg6HYIdEE9KqBih7LK6QiohlCWgE4g1BJQzZGtgbmivRZzYF0oOlwJP0dAX4FlT/lT51sK6CWMHNnAVq+GbpMo7xXGHrTaFcAHX6njLlakVgRwATxG/15WOOcO7o0obvqYDCGZXL8RpK3kmph/02nLGYnbY0CojnNkEZoBW0LwPRMyvxX2ccxlnCMLRVzlO3CrmOxB+G6w1QRorn0LInhNcXS57J/QGDQxNCagU9EWUMXz5FdeJxpCSQE1sCCgmgcc4Z+oIuQmKyJNHLME+AQWCT3RvS5INwAAAABJRU5ErkJggg=="},80:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAA5ElEQVRIib3WPQqDQBCG4dc0Qq6Rg6XzXjlDevEIghcQBGtbK9OsYUn8mU/HXRgIMpMHx12dDH3lwDP8fgHjgf8wrztQAlOIMlxLgl2KrmGXoHuYK2rFXNA1bACqEIMXunVndZRXr+RI6F4bLaAZtTyzJspvdnI3UesGaaOa1pC/iCq7UQX/0FzAJqCPwF6oK4NFIRTNx2JeS8diK4rbb29TLLWl8edoFOq+LQX9FTagtfP0TlXC5Sy6YFa0Ax4hurOYBa2ivMoDs6DvEG6YBXXHVDTpXJN0cks6m8pYdgA9Nep/AHdVY2hvGCEdAAAAAElFTkSuQmCC"},82:function(e,t,n){e.exports=n(138)},87:function(e,t,n){}},[[82,1,2]]]);
//# sourceMappingURL=main.0a1ab433.chunk.js.map